{"version":3,"sources":["assets/images/sad-icon.svg","assets/images/light-arrow-left.svg","assets/images/dark-arrow-left.svg","assets/images/dark-cross-icon.svg","assets/images/light-cross-icon.svg","assets/images/down-arrow.svg","assets/images/search-icon.svg","assets/images/congrat-icon.svg","assets/images/cropped-screen.svg","components/app-components/navbar/NavLink/NavLink.js","components/base-components/Button/Button.js","utils/time.js","constants.js","ducks/ui/modals/actions.js","ducks/ui/modals/action-types.js","components/app-components/navbar/NavBar.js","components/app-components/bestDeals/BestDealsPage/BestDealsPage.js","components/base-components/Gallery/GalleryViewer/GalleryViewer.js","components/base-components/Gallery/Gallery.js","components/app-components/common/Spinner/Spinner.js","components/app-components/common/ErrorPage/ErrorPage.js","components/base-components/Tooltip/Tooltip.js","components/app-components/movies/utils/movies.js","components/app-components/movies/common/Seances/Seances.js","components/app-components/common/NoScheduleComponent/NoScheduleComponent.js","components/app-components/common/NotFoundComponent/NotFoundComponent.js","ducks/data/movies/selectors.js","ducks/data/movies/action-types.js","ducks/data/movies/actions.js","components/app-components/movies/movie-page/SeancesList/SeancesList.js","components/base-components/ButtonNext/ButtonNext.js","components/base-components/ButtonPrev/ButtonPrev.js","utils/date.js","components/base-components/Calendar/Calendar.js","utils/array.js","components/base-components/ToggleIcon/ToggleIcon.js","components/base-components/Toggle/Toggle.js","components/base-components/DateFilter/DateInput/DateInput.js","components/base-components/DateFilter/FrequentDateButton/FrequentDateButton.js","components/base-components/DateFilter/DateFilter.js","components/base-components/DateFilter/DateFilterContext.js","components/app-components/movies/movies-page/DateFilter/DateFilter.js","components/app-components/common/NotFoundPage/NotFoundPage.js","components/base-components/RangeSlider/SliderWireframe/SliderWireframe.js","components/base-components/RangeSlider/utils/array.js","components/base-components/RangeSlider/utils/clamp.js","components/base-components/RangeSlider/SelectedRange/SelectedRange.js","components/base-components/RangeSlider/Handle/Handle.js","components/base-components/RangeSlider/RangeSlider.js","components/app-components/movies/movie-page/MoviePage.js","components/app-components/movies/movies-page/Search/Search.js","components/app-components/movies/movies-page/Movie/Movie.js","utils/routes.js","components/app-components/movies/movies-page/MoviesList/MoviesList.js","components/app-components/movies/movies-page/MoviesPage.js","components/app-components/routes/Routes.js","components/base-components/Modal/Modal.js","components/app-components/common/StatusModal/StatusModal.js","components/app-components/seanceTickets/ReservationFailureModal/ReservationFailureModal.js","components/app-components/auth/NotAvailableAuthModal/NotAvailableAuthModal.js","components/app-components/ticketsPayment/PaymentSuccessModal/PaymentSuccessModal.js","hooks/useInputState.js","ducks/data/tickets/selectors.js","ducks/data/tickets/action-types.js","ducks/data/tickets/actions.js","components/app-components/ticketsPayment/TicketsPaymentPage/TicketsPaymentPage.js","hooks/useFocusState.js","components/app-components/ticketsPayment/TicketsPaymentModal/TicketsPaymentModal.js","components/app-components/seanceTickets/SeanceTicketsPage/SeanceTicketsPage.js","components/app-components/seanceTickets/SeanceTicketsModal/SeanceTicketsModal.js","components/app-components/ticketsPayment/PaymentFailureModal/PaymentFailureModal.js","ducks/ui/modals/selectors.js","components/base-components/ModalManager/ModalManager.js","components/app-components/app/App.js","ducks/data/movies/reducer.js","ducks/data/tickets/reducer.js","ducks/ui/modals/reducer.js","store/rootReducer.js","mocks/movies.js","ducks/data/movies/services.js","ducks/data/movies/sagas.js","ducks/data/tickets/services.js","ducks/data/tickets/sagas.js","store/rootSaga.js","store/store.js","index.js"],"names":["module","exports","__webpack_require__","p","NavLink","_ref","to","location","children","linkClassName","activeLinkClassName","linkBoxClassName","activeLinkBoxClassName","isActive","Object","objectWithoutProperties","pathname","react_default","a","createElement","data-testid","className","classNames","react_router_dom","defaultProps","withRouter","Button","props","assign","type","MINUTES_IN_HOUR","toTimeLabel","minutes","hours","Math","floor","minutesRest","concat","ROUTE","MOVIES","MOVIE","SOON_MOVIES","BEST_DEALS","MODAL","SEANCE_TICKETS","TICKETS_PAYMENT","PAYMENT_SUCCESS","NOT_AVAILABLE_AUTH","RESERVATION_FAILURE","PAYMENT_FAILURE","STATUS","SUCCESS","ERROR","REQUEST","IDLE","SEANCES_TIME_RANGE","start","end","RUSSIAN_CURRENCY_SYMBOL","showModal","modalType","modalProps","closeModal","mapDispatchToProps","connect","showNotAvailableAuthModal","useCallback","navbar_NavLink_NavLink","base_components_Button_Button","onClick","BestDealsPage","alt","src","sadnessIcon","GalleryViewer","items","selectedItemIdx","selectItem","closeViewer","length","crossIcon","url","description","MAX_PREVIEWS_COUNT","Gallery","hasAtLeastOneItem","Boolean","primaryItem","itemsWithPreviewsCount","min","hasAtLeastOneItemWithPreview","itemsWithPreviews","slice","hiddenItems","hasAtLeastOneHiddenItem","_useState","useState","_useState2","slicedToArray","setSelectedItem","_useState3","_useState4","showItem","setShowItem","handleItemClick","itemIdx","Fragment","map","itemWithPreview","idx","key","Gallery_GalleryViewer_GalleryViewer","Spinner","message","reloadPage","window","reload","ErrorPage","Tooltip","keepSeancesAt","date","timeRange","seances","hasAtLeastOneSeance","seancesFormats","keys","filteredSeances","momentRange","moment","add","forEach","format","filter","seance","unix","startTime","isBetween","hasStarted","now","isSameOrBefore","Seances","movieName","goToSeanceTicketsPage","objectSpread","disabled","base_components_Tooltip_Tooltip","price","NoScheduleComponent","NotFoundComponent","resetSettings","selectMovies","state","movies","selectSelectedMovie","selectedMovie","selectSelectedMovieSeances","selectedMovieSeances","selectMoviesError","error","FETCH_MOVIES","FETCH_MOVIE","FETCH_SEANCES","fetchMoviesSuccess","fetchMoviesError","fetchMovieSuccess","movie","fetchMovieError","fetchSeancesSuccess","fetchSeancesError","SEANCES_STATE","LOADING","SCHEDULE_NOT_EXIST","NOT_FOUND","FOUND","SeancesList","selectedRange","selectedDate","resetFiltersSettings","selectedSeances","useMemo","_","isEmpty","getSeancesState","common_NoScheduleComponent_NoScheduleComponent","common_NotFoundComponent_NotFoundComponent","common_Seances_Seances","fetchSeances","movieId","_ref2","useEffect","SeancesList_SeancesList","common_Spinner_Spinner","ButtonNext","aria-label","lightArrowLeft","darkArrowLeft","ButtonPrev","toMoment","toAppDateFormat","momentDate","getTodayStartMoment","startOf","getTodayDate","getTomorrowDate","getDateAfterTomorrow","getEndDateOfSixthMonthFromCurrent","endOf","bindTimeToDayMoment","time","dayMoment","clone","duration","momentToUnixTime","extendMoment","Moment","Calendar","selectedMonth","_this","initialMonth","handleNextMonthClick","setState","nextMonthMoment","handlePrevMonthClick","prevMonthMoment","subtract","handleDateSelected","_this$props","onDateSelected","onDateLeave","closeOnSelect","closeCalendar","handleClickOutside","_this2","this","_this$props2","minDate","maxDate","onDateEnter","selectedMonthMoment","startMonthDate","endMonthDate","monthDates","startDate","endDate","currentDate","dateRange","push","startEmptyDays","step","arguments","undefined","range","i","Number","minMoment","maxMoment","prevMonthBtnEnabled","isValid","isBefore","nextMonthBtnEnabled","isAfter","base_components_ButtonPrev_ButtonPrev","base_components_ButtonNext_ButtonNext","day","enabledDate","isSameOrAfter","onMouseEnter","onMouseLeave","React","Component","onClickOutside","ToggleIcon","on","downArrowIcon","Toggle","openByDefault","toggle","open","close","DateInput","defaultLabel","getDateLabel","shouldShowSelectedDate","active","buttonLabel","setButtonLabel","_useContext","useContext","DateFilterContext","selectDate","base_components_Toggle_Toggle","base_components_ToggleIcon_ToggleIcon","base_components_Calendar_Calendar","FrequentDateButton","label","isSelected","DateFilter","DateFilter_DateFilterContext","Provider","value","createContext","TODAY_LABEL","TOMORROW_LABEL","DEFAULT_DATE_INPUT_LABEL","DateFilterWrapper","_datesLabels","today","tomorrow","dayAfterTomorrow","DAY_AFTER_TOMORROW_LABEL","shouldShowSelectedDateOnDateInput","datesLabels","defineProperty","base_components_DateFilter_DateFilter","NotFoundPage","Wireframe","max","valuePerStep","formatLabel","labelMarkStep","rangeUnits","makeRange","lastUnit","isFirstStep","unit","islabelMarkStep","first","clamp","SelectedRange","cursorShift","grab","event","target","cursorX","pageX","onChangeStart","selectedRangeLeft","getBoundingClientRect","left","document","addEventListener","move","release","stopPropagation","preventDefault","cursorPageValue","normalizedRange","onChange","normalizeValue","pagePositionToNormalizedValue","normalizedRangeLength","newNormalizedRangeStart","newNormalizedRangeEnd","newNormalizedRange","isEqual","removeEventListener","onChangeEnd","selectedRangeRef","selectedRangeStart","selectedRangeLength","abs","ref","style","width","onPointerDown","Handle","handle","name","handleLeft","cursorPagePosition","oldValue","normalizedValue","newValue","_this$props3","_this$props4","handleRef","transform","MODE","DRAG","RangeSlider","mode","firstHandleName","secondHandleName","handleResize","measureElementsSize","handleChangeStart","switchToDragMode","handleChangeEnd","switchToIdleMode","animateSelectedRangeRounding","finishSelectedRangeRoundingAnimation","classList","remove","firstHandle","secondHandle","handleHandleValueChange","absoluteRangeToNormalized","swapHandlesWhileDrag","handleSelectedRangeChange","absoluteRange","normalizedRangeToAbsolute","roundValue","round","normalizedValueToAbsolute","absoluteValueToNormalized","absoluteValue","position","sliderLeft","sliderWidth","setSliderRef","slider","setSelectedRangeRef","setFirstHandleRef","setSecondHandleRef","nextProps","nextState","stateChanged","propsChanged","_this$slider$getBound","setTimeout","handlesSwappedWhileDrag","getSelectedRange","normalizedSelectedRange","RangeSlider_Handle_Handle","RangeSlider_SelectedRange_SelectedRange","SliderWireframe_SliderWireframe","MoviePage","setSelectedDate","setSelectedRange","base_components_Gallery_Gallery","frames","htmlFor","id","genres","join","movies_page_DateFilter_DateFilter","base_components_RangeSlider_RangeSlider","movie_page_SeancesList_SeancesList","fetchMovie","match","NotFoundPage_NotFoundPage","common_ErrorPage_ErrorPage","parseInt","params","MoviePage_MoviePage","Search","hint","placeholder","onHintChange","resetHint","searchIcon","Movie","poster","history","goToMoviePage","apiURL","replacer","replace","createRoute","MOVIES_STATE","MoviesList","movieHint","selectedMovies","toLowerCase","includes","trim","getMoviesState","movies_page_Movie_Movie","fetchMovies","MoviesList_MoviesList","MOVIE_SEARCH_PLACEHOLDER","MoviesPage","setMovieHint","_useState5","_useState6","movies_page_Search_Search","movies_page_MoviesList_MoviesList","react_router","exact","path","component","MoviePageContainer","Modal","onClose","showCloseIcon","body","isOpen","statusMsg","icon","closeButtonLabel","base_components_Modal_Modal","ReservationFailureModal","common_StatusModal_StatusModal","NotAvailableAuthModal","PaymentSuccessModal","congratIcon","useInputState","initialValue","_ref$shouldMatch","shouldMatch","_ref$required","required","input","setInput","touched","setTouched","handleInputChange","handleBlur","valid","matchPattern","test","selectReservationStatus","tickets","reservationStatus","selectPaymentStatus","paymentStatus","RESERVE_TICKETS","PAY_TICKETS","reserveTicketsSuccess","seanceId","reservedSeatsId","reserveTicketsError","resetReservationStatus","payTicketsSuccess","seatsId","payTicketsError","resetPaymentStatus","payTickets","orderDetails","_useInputState","_useInputState2","number","handleNumberChange","handleNumberBlur","numberValid","numberTouched","_useInputState3","_useInputState4","handleNameChange","handleNameBlur","nameValid","nameTouched","_useInputState5","_useInputState6","expiry","handleExpiryChange","handleExpiryBlur","expiryValid","expiryTouched","_useInputState7","_useInputState8","cvc","handleCvcChange","handleCvcBlur","cvcValid","cvcTouched","allValid","_useFocusState","focused","setFocus","useFocusState","_useFocusState2","handleFocusChange","ticketsCount","declint","handleSubmit","showPaymentSuccessModal","showPaymentFailureModal","console","totalPrice","react_credit_cards_es","placeholders","maxLength","onFocus","onBlur","ticketsPaymentPageProps","handleModalClose","ticketsPayment_TicketsPaymentPage_TicketsPaymentPage","reserveTickets","hallScheme","takenSeats","reservedSeats","selectedSeats","setSelectedSeats","selectSeat","seatId","seatToSelect","unselectSeat","idxToRemoveAt","findIndex","seat","newSelectedSeats","toConsumableArray","splice","seatsAreNotSelected","reduce","buyTickets","goToTicketsPayment","showReservationFailureModal","seanceMoment","seanceDateAppearance","seanceStartTimeAppearance","data","hallScreen","row","seats","isAvailable","find","selectedSeat","uniqueId","seanceTicketsPageProps","seanceTickets_SeanceTicketsPage_SeanceTicketsPage","PaymentFailureModal","selectModalsToShow","modals","modalsToShow","MODAL_COMPONENTS","_MODAL_COMPONENTS","SeanceTicketsModal","TicketsPaymentModal","modal","SpecificModalComponent","App","currentUser","ModalManager_ModalManager","navbar_NavBar","onLogout","onSettings","routes_Routes","initialState","createBrowserHistory","rootReducer","combineReducers","router","connectRouter","action","reservationCancelled","paymentCancelled","daysWithSchedule","getMovies","dayStartMoment","generatedMovies","generateSeancesFor","generateMoviesFor","seanceStartTimes2D","possibleSeanceStartTimes","3D","generateSeancesAt","2D","seanceStartTimes","Infinity","possibleTakenSeats","possibleReservedSeats","NotFoundError","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Error","1","2","3","4","5","6","7","8","9","10","Promise","resolve","getMovie","getSeances","watchMoviesRequests","regenerator_default","wrap","_context","prev","next","services","sent","put","t0","stop","_marked","_context2","_marked2","_ref3","_context3","_marked3","_context4","all","takeLatest","_marked4","reserveTicketsRequest","payTicketsRequest","watchTicketsRequests","reservedSeanceId","sagas_marked","_ref4","_ref5","_ref6","payedSeanceId","payedSeatsId","sagas_marked2","sagas_marked3","rootSaga","rootSaga_marked","navigationMiddleware","routerMiddleware","sagaMiddleware","createSagaMiddleware","store","createStore","composeWithDevTools","applyMiddleware","run","locale","nominative_months","subjective_months","updateLocale","months","momentToFormat","month","weekdaysShort","weekdaysMin","ReactDOM","render","es","esm","app_App","getElementById"],"mappings":"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","file":"static/js/main.1e944a4f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sad-icon.a0e48e08.svg\";","module.exports = __webpack_public_path__ + \"static/media/light-arrow-left.76c47b79.svg\";","module.exports = __webpack_public_path__ + \"static/media/dark-arrow-left.eda10a91.svg\";","module.exports = __webpack_public_path__ + \"static/media/dark-cross-icon.b2320be2.svg\";","module.exports = __webpack_public_path__ + \"static/media/light-cross-icon.e1b38e08.svg\";","module.exports = __webpack_public_path__ + \"static/media/down-arrow.d51c4cbd.svg\";","module.exports = __webpack_public_path__ + \"static/media/search-icon.2e5a42b6.svg\";","module.exports = __webpack_public_path__ + \"static/media/congrat-icon.b052a4be.svg\";","module.exports = __webpack_public_path__ + \"static/media/cropped-screen.a6343b03.svg\";","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { Link, withRouter } from 'react-router-dom';\r\n\r\nimport './NavLink.scss';\r\n\r\nfunction NavLink({\r\n  to,\r\n  location,\r\n  children,\r\n  linkClassName,\r\n  activeLinkClassName,\r\n  linkBoxClassName,\r\n  activeLinkBoxClassName,\r\n  ...props\r\n}) {\r\n  const isActive = to === location.pathname;\r\n  return (\r\n    <li\r\n      data-testid='link-box'\r\n      className={classNames(\r\n        linkBoxClassName,\r\n        isActive && activeLinkBoxClassName,\r\n      )}\r\n    >\r\n      <Link\r\n        to={to}\r\n        data-testid='link'\r\n        className={classNames(linkClassName, isActive && activeLinkClassName)}\r\n      >\r\n        {children}\r\n      </Link>\r\n    </li>\r\n  );\r\n}\r\n\r\nNavLink.propTypes = {\r\n  to: PropTypes.string.isRequired,\r\n  location: PropTypes.object.isRequired,\r\n  children: PropTypes.any.isRequired,\r\n  linkClassName: PropTypes.string,\r\n  linkBoxClassName: PropTypes.string,\r\n  activeLinkClassName: PropTypes.string,\r\n  activeLinkBoxClassName: PropTypes.string,\r\n};\r\n\r\nNavLink.defaultProps = {\r\n  linkClassName: 'link',\r\n  linkBoxClassName: 'linkBox',\r\n  activeLinkClassName: 'activeLink',\r\n  activeLinkBoxClassName: 'activeLinkBox',\r\n};\r\n\r\nexport default withRouter(NavLink);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport './Button.scss';\r\n\r\nfunction Button({ children, className, ...props }) {\r\n  return (\r\n    <button\r\n      type='button'\r\n      className={classNames('button', className)}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  children: PropTypes.any.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nButton.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default Button;\r\n","const MINUTES_IN_HOUR = 60;\r\nconst HOURS_IN_DAY = 24;\r\n\r\nconst toTimeLabel = minutes => {\r\n  const hours = Math.floor(minutes / MINUTES_IN_HOUR) % HOURS_IN_DAY;\r\n  let minutesRest = minutes % MINUTES_IN_HOUR;\r\n  minutesRest = minutesRest < 10 ? `0${minutesRest}` : minutesRest;\r\n  return `${hours}:${minutesRest}`;\r\n};\r\n\r\nexport { toTimeLabel, MINUTES_IN_HOUR, HOURS_IN_DAY };\r\n","import { MINUTES_IN_HOUR } from './utils/time';\r\n\r\nconst ROUTE = {\r\n  MOVIES: '/movies-page',\r\n  MOVIE: '/movie-page/:id',\r\n  SOON_MOVIES: '/soon-movies-page',\r\n  BEST_DEALS: '/best-deals',\r\n};\r\n\r\nconst MODAL = {\r\n  SEANCE_TICKETS: 'SEANCE_TICKETS',\r\n  TICKETS_PAYMENT: 'TICKETS_PAYMENT',\r\n  PAYMENT_SUCCESS: 'PAYMENT_SUCCESS',\r\n  NOT_AVAILABLE_AUTH: 'NOT_AVAILABLE_AUTH',\r\n  RESERVATION_FAILURE: 'RESERVATION_FAILURE',\r\n  PAYMENT_FAILURE: 'PAYMENT_FAILURE',\r\n};\r\n\r\nconst STATUS = {\r\n  SUCCESS: 'SUCCESS',\r\n  ERROR: 'ERROR',\r\n  REQUEST: 'REQUEST',\r\n  IDLE: 'IDLE',\r\n};\r\n\r\nconst APP_DATE_FORMAT = 'YYYY-MM-DD';\r\n\r\nconst SEANCES_TIME_RANGE = {\r\n  start: 10 * MINUTES_IN_HOUR,\r\n  end: 26 * MINUTES_IN_HOUR,\r\n};\r\n\r\nconst RUSSIAN_CURRENCY_SYMBOL = '\\u20BD';\r\n\r\nexport {\r\n  ROUTE,\r\n  APP_DATE_FORMAT,\r\n  SEANCES_TIME_RANGE,\r\n  MODAL,\r\n  STATUS,\r\n  RUSSIAN_CURRENCY_SYMBOL,\r\n};\r\n","import { CLOSE_MODAL, SHOW_MODAL } from './action-types';\r\n\r\nconst showModal = (modalType, modalProps) => ({\r\n  type: SHOW_MODAL,\r\n  modalType,\r\n  modalProps,\r\n});\r\n\r\nconst closeModal = () => ({\r\n  type: CLOSE_MODAL,\r\n});\r\n\r\nexport { showModal, closeModal };\r\n","const SHOW_MODAL = '@@modals/SHOW_MODAL';\r\n\r\nconst CLOSE_MODAL = '@@modals/CLOSE_MODAL';\r\n\r\nexport { SHOW_MODAL, CLOSE_MODAL };\r\n","import React, { useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { NavLink } from './NavLink';\r\nimport { Button } from '../../base-components/Button';\r\nimport { MODAL, ROUTE } from '../../../constants';\r\nimport { showModal } from '../../../ducks/ui/modals/actions';\r\n\r\nimport './NavBar.scss';\r\n\r\nfunction NavBar({ showModal }) {\r\n  const showNotAvailableAuthModal = useCallback(() => {\r\n    showModal(MODAL.NOT_AVAILABLE_AUTH);\r\n  }, []);\r\n\r\n  return (\r\n    <header className='navBarContainer'>\r\n      <ul className='leftPart'>\r\n        <h1 className='brand'>Формула кино</h1>\r\n        <NavLink to={ROUTE.MOVIES}>Уже в кино</NavLink>\r\n        <NavLink to={ROUTE.BEST_DEALS}>Акции</NavLink>\r\n      </ul>\r\n      <div className='rightPart'>\r\n        <Button className='login-btn' onClick={showNotAvailableAuthModal}>\r\n          Войти\r\n        </Button>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nNavBar.propTypes = {\r\n  showModal: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  showModal,\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps,\r\n)(NavBar);\r\n","import React from 'react';\r\n\r\nimport sadnessIcon from '../../../../assets/images/sad-icon.svg';\r\n\r\nimport './BestDealsPage.scss';\r\n\r\nfunction BestDealsPage() {\r\n  return (\r\n    <p className='page-info'>\r\n      К сожалению, в данный момент акции не проходят{' '}\r\n      <img alt='' className='sadness-icon' src={sadnessIcon} />\r\n    </p>\r\n  );\r\n}\r\n\r\nexport default BestDealsPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport crossIcon from '../../../../assets/images/light-cross-icon.svg';\r\n\r\nimport './GalleryViewer.scss';\r\n\r\nfunction GalleryViewer({ items, selectedItemIdx, selectItem, closeViewer }) {\r\n  const handleNextItemClick = () =>\r\n    selectItem((selectedItemIdx + 1) % items.length);\r\n  const handlePreviousItemClick = () =>\r\n    selectItem((items.length + selectedItemIdx - 1) % items.length);\r\n\r\n  return (\r\n    <div className='gallery-popup'>\r\n      <div className='popup-header'>\r\n        <p className='item-number-info'>\r\n          {`${selectedItemIdx + 1} из ${items.length}`}\r\n        </p>\r\n        <img\r\n          alt='close'\r\n          className='close-icon smoothly-enhance-on-hover'\r\n          src={crossIcon}\r\n          onClick={closeViewer}\r\n        />\r\n      </div>\r\n      <div className='popup-content'>\r\n        <img\r\n          alt='item'\r\n          className='item-content'\r\n          src={items[selectedItemIdx].url}\r\n        />\r\n        <div\r\n          className='btn-prev smoothly-enhance-on-hover'\r\n          onClick={handlePreviousItemClick}\r\n        />\r\n        <div\r\n          className='btn-next smoothly-enhance-on-hover'\r\n          onClick={handleNextItemClick}\r\n        />\r\n      </div>\r\n      <div className='popup-footer'>\r\n        <p className='item-description'>{items[selectedItemIdx].description}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nGalleryViewer.propTypes = {\r\n  items: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      description: PropTypes.string.isRequired,\r\n      url: PropTypes.string.isRequired,\r\n    }).isRequired,\r\n  ).isRequired,\r\n  selectedItemIdx: PropTypes.number.isRequired,\r\n  selectItem: PropTypes.func.isRequired,\r\n  closeViewer: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default GalleryViewer;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { GalleryViewer } from './GalleryViewer';\r\n\r\nimport './Gallery.scss';\r\n\r\nconst MAX_PREVIEWS_COUNT = 4;\r\n\r\nfunction Gallery({ items, className }) {\r\n  const hasAtLeastOneItem = Boolean(items.length);\r\n  const primaryItem = items[0];\r\n\r\n  const itemsWithPreviewsCount = Math.min(items.length - 1, MAX_PREVIEWS_COUNT);\r\n  const hasAtLeastOneItemWithPreview = Boolean(itemsWithPreviewsCount);\r\n  const itemsWithPreviews = items.slice(1, itemsWithPreviewsCount + 1);\r\n\r\n  const hiddenItems = items.slice(itemsWithPreviewsCount + 1);\r\n  const hasAtLeastOneHiddenItem = Boolean(hiddenItems.length);\r\n\r\n  const [selectedItemIdx, setSelectedItem] = useState(0);\r\n  const [showItem, setShowItem] = useState(false);\r\n\r\n  const handleItemClick = itemIdx => {\r\n    setSelectedItem(itemIdx);\r\n    setShowItem(true);\r\n  };\r\n\r\n  const closeViewer = () => {\r\n    setShowItem(false);\r\n  };\r\n\r\n  return (\r\n    hasAtLeastOneItem && (\r\n      <div className={classNames('gallery', className)}>\r\n        <div className='primary-item-container'>\r\n          <img\r\n            alt='primary item'\r\n            className='primary-item'\r\n            src={primaryItem.url}\r\n            onClick={() => handleItemClick(0)}\r\n          />\r\n        </div>\r\n        {hasAtLeastOneItemWithPreview && (\r\n          <div className='items-previews-container'>\r\n            <>\r\n              {itemsWithPreviews.map((itemWithPreview, idx) => (\r\n                <div\r\n                  key={itemWithPreview.url}\r\n                  className='item-preview-container'\r\n                  onClick={() => handleItemClick(idx + 1)}\r\n                >\r\n                  <img\r\n                    alt='item preview'\r\n                    className='item-preview'\r\n                    src={itemWithPreview.url}\r\n                  />\r\n                </div>\r\n              ))}\r\n              {hasAtLeastOneHiddenItem && (\r\n                <div\r\n                  className='hidden-items-count'\r\n                  onClick={() => handleItemClick(itemsWithPreviewsCount + 1)}\r\n                >\r\n                  {`+${hiddenItems.length}`}\r\n                </div>\r\n              )}\r\n            </>\r\n          </div>\r\n        )}\r\n        {showItem && (\r\n          <GalleryViewer\r\n            items={items}\r\n            selectedItemIdx={selectedItemIdx}\r\n            selectItem={setSelectedItem}\r\n            closeViewer={closeViewer}\r\n          />\r\n        )}\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nGallery.propTypes = {\r\n  items: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      description: PropTypes.string.isRequired,\r\n      url: PropTypes.string.isRequired,\r\n    }).isRequired,\r\n  ).isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nGallery.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default Gallery;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport './Spinner.scss';\r\n\r\nfunction Spinner({ message, className }) {\r\n  return (\r\n    <div className={classNames('spinner-container', className)}>\r\n      <div className='spinner' />\r\n      <p className='loading-msg'>{message}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nSpinner.propTypes = {\r\n  message: PropTypes.string,\r\n  className: PropTypes.string,\r\n};\r\n\r\nSpinner.defaultProps = {\r\n  message: 'Идет загрузка',\r\n  className: '',\r\n};\r\n\r\nexport default Spinner;\r\n","import React from 'react';\r\n\r\nimport './ErrorPage.scss';\r\n\r\nconst reloadPage = () => window.location.reload();\r\n\r\nfunction ErrorPage() {\r\n  return (\r\n    <p className='error-page-info'>\r\n      Произошла ошибка\r\n      <br />\r\n      <span className='error-page-request'>\r\n        Попробуйте&nbsp;\r\n        <button className='reload-link' onClick={reloadPage}>\r\n          перезагрузить страницу\r\n        </button>\r\n      </span>\r\n    </p>\r\n  );\r\n}\r\n\r\nexport default ErrorPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport './Tooltip.scss';\r\n\r\nfunction Tooltip({ children, className }) {\r\n  return <span className={classNames('tooltip', className)}>{children}</span>;\r\n}\r\n\r\nTooltip.propTypes = {\r\n  children: PropTypes.any.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nTooltip.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default Tooltip;\r\n","import moment from 'moment/moment';\r\n\r\nfunction keepSeancesAt(date, timeRange, seances) {\r\n  let hasAtLeastOneSeance = false;\r\n  const seancesFormats = Object.keys(seances);\r\n  const filteredSeances = {};\r\n  const momentRange = {\r\n    start: moment(date).add(timeRange.start, 'm'),\r\n    end: moment(date).add(timeRange.end, 'm'),\r\n  };\r\n\r\n  seancesFormats.forEach(format => {\r\n    filteredSeances[format] = seances[format].filter(seance => {\r\n      const seanceStartMoment = moment.unix(seance.startTime);\r\n      return seanceStartMoment.isBetween(momentRange.start, momentRange.end, 'm', '[]');\r\n    });\r\n\r\n    hasAtLeastOneSeance = hasAtLeastOneSeance || filteredSeances[format].length;\r\n  });\r\n\r\n  return hasAtLeastOneSeance ? filteredSeances : null;\r\n}\r\n\r\nfunction hasStarted(seance) {\r\n  const now = moment();\r\n  return moment.unix(seance.startTime).isSameOrBefore(now);\r\n}\r\n\r\nexport { keepSeancesAt, hasStarted };\r\n","import React, { useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment/moment';\r\nimport classNames from 'classnames';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Tooltip } from '../../../../base-components/Tooltip';\r\nimport { MODAL, RUSSIAN_CURRENCY_SYMBOL } from '../../../../../constants';\r\nimport { showModal } from '../../../../../ducks/ui/modals/actions';\r\nimport { hasStarted } from '../../utils/movies';\r\n\r\nimport './Seances.scss';\r\n\r\nfunction Seances({ movieName, seances, className, showModal }) {\r\n  const goToSeanceTicketsPage = useCallback((movieName, seance) => {\r\n    const modalProps = { movieName, ...seance };\r\n    showModal(MODAL.SEANCE_TICKETS, modalProps);\r\n  }, []);\r\n\r\n  return (\r\n    <div className={classNames('seances', className)}>\r\n      {Object.keys(seances).map(\r\n        format =>\r\n          seances[format].length && (\r\n            <div key={format} className='format-seances-container'>\r\n              <p className='format'>{format}</p>\r\n              <ul className='format-seances'>\r\n                {seances[format].map(seance => {\r\n                  return (\r\n                    <li key={seance.startTime}>\r\n                      <button\r\n                        className={classNames(\r\n                          'seance',\r\n                          hasStarted(seance) && 'has-started',\r\n                        )}\r\n                        onClick={() => goToSeanceTicketsPage(movieName, seance)}\r\n                        disabled={hasStarted(seance)}\r\n                      >\r\n                        {moment.unix(seance.startTime).format('HH:mm')}\r\n                        <Tooltip className='price-tooltip'>\r\n                          {`от ${seance.price} ${RUSSIAN_CURRENCY_SYMBOL}`}\r\n                        </Tooltip>\r\n                      </button>\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            </div>\r\n          ),\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nSeances.propTypes = {\r\n  movieName: PropTypes.string.isRequired,\r\n  seances: PropTypes.objectOf(\r\n    PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        id: PropTypes.string.isRequired,\r\n        startTime: PropTypes.number.isRequired,\r\n        price: PropTypes.number.isRequired,\r\n      }),\r\n    ),\r\n  ),\r\n  showModal: PropTypes.func.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nSeances.defaultProps = {\r\n  seances: null,\r\n  className: '',\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  showModal,\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps,\r\n)(Seances);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport './NoScheduleComponent.scss';\r\n\r\nfunction NoScheduleComponent({ className }) {\r\n  return (\r\n    <div className={classNames('no-schedule-container', className)}>\r\n      <p className='no-schedule-msg'>Расписание на выбранную дату не найдено</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nNoScheduleComponent.propTypes = {\r\n  className: PropTypes.string,\r\n};\r\n\r\nNoScheduleComponent.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default NoScheduleComponent;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport './NotFoundComponent.scss';\r\n\r\nfunction NotFoundComponent({ resetSettings, className }) {\r\n  return (\r\n    <div className={classNames('info-box', className)}>\r\n      <div className='info no-found'>\r\n        По вашему запросу ничего нет\r\n        <br />\r\n        <span className='reset-request'>\r\n          Пожалуйста,&nbsp;\r\n          <button className='reset-settings-link' onClick={resetSettings}>\r\n            сбросьте настройки\r\n          </button>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nNotFoundComponent.propTypes = {\r\n  resetSettings: PropTypes.func.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nNotFoundComponent.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default NotFoundComponent;\r\n","const selectMovies = state => state.movies.movies;\r\n\r\nconst selectSelectedMovie = state => state.movies.selectedMovie;\r\n\r\nconst selectSelectedMovieSeances = state => state.movies.selectedMovieSeances;\r\n\r\nconst selectMoviesError = state => state.movies.error;\r\n\r\nexport {\r\n  selectMovies,\r\n  selectSelectedMovie,\r\n  selectMoviesError,\r\n  selectSelectedMovieSeances,\r\n};\r\n","const FETCH_MOVIES = {\r\n  REQUEST: '@@movies-page/FETCH_MOVIES_REQUEST',\r\n  SUCCESS: '@@movies-page/FETCH_MOVIES_SUCCESS',\r\n  ERROR: '@@movies-page/FETCH_MOVIES_ERROR',\r\n};\r\n\r\nconst FETCH_MOVIE = {\r\n  REQUEST: '@@movies-page/FETCH_MOVIE_REQUEST',\r\n  SUCCESS: '@@movies-page/FETCH_MOVIE_SUCCESS',\r\n  ERROR: '@@movies-page/FETCH_MOVIE_ERROR',\r\n};\r\n\r\nconst FETCH_SEANCES = {\r\n  REQUEST: '@@movies-page/FETCH_SEANCES_REQUEST',\r\n  SUCCESS: '@@movies-page/FETCH_SEANCES_SUCCESS',\r\n  ERROR: '@@movies-page/FETCH_SEANCES_ERROR',\r\n};\r\n\r\nexport { FETCH_MOVIES, FETCH_MOVIE, FETCH_SEANCES };","import { FETCH_MOVIE, FETCH_MOVIES, FETCH_SEANCES } from './action-types';\r\n\r\nconst fetchMoviesRequest = date => ({\r\n  type: FETCH_MOVIES.REQUEST,\r\n  date,\r\n});\r\n\r\nconst fetchMoviesSuccess = movies => ({\r\n  type: FETCH_MOVIES.SUCCESS,\r\n  movies,\r\n});\r\n\r\nconst fetchMoviesError = error => ({\r\n  type: FETCH_MOVIES.ERROR,\r\n  error,\r\n});\r\n\r\nconst fetchMovieRequest = id => ({\r\n  type: FETCH_MOVIE.REQUEST,\r\n  id,\r\n});\r\n\r\nconst fetchMovieSuccess = movie => ({\r\n  type: FETCH_MOVIE.SUCCESS,\r\n  movie,\r\n});\r\n\r\nconst fetchMovieError = error => ({\r\n  type: FETCH_MOVIE.ERROR,\r\n  error,\r\n});\r\n\r\nconst fetchSeancesRequest = (movieId, date) => ({\r\n  type: FETCH_SEANCES.REQUEST,\r\n  movieId,\r\n  date,\r\n});\r\n\r\nconst fetchSeancesSuccess = seances => ({\r\n  type: FETCH_SEANCES.SUCCESS,\r\n  seances,\r\n});\r\n\r\nconst fetchSeancesError = error => ({\r\n  type: FETCH_SEANCES.ERROR,\r\n  error,\r\n});\r\n\r\nexport {\r\n  fetchMoviesRequest,\r\n  fetchMoviesSuccess,\r\n  fetchMoviesError,\r\n  fetchMovieRequest,\r\n  fetchMovieSuccess,\r\n  fetchMovieError,\r\n  fetchSeancesRequest,\r\n  fetchSeancesSuccess,\r\n  fetchSeancesError,\r\n};\r\n","import React, { useEffect, useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport _ from 'lodash';\r\n\r\nimport { Seances } from '../../common/Seances';\r\nimport { keepSeancesAt } from '../../utils/movies';\r\nimport { Spinner } from '../../../common/Spinner';\r\nimport { NoScheduleComponent } from '../../../common/NoScheduleComponent';\r\nimport { NotFoundComponent } from '../../../common/NotFoundComponent';\r\n\r\nimport { selectSelectedMovieSeances } from '../../../../../ducks/data/movies/selectors';\r\nimport { fetchSeancesRequest } from '../../../../../ducks/data/movies/actions';\r\n\r\nimport './SeancesList.scss';\r\n\r\nconst SEANCES_STATE = {\r\n  LOADING: 0,\r\n  SCHEDULE_NOT_EXIST: 1,\r\n  NOT_FOUND: 2,\r\n  FOUND: 3,\r\n};\r\n\r\nfunction getSeancesState(seances, selectedSeances) {\r\n  if (_.isEmpty(seances)) {\r\n    return SEANCES_STATE.SCHEDULE_NOT_EXIST;\r\n  }\r\n  if (!selectedSeances) {\r\n    return SEANCES_STATE.NOT_FOUND;\r\n  }\r\n  return SEANCES_STATE.FOUND;\r\n}\r\n\r\nfunction SeancesList({\r\n  movieName,\r\n  seances,\r\n  selectedRange,\r\n  selectedDate,\r\n  resetFiltersSettings,\r\n}) {\r\n  const selectedSeances = useMemo(\r\n    () =>\r\n      seances ? keepSeancesAt(selectedDate, selectedRange, seances) : null,\r\n    [seances, selectedRange],\r\n  );\r\n\r\n  const seancesState = getSeancesState(seances, selectedSeances);\r\n  switch (seancesState) {\r\n    case SEANCES_STATE.LOADING:\r\n      return;\r\n    case SEANCES_STATE.SCHEDULE_NOT_EXIST:\r\n      return <NoScheduleComponent className='info-box' />;\r\n    case SEANCES_STATE.NOT_FOUND:\r\n      return (\r\n        <NotFoundComponent\r\n          className='info-box'\r\n          resetSettings={resetFiltersSettings}\r\n        />\r\n      );\r\n    case SEANCES_STATE.FOUND:\r\n      return (\r\n        <div className='seances-list'>\r\n          <Seances movieName={movieName} seances={selectedSeances} className='seances' />\r\n        </div>\r\n      );\r\n  }\r\n}\r\n\r\nSeancesList.propTypes = {\r\n  seances: PropTypes.objectOf(\r\n    PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        id: PropTypes.string.isRequired,\r\n        startTime: PropTypes.number.isRequired,\r\n        price: PropTypes.number.isRequired,\r\n      }),\r\n    ),\r\n  ).isRequired,\r\n  selectedRange: PropTypes.shape({\r\n    start: PropTypes.number.isRequired,\r\n    end: PropTypes.number.isRequired,\r\n  }).isRequired,\r\n  selectedDate: PropTypes.string.isRequired,\r\n  resetFiltersSettings: PropTypes.func.isRequired,\r\n};\r\n\r\nfunction SeancesListContainer({\r\n  movieId,\r\n  seances,\r\n  selectedDate,\r\n  fetchSeances,\r\n  ...props\r\n}) {\r\n  useEffect(() => {\r\n    fetchSeances(movieId, selectedDate);\r\n  }, [selectedDate]);\r\n\r\n  return seances ? (\r\n    <SeancesList seances={seances} selectedDate={selectedDate} {...props} />\r\n  ) : (\r\n    <Spinner className='info-box' />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  seances: selectSelectedMovieSeances(state),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  fetchSeances: fetchSeancesRequest,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(SeancesListContainer);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport lightArrowLeft from '../../../assets/images/light-arrow-left.svg';\r\nimport darkArrowLeft from '../../../assets/images/dark-arrow-left.svg';\r\n\r\nimport './ButtonNext.scss';\r\n\r\nfunction ButtonNext({ onClick, type, className, ...props }) {\r\n  return (\r\n    <button\r\n      aria-label='button next'\r\n      onClick={onClick}\r\n      className={classNames('btn', className)}\r\n      {...props}\r\n    >\r\n      <img\r\n        alt='button next'\r\n        className='btn-icon arrow-next enhance-on-hover'\r\n        src={type === 'light' ? lightArrowLeft : darkArrowLeft}\r\n      />\r\n    </button>\r\n  );\r\n}\r\n\r\nButtonNext.propTypes = {\r\n  onClick: PropTypes.func,\r\n  type: PropTypes.string,\r\n  className: PropTypes.string,\r\n};\r\n\r\nButtonNext.defaultProps = {\r\n  onClick: () => {},\r\n  type: 'dark',\r\n  className: '',\r\n};\r\n\r\nexport default ButtonNext;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport lightArrowLeft from '../../../assets/images/light-arrow-left.svg';\r\nimport darkArrowLeft from '../../../assets/images/dark-arrow-left.svg';\r\n\r\nimport './ButtonPrev.scss';\r\n\r\nfunction ButtonPrev({ onClick, type, className, ...props }) {\r\n  return (\r\n    <button\r\n      aria-label='button previous'\r\n      onClick={onClick}\r\n      className={classNames('btn', className)}\r\n      {...props}\r\n    >\r\n      <img\r\n        alt='button previous'\r\n        className='btn-icon enhance-on-hover'\r\n        src={type === 'light' ? lightArrowLeft : darkArrowLeft}\r\n      />\r\n    </button>\r\n  );\r\n}\r\n\r\nButtonPrev.propTypes = {\r\n  onClick: PropTypes.func,\r\n  type: PropTypes.string,\r\n  className: PropTypes.string,\r\n};\r\n\r\nButtonPrev.defaultProps = {\r\n  onClick: () => {},\r\n  type: 'dark',\r\n  className: '',\r\n};\r\n\r\nexport default ButtonPrev;\r\n","import moment from 'moment';\r\n\r\nimport { APP_DATE_FORMAT } from '../constants';\r\n\r\nconst toMoment = date => moment(date, APP_DATE_FORMAT, true);\r\n\r\nconst toAppDateFormat = momentDate => momentDate.format(APP_DATE_FORMAT);\r\n\r\nconst getTodayStartMoment = () => moment().startOf('day');\r\n\r\nconst getTodayDate = () => toAppDateFormat(getTodayStartMoment());\r\n\r\nconst getTomorrowDate = () =>\r\n  toAppDateFormat(getTodayStartMoment().add(1, 'days'));\r\n\r\nconst getDateAfterTomorrow = () =>\r\n  toAppDateFormat(getTodayStartMoment().add(2, 'days'));\r\n\r\nconst getEndDateOfSixthMonthFromCurrent = () =>\r\n  toAppDateFormat(\r\n    moment()\r\n      .add(6, 'months')\r\n      .endOf('month'),\r\n  );\r\n\r\nconst dateRange = (startDate, endDate) => {\r\n  const currentDate = startDate.clone();\r\n  const dateRange = [];\r\n  while (currentDate.isSameOrBefore(endDate)) {\r\n    dateRange.push(currentDate.clone());\r\n    currentDate.add(1, 'days');\r\n  }\r\n  return dateRange;\r\n};\r\n\r\nconst bindTimeToDayMoment = (time, dayMoment) => {\r\n  return dayMoment.clone().add(moment.duration(time));\r\n};\r\n\r\nconst momentToUnixTime = momentDate => momentDate.unix();\r\n\r\nexport {\r\n  toAppDateFormat,\r\n  toMoment,\r\n  getTodayStartMoment,\r\n  getTodayDate,\r\n  getTomorrowDate,\r\n  getDateAfterTomorrow,\r\n  getEndDateOfSixthMonthFromCurrent,\r\n  dateRange,\r\n  bindTimeToDayMoment,\r\n  momentToUnixTime,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport onClickOutside from 'react-onclickoutside';\r\nimport { extendMoment } from 'moment-range/dist/moment-range';\r\nimport Moment from 'moment/moment';\r\n\r\nimport { ButtonNext } from '../ButtonNext';\r\nimport { ButtonPrev } from '../ButtonPrev';\r\nimport { range } from '../../../utils/array';\r\nimport { dateRange, toAppDateFormat, toMoment } from '../../../utils/date';\r\n\r\nimport './Calendar.scss';\r\n\r\nconst moment = extendMoment(Moment);\r\n\r\nclass Calendar extends React.Component {\r\n  static propTypes = {\r\n    initialMonth: PropTypes.string,\r\n    onDateSelected: PropTypes.func.isRequired,\r\n    closeCalendar: PropTypes.func,\r\n    onDateEnter: PropTypes.func,\r\n    onDateLeave: PropTypes.func,\r\n    minDate: PropTypes.string,\r\n    maxDate: PropTypes.string,\r\n    closeOnSelect: PropTypes.bool,\r\n  };\r\n\r\n  static defaultProps = {\r\n    initialMonth: toAppDateFormat(moment()),\r\n    onDateEnter: () => {},\r\n    onDateLeave: () => {},\r\n    closeCalendar: () => {},\r\n    closeOnSelect: false,\r\n    minDate: null,\r\n    maxDate: null,\r\n  };\r\n\r\n  state = {\r\n    selectedMonth: this.props.initialMonth,\r\n  };\r\n\r\n  handleNextMonthClick = () => {\r\n    this.setState(({ selectedMonth }) => {\r\n      const monthMoment = toMoment(selectedMonth);\r\n      const nextMonthMoment = monthMoment.add(1, 'months');\r\n      const nextMonth = toAppDateFormat(nextMonthMoment);\r\n      return { selectedMonth: nextMonth };\r\n    });\r\n  };\r\n\r\n  handlePrevMonthClick = () => {\r\n    this.setState(({ selectedMonth }) => {\r\n      const monthMoment = toMoment(selectedMonth);\r\n      const prevMonthMoment = monthMoment.subtract(1, 'months');\r\n      const prevMonth = toAppDateFormat(prevMonthMoment);\r\n      return { selectedMonth: prevMonth };\r\n    });\r\n  };\r\n\r\n  handleDateSelected = date => {\r\n    const {\r\n      onDateSelected,\r\n      onDateLeave,\r\n      closeOnSelect,\r\n      closeCalendar,\r\n    } = this.props;\r\n\r\n    onDateSelected(date);\r\n    if (closeOnSelect) {\r\n      onDateLeave(date);\r\n      closeCalendar();\r\n    }\r\n  };\r\n\r\n  handleClickOutside = () => {\r\n    const { closeCalendar } = this.props;\r\n    closeCalendar();\r\n  };\r\n\r\n  render() {\r\n    const { minDate, maxDate, onDateEnter, onDateLeave } = this.props;\r\n\r\n    const { selectedMonth } = this.state;\r\n    const selectedMonthMoment = toMoment(selectedMonth);\r\n\r\n    const startMonthDate = selectedMonthMoment.startOf('month').clone();\r\n    const endMonthDate = selectedMonthMoment.endOf('month').clone();\r\n    const monthDates = dateRange(startMonthDate, endMonthDate);\r\n\r\n    const startWeekdayNumber = Number(startMonthDate.format('E'));\r\n    const startEmptyDays = range(1, startWeekdayNumber);\r\n\r\n    const minMoment = toMoment(minDate);\r\n    const maxMoment = toMoment(maxDate);\r\n    const prevMonthBtnEnabled =\r\n      !minMoment.isValid() || minMoment.isBefore(startMonthDate);\r\n    const nextMonthBtnEnabled =\r\n      !minMoment.isValid() || maxMoment.isAfter(endMonthDate);\r\n\r\n    return (\r\n      <div className='calendar'>\r\n        <div className='selectMonthArea'>\r\n          <p className='month'>{selectedMonthMoment.format('MMMM')}</p>\r\n          <div className='btnContainer'>\r\n            <ButtonPrev\r\n              onClick={this.handlePrevMonthClick}\r\n              className={classNames(\r\n                'btn btn-prev',\r\n                !prevMonthBtnEnabled && 'disabled',\r\n              )}\r\n              disabled={!prevMonthBtnEnabled}\r\n            />\r\n            <ButtonNext\r\n              onClick={this.handleNextMonthClick}\r\n              className={classNames('btn', !nextMonthBtnEnabled && 'disabled')}\r\n              disabled={!nextMonthBtnEnabled}\r\n            />\r\n          </div>\r\n        </div>\r\n        <ul className='weekdays'>\r\n          <li key={0} className='weekday'>\r\n            пн\r\n          </li>\r\n          <li key={1} className='weekday'>\r\n            вт\r\n          </li>\r\n          <li key={2} className='weekday'>\r\n            ср\r\n          </li>\r\n          <li key={3} className='weekday'>\r\n            чт\r\n          </li>\r\n          <li key={4} className='weekday'>\r\n            пт\r\n          </li>\r\n          <li key={5} className='weekday weekend'>\r\n            сб\r\n          </li>\r\n          <li key={6} className='weekday weekend'>\r\n            вс\r\n          </li>\r\n        </ul>\r\n        <ul className='days'>\r\n          {startEmptyDays.map(day => (\r\n            <li key={day} className='day' />\r\n          ))}\r\n          {monthDates.map(date => {\r\n            const enabledDate =\r\n              !minMoment.isValid() ||\r\n              (date.isSameOrAfter(minMoment) && date.isSameOrBefore(maxDate));\r\n            return (\r\n              <li\r\n                key={date.format('DD')}\r\n                onClick={() =>\r\n                  enabledDate\r\n                    ? this.handleDateSelected(toAppDateFormat(date))\r\n                    : false\r\n                }\r\n                className={enabledDate ? 'enabled-day' : 'disabled-day'}\r\n                onMouseEnter={() =>\r\n                  enabledDate ? onDateEnter(toAppDateFormat(date)) : false\r\n                }\r\n                onMouseLeave={() =>\r\n                  enabledDate ? onDateLeave(toAppDateFormat(date)) : false\r\n                }\r\n              >\r\n                {date.format('DD')}\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default onClickOutside(Calendar);\r\n","function range(start, end, step = 1) {\r\n  const range = [];\r\n  for (let i = start; i < end; i += step) {\r\n    range.push(i);\r\n  }\r\n  return range;\r\n}\r\n\r\nexport { range };\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport downArrowIcon from '../../../assets/images/down-arrow.svg';\r\n\r\nimport './ToggleIcon.scss';\r\n\r\nfunction ToggleIcon({ on, className, ...props }) {\r\n  return (\r\n    <img\r\n      alt='toggle icon'\r\n      className={classNames('toggleIcon', on ? 'on' : 'off', className)}\r\n      src={downArrowIcon}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nToggleIcon.propTypes = {\r\n  on: PropTypes.bool.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nToggleIcon.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default ToggleIcon;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Toggle extends React.Component {\r\n  static propTypes = {\r\n    children: PropTypes.func.isRequired,\r\n    openByDefault: PropTypes.bool,\r\n  };\r\n\r\n  static defaultProps = {\r\n    openByDefault: false,\r\n  };\r\n\r\n  state = {\r\n    on: this.props.openByDefault,\r\n  };\r\n\r\n  toggle = () => {\r\n    this.setState(state => ({ on: !state.on }));\r\n  };\r\n\r\n  open = () => {\r\n    this.setState({ on: true });\r\n  };\r\n\r\n  close = () => {\r\n    this.setState({ on: false });\r\n  };\r\n\r\n  render() {\r\n    const { children } = this.props;\r\n    const { on } = this.state;\r\n\r\n    return children(on, this.toggle, this.open, this.close);\r\n  }\r\n}\r\n\r\nexport default Toggle;\r\n","import React, { useContext, useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { Button } from '../../Button';\r\nimport { Calendar } from '../../Calendar';\r\nimport { ToggleIcon } from '../../ToggleIcon';\r\nimport { Toggle } from '../../Toggle';\r\nimport { DateFilterContext } from '..';\r\n\r\nimport './DateInput.scss';\r\n\r\nfunction DateInput({\r\n  minDate,\r\n  maxDate,\r\n  defaultLabel,\r\n  getDateLabel,\r\n  shouldShowSelectedDate,\r\n  active,\r\n}) {\r\n  const [buttonLabel, setButtonLabel] = useState(defaultLabel);\r\n  const { selectDate, selectedDate } = useContext(DateFilterContext);\r\n\r\n  useEffect(() => {\r\n    shouldShowSelectedDate\r\n      ? setButtonLabel(getDateLabel(selectedDate))\r\n      : setButtonLabel(defaultLabel);\r\n  }, [shouldShowSelectedDate, selectedDate]);\r\n\r\n  return (\r\n    <Toggle>\r\n      {(on, toggle) => (\r\n        <div className='date-input-container'>\r\n          <Button\r\n            className={classNames(\r\n              'calendar-btn ignore-react-onclickoutside',\r\n              active && 'active',\r\n            )}\r\n            onClick={toggle}\r\n          >\r\n            {buttonLabel}\r\n            <ToggleIcon on={on} className='calendar-btn-icon' />\r\n          </Button>\r\n          {on && (\r\n            <Calendar\r\n              initialMonth={selectedDate}\r\n              minDate={minDate}\r\n              maxDate={maxDate}\r\n              onDateSelected={date => selectDate(date)}\r\n              onDateEnter={date => setButtonLabel(getDateLabel(date))}\r\n              onDateLeave={() => setButtonLabel(defaultLabel)}\r\n              closeCalendar={toggle}\r\n              closeOnSelect\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n    </Toggle>\r\n  );\r\n}\r\n\r\nDateInput.propTypes = {\r\n  defaultLabel: PropTypes.string,\r\n  getDateLabel: PropTypes.func,\r\n  minDate: PropTypes.string,\r\n  maxDate: PropTypes.string,\r\n  shouldShowSelectedDate: PropTypes.bool,\r\n  active: PropTypes.bool,\r\n};\r\n\r\nDateInput.defaultProps = {\r\n  defaultLabel: 'Выбрать дату',\r\n  getDateLabel: date => date.format('DD MMMM'),\r\n  minDate: null,\r\n  maxDate: null,\r\n  shouldShowSelectedDate: false,\r\n  active: false,\r\n};\r\n\r\nexport default DateInput;\r\n","import React, { useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { DateFilterContext } from '..';\r\n\r\nimport './FrequentDateButton.scss';\r\n\r\nfunction FrequentDateButton({ date, label }) {\r\n  const { selectedDate, selectDate } = useContext(DateFilterContext);\r\n  const isSelected = date === selectedDate;\r\n  return (\r\n    <button\r\n      onClick={() => (!isSelected ? selectDate(date) : false)}\r\n      className={classNames('frequent-date-btn', isSelected && 'selected')}\r\n    >\r\n      {label}\r\n    </button>\r\n  );\r\n}\r\n\r\nFrequentDateButton.propTypes = {\r\n  date: PropTypes.string.isRequired,\r\n  label: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default FrequentDateButton;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { DateInput } from './DateInput';\r\nimport { DateFilterContext } from './index';\r\nimport { FrequentDateButton } from './FrequentDateButton';\r\n\r\nclass DateFilter extends React.Component {\r\n  static DateInput = DateInput;\r\n\r\n  static FrequentDateButton = FrequentDateButton;\r\n\r\n  render() {\r\n    const { selectedDate, selectDate, children, className } = this.props;\r\n    return (\r\n      <div className={className}>\r\n        <DateFilterContext.Provider value={{ selectedDate, selectDate }}>\r\n          <>{children}</>\r\n        </DateFilterContext.Provider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nDateFilter.propTypes = {\r\n  selectedDate: PropTypes.string,\r\n  selectDate: PropTypes.func.isRequired,\r\n  children: PropTypes.any.isRequired,\r\n  className: PropTypes.string.isRequired,\r\n};\r\n\r\nDateFilter.defaultProps = {\r\n  selectedDate: null,\r\n};\r\n\r\nexport default DateFilter;\r\n","import React from 'react';\r\n\r\nconst DateFilterContext = React.createContext({\r\n  selectedDate: null,\r\n  selectDate: () => {},\r\n});\r\n\r\nexport default DateFilterContext;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { DateFilter } from '../../../../base-components/DateFilter';\r\n\r\nimport {\r\n  getDateAfterTomorrow,\r\n  getEndDateOfSixthMonthFromCurrent,\r\n  getTodayDate,\r\n  getTomorrowDate,\r\n  toMoment,\r\n} from '../../../../../utils/date';\r\n\r\nconst TODAY_LABEL = 'Сегодня';\r\nconst TOMORROW_LABEL = 'Завтра';\r\nconst DEFAULT_DATE_INPUT_LABEL = 'Выбрать день';\r\n\r\nfunction DateFilterWrapper({ selectedDate, selectDate, className }) {\r\n  const today = getTodayDate();\r\n  const tomorrow = getTomorrowDate();\r\n  const dayAfterTomorrow = getDateAfterTomorrow();\r\n  const DAY_AFTER_TOMORROW_LABEL = toMoment(dayAfterTomorrow).format('dd, DD MMMM');\r\n\r\n  const shouldShowSelectedDateOnDateInput =\r\n    selectedDate &&\r\n    selectedDate !== today &&\r\n    selectedDate !== tomorrow &&\r\n    selectedDate !== dayAfterTomorrow;\r\n\r\n  const datesLabels = {\r\n    [today]: TODAY_LABEL,\r\n    [tomorrow]: TOMORROW_LABEL,\r\n  };\r\n\r\n  function getDateLabel(date) {\r\n    if (date in datesLabels) return datesLabels[date];\r\n    return toMoment(date).format('dd, DD MMMM');\r\n  }\r\n\r\n  const minDate = today;\r\n  const maxDate = getEndDateOfSixthMonthFromCurrent();\r\n\r\n  return (\r\n    <DateFilter\r\n      selectedDate={selectedDate}\r\n      selectDate={selectDate}\r\n      className={classNames('date-filter horizontal', className)}\r\n    >\r\n      <DateFilter.FrequentDateButton date={today} label={TODAY_LABEL} />\r\n      <DateFilter.FrequentDateButton date={tomorrow} label={TOMORROW_LABEL} />\r\n      <DateFilter.FrequentDateButton date={dayAfterTomorrow} label={DAY_AFTER_TOMORROW_LABEL} />\r\n      <DateFilter.DateInput\r\n        defaultLabel={DEFAULT_DATE_INPUT_LABEL}\r\n        getDateLabel={getDateLabel}\r\n        shouldShowSelectedDate={shouldShowSelectedDateOnDateInput}\r\n        active={shouldShowSelectedDateOnDateInput}\r\n        minDate={minDate}\r\n        maxDate={maxDate}\r\n      />\r\n    </DateFilter>\r\n  );\r\n}\r\nDateFilterWrapper.propTypes = {\r\n  selectedDate: PropTypes.string.isRequired,\r\n  selectDate: PropTypes.func.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nDateFilterWrapper.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default DateFilterWrapper;\r\n","import React from 'react';\r\n\r\nfunction NotFoundPage() {\r\n  return (\r\n    <h1 className='page-title'>\r\n      <span className='notFoundCode'>404:</span>\r\n      &nbsp;Страница не найдена\r\n    </h1>\r\n  );\r\n}\r\n\r\nexport default NotFoundPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { range as makeRange } from '../utils/array';\r\n\r\nimport './SliderWireframe.scss';\r\n\r\nfunction Wireframe({ min, max, valuePerStep, formatLabel, labelMarkStep }) {\r\n  const rangeUnits = makeRange(min, max, valuePerStep);\r\n  const lastUnit = max;\r\n\r\n  const islabelMarkStep = step => step % labelMarkStep === 0;\r\n  const isFirstStep = step => step === 0;\r\n\r\n  return (\r\n    <>\r\n      {rangeUnits.map((unit, step) =>\r\n        islabelMarkStep(step) ? (\r\n          <div key={unit} className='time-interval-with-mark-box'>\r\n            <p className={classNames('mark-label', { first: isFirstStep(step) })}>\r\n              {formatLabel(unit)}\r\n            </p>\r\n            <div\r\n              className={classNames('time-interval with-mark', {\r\n                first: isFirstStep(step),\r\n              })}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <div key={unit} className={classNames('time-interval')} />\r\n        ),\r\n      )}\r\n      <div className='invisible-time-interval-with-mark-box'>\r\n        <p className='mark-label last'>{formatLabel(lastUnit)}</p>\r\n        <div className={classNames('invisible-time-interval with-mark')} />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nWireframe.propTypes = {\r\n  min: PropTypes.number.isRequired,\r\n  max: PropTypes.number.isRequired,\r\n  formatLabel: PropTypes.func.isRequired,\r\n  valuePerStep: PropTypes.number.isRequired,\r\n  labelMarkStep: PropTypes.number,\r\n};\r\n\r\nWireframe.defaultProps = {\r\n  labelMarkStep: 4,\r\n};\r\n\r\nexport default Wireframe;\r\n","function range(start, end, step = 1) {\r\n  const range = [];\r\n  for (let i = start; i < end; i += step) {\r\n    range.push(i);\r\n  }\r\n  return range;\r\n}\r\n\r\nexport { range };\r\n","function clamp(value, min, max) {\r\n  return Math.max(min, Math.min(max, value));\r\n}\r\n\r\nexport { clamp };\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { isEqual } from 'lodash';\r\n\r\nimport { clamp } from '../utils/clamp';\r\n\r\nimport './SelectedRange.scss';\r\n\r\nconst CSS_UNIT = '%';\r\n\r\nclass SelectedRange extends React.Component {\r\n  static propTypes = {\r\n    normalizedRange: PropTypes.shape({\r\n      start: PropTypes.number.isRequired,\r\n      end: PropTypes.number.isRequired,\r\n    }).isRequired,\r\n    pagePositionToNormalizedValue: PropTypes.func.isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n    onChangeStart: PropTypes.func,\r\n    onChangeEnd: PropTypes.func,\r\n    selectedRangeRef: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    onChangeStart: () => {},\r\n    onChangeEnd: () => {},\r\n    selectedRangeRef: null,\r\n  };\r\n\r\n  cursorShift = null;\r\n\r\n  grab = event => {\r\n    const { target: selectedRange, pageX: cursorX } = event;\r\n    const { onChangeStart } = this.props;\r\n\r\n    const selectedRangeLeft = selectedRange.getBoundingClientRect().left;\r\n    this.cursorShift = cursorX - selectedRangeLeft;\r\n\r\n    document.addEventListener('pointermove', this.move);\r\n    document.addEventListener('pointerup', this.release);\r\n\r\n    onChangeStart();\r\n\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  move = event => {\r\n    const { pageX: cursorPageValue } = event;\r\n    const { normalizedRange, onChange } = this.props;\r\n    const { pagePositionToNormalizedValue: normalizeValue } = this.props;\r\n\r\n    const normalizedRangeLength = normalizedRange.end - normalizedRange.start;\r\n\r\n    const newNormalizedRangeStart = normalizeValue(cursorPageValue - this.cursorShift);\r\n    const newNormalizedRangeEnd = newNormalizedRangeStart + normalizedRangeLength;\r\n\r\n    const newNormalizedRange = {\r\n      start: clamp(newNormalizedRangeStart, 0, 1 - normalizedRangeLength),\r\n      end: clamp(newNormalizedRangeEnd, normalizedRangeLength, 1),\r\n    };\r\n\r\n    if (!isEqual(newNormalizedRange, normalizedRange)) {\r\n      onChange(newNormalizedRange);\r\n    }\r\n\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  release = event => {\r\n    document.removeEventListener('pointermove', this.move);\r\n    document.removeEventListener('pointerup', this.release);\r\n\r\n    const { onChangeEnd } = this.props;\r\n    onChangeEnd();\r\n\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  render() {\r\n    const { normalizedRange, selectedRangeRef } = this.props;\r\n\r\n    const selectedRangeStart = Math.min(normalizedRange.start, normalizedRange.end);\r\n    const selectedRangeLength = Math.abs(normalizedRange.end - normalizedRange.start);\r\n\r\n    return (\r\n      <div\r\n        ref={selectedRangeRef}\r\n        className='selected-range'\r\n        style={{\r\n          left: selectedRangeStart * 100 + CSS_UNIT,\r\n          width: selectedRangeLength * 100 + CSS_UNIT,\r\n        }}\r\n        onPointerDown={this.grab}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default SelectedRange;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { clamp } from '../utils/clamp';\r\n\r\nimport './Handle.scss';\r\n\r\nconst CSS_UNIT = '%';\r\n\r\nclass Handle extends React.Component {\r\n  static propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    normalizedValue: PropTypes.number.isRequired,\r\n    pagePositionToNormalizedValue: PropTypes.func.isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n    onChangeStart: PropTypes.func,\r\n    onChangeEnd: PropTypes.func,\r\n    handleRef: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    onChangeStart: () => {},\r\n    onChangeEnd: () => {},\r\n    handleRef: null,\r\n  };\r\n\r\n  cursorShift = null;\r\n\r\n  grab = event => {\r\n    const { target: handle, pageX: cursorX } = event;\r\n    const { onChangeStart, name } = this.props;\r\n\r\n    const handleLeft = handle.getBoundingClientRect().left;\r\n    this.cursorShift = cursorX - handleLeft;\r\n\r\n    document.addEventListener('pointermove', this.move);\r\n    document.addEventListener('pointerup', this.release);\r\n\r\n    onChangeStart(name);\r\n\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  move = event => {\r\n    const { pageX: cursorPagePosition } = event;\r\n    const { normalizedValue: oldValue, onChange, name } = this.props;\r\n    const { pagePositionToNormalizedValue: normalizeValue } = this.props;\r\n\r\n    const normalizedValue = normalizeValue(cursorPagePosition - this.cursorShift);\r\n    const newValue = clamp(normalizedValue, 0, 1);\r\n\r\n    if (newValue !== oldValue) {\r\n      onChange(name, newValue);\r\n    }\r\n\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  release = event => {\r\n    document.removeEventListener('pointermove', this.move);\r\n    document.removeEventListener('pointerup', this.release);\r\n\r\n    const { onChangeEnd, name } = this.props;\r\n    onChangeEnd(name);\r\n\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  render() {\r\n    const { handleRef, normalizedValue } = this.props;\r\n    return (\r\n      <div\r\n        className='slider-handle'\r\n        ref={handleRef}\r\n        style={{\r\n          left: normalizedValue * 100 + CSS_UNIT,\r\n          transform: 'translateX(-50%)',\r\n        }}\r\n        onPointerDown={this.grab}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nHandle.propTypes = {};\r\n\r\nexport default Handle;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { isEqual } from 'lodash';\r\n\r\nimport { SliderWireframe } from './SliderWireframe';\r\nimport { SelectedRange } from './SelectedRange';\r\nimport { Handle } from './Handle';\r\n\r\nimport './RangeSlider.scss';\r\n\r\nconst MODE = {\r\n  IDLE: 0,\r\n  DRAG: 1,\r\n};\r\n\r\nclass RangeSlider extends React.Component {\r\n  static propTypes = {\r\n    min: PropTypes.number.isRequired,\r\n    max: PropTypes.number.isRequired,\r\n    selectedRange: PropTypes.shape({\r\n      start: PropTypes.number.isRequired,\r\n      end: PropTypes.number.isRequired,\r\n    }).isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n    formatLabel: PropTypes.func.isRequired,\r\n    valuePerStep: PropTypes.number,\r\n    labelMarkStep: PropTypes.number,\r\n    className: PropTypes.string,\r\n  };\r\n\r\n  static defaultProps = {\r\n    valuePerStep: 1,\r\n    labelMarkStep: 4,\r\n    className: '',\r\n  };\r\n\r\n  state = {\r\n    mode: MODE.IDLE,\r\n    selectedRange: {\r\n      start: null,\r\n      end: null,\r\n    },\r\n  };\r\n\r\n  firstHandleName = 'start';\r\n  secondHandleName = 'end';\r\n\r\n  componentDidMount() {\r\n    this.measureElementsSize();\r\n    window.addEventListener('resize', this.handleResize);\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    const stateChanged = !isEqual(nextState, this.state);\r\n    const propsChanged = !isEqual(nextState, this.props);\r\n\r\n    const { mode } = this.state;\r\n    return stateChanged || (propsChanged && mode !== MODE.DRAG);\r\n  }\r\n\r\n  handleResize = () => {\r\n    this.measureElementsSize();\r\n  };\r\n\r\n  measureElementsSize() {\r\n    const { width, left } = this.slider.getBoundingClientRect();\r\n    this.sliderWidth = width;\r\n    this.sliderLeft = left;\r\n  }\r\n\r\n  handleChangeStart = () => {\r\n    this.switchToDragMode();\r\n  };\r\n\r\n  handleChangeEnd = () => {\r\n    this.switchToIdleMode();\r\n    this.animateSelectedRangeRounding();\r\n  };\r\n\r\n  switchToDragMode() {\r\n    const { selectedRange } = this.props;\r\n    this.setState({ mode: MODE.DRAG, selectedRange });\r\n  }\r\n\r\n  switchToIdleMode() {\r\n    this.setState({ mode: MODE.IDLE, selectedRange: null });\r\n  }\r\n\r\n  animateSelectedRangeRounding() {\r\n    this.selectedRange.classList.add('smooth-position-transition');\r\n    this.firstHandle.classList.add('smooth-position-transition');\r\n    this.secondHandle.classList.add('smooth-position-transition');\r\n\r\n    setTimeout(this.finishSelectedRangeRoundingAnimation, 500);\r\n  }\r\n\r\n  finishSelectedRangeRoundingAnimation = () => {\r\n    this.selectedRange.classList.remove('smooth-position-transition');\r\n    this.firstHandle.classList.remove('smooth-position-transition');\r\n    this.secondHandle.classList.remove('smooth-position-transition');\r\n  };\r\n\r\n  handleHandleValueChange = (handle, value) => {\r\n    const { selectedRange } = this.state;\r\n\r\n    const normalizedRange = this.absoluteRangeToNormalized(selectedRange);\r\n    normalizedRange[handle] = value;\r\n\r\n    if (normalizedRange.start > normalizedRange.end) {\r\n      [normalizedRange.start, normalizedRange.end] = [normalizedRange.end, normalizedRange.start];\r\n      this.swapHandlesWhileDrag();\r\n    }\r\n\r\n    this.handleSelectedRangeChange(normalizedRange);\r\n  };\r\n\r\n  swapHandlesWhileDrag() {\r\n    [this.firstHandleName, this.secondHandleName] = [this.secondHandleName, this.firstHandleName];\r\n    this.handlesSwappedWhileDrag = !this.handlesSwappedWhileDrag;\r\n  }\r\n\r\n  handleSelectedRangeChange = normalizedRange => {\r\n    const absoluteRange = this.normalizedRangeToAbsolute(normalizedRange);\r\n    this.setState({ selectedRange: absoluteRange });\r\n\r\n    const { onChange } = this.props;\r\n    const roundedRange = {\r\n      start: this.roundValue(absoluteRange.start),\r\n      end: this.roundValue(absoluteRange.end),\r\n    };\r\n\r\n    onChange(roundedRange);\r\n  };\r\n\r\n  roundValue = value => {\r\n    const { valuePerStep } = this.props;\r\n    return Math.round(value / valuePerStep) * valuePerStep;\r\n  };\r\n\r\n  normalizedRangeToAbsolute = absoluteRange => ({\r\n    start: this.normalizedValueToAbsolute(absoluteRange.start),\r\n    end: this.normalizedValueToAbsolute(absoluteRange.end),\r\n  });\r\n\r\n  absoluteRangeToNormalized = absoluteRange => ({\r\n    start: this.absoluteValueToNormalized(absoluteRange.start),\r\n    end: this.absoluteValueToNormalized(absoluteRange.end),\r\n  });\r\n\r\n  normalizedValueToAbsolute = normalizedValue => {\r\n    const { min, max } = this.props;\r\n    return normalizedValue * (max - min) + min;\r\n  };\r\n\r\n  absoluteValueToNormalized = absoluteValue => {\r\n    const { min, max } = this.props;\r\n    return (absoluteValue - min) / (max - min);\r\n  };\r\n\r\n  pagePositionToNormalizedValue = position => {\r\n    return (position - this.sliderLeft) / this.sliderWidth;\r\n  };\r\n\r\n  setSliderRef = slider => (this.slider = slider);\r\n\r\n  setSelectedRangeRef = selectedRange => (this.selectedRange = selectedRange);\r\n\r\n  setFirstHandleRef = handle => (this.firstHandle = handle);\r\n\r\n  setSecondHandleRef = handle => (this.secondHandle = handle);\r\n\r\n  getSelectedRange() {\r\n    const { mode } = this.state;\r\n    switch (mode) {\r\n      case MODE.IDLE:\r\n        return this.props.selectedRange;\r\n      case MODE.DRAG:\r\n        return this.state.selectedRange;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { min, max, formatLabel, valuePerStep, labelMarkStep, className } = this.props;\r\n\r\n    const selectedRange = this.getSelectedRange();\r\n    const normalizedSelectedRange = this.absoluteRangeToNormalized(selectedRange);\r\n\r\n    return (\r\n      <div ref={this.setSliderRef} className={classNames('slider-box', className)}>\r\n        <Handle\r\n          name={this.firstHandleName}\r\n          handleRef={this.setFirstHandleRef}\r\n          normalizedValue={normalizedSelectedRange[this.firstHandleName]}\r\n          onChange={this.handleHandleValueChange}\r\n          onChangeStart={this.handleChangeStart}\r\n          onChangeEnd={this.handleChangeEnd}\r\n          pagePositionToNormalizedValue={this.pagePositionToNormalizedValue}\r\n        />\r\n        <Handle\r\n          name={this.secondHandleName}\r\n          handleRef={this.setSecondHandleRef}\r\n          normalizedValue={normalizedSelectedRange[this.secondHandleName]}\r\n          onChange={this.handleHandleValueChange}\r\n          onChangeStart={this.handleChangeStart}\r\n          onChangeEnd={this.handleChangeEnd}\r\n          pagePositionToNormalizedValue={this.pagePositionToNormalizedValue}\r\n        />\r\n        <SelectedRange\r\n          selectedRangeRef={this.setSelectedRangeRef}\r\n          normalizedRange={normalizedSelectedRange}\r\n          onChange={this.handleSelectedRangeChange}\r\n          onChangeStart={this.handleChangeStart}\r\n          onChangeEnd={this.handleChangeEnd}\r\n          pagePositionToNormalizedValue={this.pagePositionToNormalizedValue}\r\n        />\r\n        <SliderWireframe\r\n          min={min}\r\n          max={max}\r\n          selectedRange={selectedRange}\r\n          valuePerStep={valuePerStep}\r\n          labelMarkStep={labelMarkStep}\r\n          formatLabel={formatLabel}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RangeSlider;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Gallery } from '../../../base-components/Gallery';\r\nimport { Spinner } from '../../common/Spinner';\r\nimport { ErrorPage } from '../../common/ErrorPage';\r\nimport { SeancesListContainer } from './SeancesList';\r\nimport { DateFilter } from '../movies-page/DateFilter';\r\nimport { NotFoundPage } from '../../common/NotFoundPage';\r\nimport { RangeSlider } from '../../../base-components/RangeSlider';\r\nimport { fetchMovieRequest } from '../../../../ducks/data/movies/actions';\r\nimport { MINUTES_IN_HOUR, toTimeLabel } from '../../../../utils/time';\r\nimport { SEANCES_TIME_RANGE } from '../../../../constants';\r\nimport { getTodayDate } from '../../../../utils/date';\r\n\r\nimport {\r\n  selectMoviesError,\r\n  selectSelectedMovie,\r\n} from '../../../../ducks/data/movies/selectors';\r\n\r\nimport './MoviePage.scss';\r\n\r\nfunction MoviePage({ movie }) {\r\n  const [selectedDate, setSelectedDate] = useState(getTodayDate());\r\n\r\n  const [selectedRange, setSelectedRange] = useState(SEANCES_TIME_RANGE);\r\n  const handleResetFiltersSettings = () => {\r\n    setSelectedRange(SEANCES_TIME_RANGE);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1 className='page-title'>{movie.name}</h1>\r\n      <Gallery items={movie.frames} className='movie-frames-gallery' />\r\n      <p className='movie-description'>{movie.description}</p>\r\n      <ul className='movie-extra-info'>\r\n        <li>\r\n          <label className='label' htmlFor='genres'>\r\n            Жанры:\r\n          </label>\r\n          <p id='genres'>{movie.genres.join(', ')}</p>\r\n        </li>\r\n        <li>\r\n          <label className='label' htmlFor='duration'>\r\n            Длительность:\r\n          </label>\r\n          <p id='duration'>{`${movie.duration} мин.`}</p>\r\n        </li>\r\n      </ul>\r\n      <div className='schedule-container'>\r\n        <h2 className='schedule-title'>Расписание</h2>\r\n        <div className='filters-container'>\r\n          <DateFilter\r\n            className='movie-date-filter'\r\n            selectedDate={selectedDate}\r\n            selectDate={setSelectedDate}\r\n          />\r\n          <RangeSlider\r\n            className='time-range-slider'\r\n            min={SEANCES_TIME_RANGE.start}\r\n            max={SEANCES_TIME_RANGE.end}\r\n            valuePerStep={MINUTES_IN_HOUR}\r\n            selectedRange={selectedRange}\r\n            onChange={setSelectedRange}\r\n            formatLabel={toTimeLabel}\r\n          />\r\n        </div>\r\n        <SeancesListContainer\r\n          movieName={movie.name}\r\n          movieId={movie.id}\r\n          selectedDate={selectedDate}\r\n          selectedRange={selectedRange}\r\n          resetFiltersSettings={handleResetFiltersSettings}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nMoviePage.propTypes = {\r\n  movie: PropTypes.shape({\r\n    id: PropTypes.number.isRequired,\r\n    name: PropTypes.string.isRequired,\r\n    description: PropTypes.string.isRequired,\r\n    genres: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\r\n    duration: PropTypes.number.isRequired,\r\n    frames: PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        url: PropTypes.string.isRequired,\r\n        description: PropTypes.string.isRequired,\r\n      }),\r\n    ).isRequired,\r\n  }).isRequired,\r\n};\r\n\r\n// eslint-disable-next-line react/prop-types\r\nfunction MoviePageContainer({ movie, fetchMovie, match, error, ...props }) {\r\n  if (error) {\r\n    return error.name === 'NotFoundError' ? <NotFoundPage /> : <ErrorPage />;\r\n  }\r\n\r\n  const movieId = parseInt(match.params.id, 10);\r\n  useEffect(() => {\r\n    fetchMovie(movieId);\r\n  }, []);\r\n\r\n  return movie ? (\r\n    <MoviePage movie={movie} {...props} />\r\n  ) : (\r\n    <Spinner className='page-spinner-container' />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  movie: selectSelectedMovie(state),\r\n  error: selectMoviesError(state),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  fetchMovie: fetchMovieRequest,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(MoviePageContainer);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport crossIcon from '../../../../../assets/images/dark-cross-icon.svg';\r\nimport searchIcon from '../../../../../assets/images/search-icon.svg';\r\n\r\nimport './Search.scss';\r\n\r\nfunction Search({ hint, placeholder, onHintChange, resetHint, className }) {\r\n  return (\r\n    <div className={className}>\r\n      <div className='input-box'>\r\n        <img alt='' src={searchIcon} className='search-icon' />\r\n        <input\r\n          value={hint}\r\n          placeholder={placeholder}\r\n          className='search-input'\r\n          onChange={onHintChange}\r\n        />\r\n        {hint && (\r\n          <img\r\n            aria-label='reset icon'\r\n            alt='reset-icon'\r\n            src={crossIcon}\r\n            className='reset-icon smoothly-enhance-on-hover'\r\n            onClick={resetHint}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nSearch.propTypes = {\r\n  hint: PropTypes.string.isRequired,\r\n  placeholder: PropTypes.string.isRequired,\r\n  onHintChange: PropTypes.func.isRequired,\r\n  resetHint: PropTypes.func.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nSearch.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default Search;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport { Seances } from '../../common/Seances';\r\nimport { createRoute } from '../../../../../utils/routes';\r\nimport { ROUTE } from '../../../../../constants';\r\n\r\nimport './Movie.scss';\r\n\r\nfunction Movie({ id, name, genres, poster, seances, className, history }) {\r\n  const goToMoviePage = () => history.push(createRoute(ROUTE.MOVIE, { id }));\r\n\r\n  return (\r\n    <div className={classNames('movie-box', className)}>\r\n      <img\r\n        alt='movie poster'\r\n        className='poster'\r\n        src={poster}\r\n        onClick={goToMoviePage}\r\n      />\r\n      <div className='main-info'>\r\n        <p className='genres'>{genres.join(', ')}</p>\r\n        <p className='title' onClick={goToMoviePage}>\r\n          {name}\r\n        </p>\r\n      </div>\r\n      <Seances movieName={name} seances={seances} className='seances' />\r\n    </div>\r\n  );\r\n}\r\n\r\nMovie.propTypes = {\r\n  id: PropTypes.number.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  genres: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\r\n  poster: PropTypes.string.isRequired,\r\n  seances: PropTypes.objectOf(\r\n    PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        id: PropTypes.string.isRequired,\r\n        startTime: PropTypes.number.isRequired,\r\n        price: PropTypes.number.isRequired,\r\n      }),\r\n    ),\r\n  ).isRequired,\r\n  history: PropTypes.object.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nMovie.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default withRouter(Movie);\r\n","function createRoute(apiURL, replacer) {\r\n  const key = Object.keys(replacer)[0];\r\n  return apiURL.replace(`:${key}`, replacer[key]);\r\n}\r\n\r\nexport { createRoute };\r\n","import React, { useEffect, useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Movie } from '../Movie';\r\nimport { Spinner } from '../../../common/Spinner';\r\nimport { NotFoundComponent } from '../../../common/NotFoundComponent';\r\nimport { NoScheduleComponent } from '../../../common/NoScheduleComponent';\r\nimport { fetchMoviesRequest } from '../../../../../ducks/data/movies/actions';\r\nimport { selectMovies } from '../../../../../ducks/data/movies/selectors';\r\nimport { keepSeancesAt } from '../../utils/movies';\r\n\r\nimport './MoviesList.scss';\r\n\r\nconst MOVIES_STATE = {\r\n  LOADING: 0,\r\n  SCHEDULE_NOT_EXIST: 1,\r\n  NOT_FOUND: 2,\r\n  FOUND: 3,\r\n};\r\n\r\nfunction getMoviesState(movies, selectedMovies) {\r\n  if (!movies.length) {\r\n    return MOVIES_STATE.SCHEDULE_NOT_EXIST;\r\n  }\r\n  if (!selectedMovies.length) {\r\n    return MOVIES_STATE.NOT_FOUND;\r\n  }\r\n  return MOVIES_STATE.FOUND;\r\n}\r\n\r\nfunction MoviesList({\r\n  movies,\r\n  movieHint,\r\n  selectedRange,\r\n  selectedDate,\r\n  resetFiltersSettings,\r\n}) {\r\n  const selectedMovies = useMemo(\r\n    () =>\r\n      movies\r\n        .filter(movie =>\r\n          movie.name.toLowerCase().includes(movieHint.toLowerCase().trim()),\r\n        )\r\n        .map(movie => ({\r\n          ...movie,\r\n          seances: keepSeancesAt(selectedDate, selectedRange, movie.seances),\r\n        }))\r\n        .filter(movie => movie.seances),\r\n    [movies, movieHint, selectedRange],\r\n  );\r\n\r\n  const moviesState = getMoviesState(movies, selectedMovies);\r\n  switch (moviesState) {\r\n    case MOVIES_STATE.LOADING:\r\n      return <Spinner className='info-box' />;\r\n    case MOVIES_STATE.SCHEDULE_NOT_EXIST:\r\n      return <NoScheduleComponent className='info-box' />;\r\n    case MOVIES_STATE.NOT_FOUND:\r\n      return (\r\n        <NotFoundComponent\r\n          className='info-box'\r\n          resetSettings={resetFiltersSettings}\r\n        />\r\n      );\r\n    case MOVIES_STATE.FOUND:\r\n      return (\r\n        <ul className='movie-list'>\r\n          {selectedMovies.map(movie => (\r\n            <Movie\r\n              key={movie.id}\r\n              id={movie.id}\r\n              name={movie.name}\r\n              genres={movie.genres}\r\n              poster={movie.poster}\r\n              seances={movie.seances}\r\n            />\r\n          ))}\r\n        </ul>\r\n      );\r\n  }\r\n}\r\n\r\nMoviesList.propTypes = {\r\n  movies: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n      name: PropTypes.string.isRequired,\r\n      genres: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\r\n      poster: PropTypes.string.isRequired,\r\n      seances: PropTypes.objectOf(\r\n        PropTypes.arrayOf(\r\n          PropTypes.shape({\r\n            id: PropTypes.string.isRequired,\r\n            startTime: PropTypes.number.isRequired,\r\n            price: PropTypes.number.isRequired,\r\n          }),\r\n        ),\r\n      ).isRequired,\r\n    }),\r\n  ).isRequired,\r\n  movieHint: PropTypes.string.isRequired,\r\n  selectedRange: PropTypes.shape({\r\n    start: PropTypes.number.isRequired,\r\n    end: PropTypes.number.isRequired,\r\n  }).isRequired,\r\n  selectedDate: PropTypes.string.isRequired,\r\n  resetFiltersSettings: PropTypes.func.isRequired,\r\n};\r\n\r\n// eslint-disable-next-line react/prop-types\r\nfunction MoviesListContainer({ movies, selectedDate, fetchMovies, ...props }) {\r\n  useEffect(() => {\r\n    fetchMovies(selectedDate);\r\n  }, [selectedDate]);\r\n\r\n  return movies ? (\r\n    <MoviesList movies={movies} selectedDate={selectedDate} {...props} />\r\n  ) : (\r\n    <Spinner className='info-box' />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  movies: selectMovies(state),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  fetchMovies: fetchMoviesRequest,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(MoviesListContainer);\r\n","import React, { useState } from 'react';\r\n\r\nimport { Search } from './Search';\r\nimport { DateFilter } from './DateFilter';\r\nimport { MoviesListContainer } from './MoviesList';\r\nimport { RangeSlider } from '../../../base-components/RangeSlider';\r\nimport { MINUTES_IN_HOUR, toTimeLabel } from '../../../../utils/time';\r\nimport { SEANCES_TIME_RANGE } from '../../../../constants';\r\nimport { getTodayDate } from '../../../../utils/date';\r\n\r\nimport './MoviesPage.scss';\r\n\r\nconst MOVIE_SEARCH_PLACEHOLDER = 'Название';\r\n\r\nfunction MoviesPage() {\r\n  const [movieHint, setMovieHint] = useState('');\r\n  const [selectedRange, setSelectedRange] = useState(SEANCES_TIME_RANGE);\r\n  const [selectedDate, setSelectedDate] = useState(getTodayDate());\r\n\r\n  const handleResetFiltersSettings = () => {\r\n    setMovieHint('');\r\n    setSelectedRange(SEANCES_TIME_RANGE);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1 className='page-title'>Расписание</h1>\r\n      <DateFilter\r\n        className='movies-date-filter'\r\n        selectedDate={selectedDate}\r\n        selectDate={setSelectedDate}\r\n      />\r\n      <div className='sub-filters'>\r\n        <Search\r\n          hint={movieHint}\r\n          placeholder={MOVIE_SEARCH_PLACEHOLDER}\r\n          onHintChange={event => setMovieHint(event.target.value)}\r\n          resetHint={() => setMovieHint('')}\r\n          className='search'\r\n        />\r\n        <RangeSlider\r\n          className='time-range-slider'\r\n          min={SEANCES_TIME_RANGE.start}\r\n          max={SEANCES_TIME_RANGE.end}\r\n          valuePerStep={MINUTES_IN_HOUR}\r\n          selectedRange={selectedRange}\r\n          onChange={setSelectedRange}\r\n          formatLabel={toTimeLabel}\r\n        />\r\n      </div>\r\n      <MoviesListContainer\r\n        movieHint={movieHint}\r\n        selectedRange={selectedRange}\r\n        selectedDate={selectedDate}\r\n        resetFiltersSettings={handleResetFiltersSettings}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MoviesPage;\r\n","import React from 'react';\r\nimport { Redirect, Route, Switch, withRouter } from 'react-router-dom';\r\n\r\nimport { BestDealsPage } from '../bestDeals/BestDealsPage';\r\nimport { MoviePageContainer } from '../movies/movie-page';\r\nimport { MoviesPage } from '../movies/movies-page';\r\nimport { ROUTE } from '../../../constants';\r\n\r\nfunction Routes(location) {\r\n  return (\r\n    <Switch>\r\n      <Route\r\n        location={location}\r\n        exact\r\n        path={ROUTE.MOVIES}\r\n        component={MoviesPage}\r\n      />\r\n      <Route\r\n        location={location}\r\n        exact\r\n        path={ROUTE.MOVIE}\r\n        component={MoviePageContainer}\r\n      />\r\n      <Route\r\n        location={location}\r\n        exact\r\n        path={ROUTE.SOON_MOVIES}\r\n        component={BestDealsPage}\r\n      />\r\n      <Route\r\n        location={location}\r\n        exact\r\n        path={ROUTE.BEST_DEALS}\r\n        component={BestDealsPage}\r\n      />\r\n      <Redirect to={ROUTE.MOVIES} />\r\n    </Switch>\r\n  );\r\n}\r\n\r\nRoutes.propTypes = {};\r\n\r\nexport default withRouter(Routes);\r\n","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport crossIcon from '../../../assets/images/dark-cross-icon.svg';\r\n\r\nimport './Modal.scss';\r\n\r\nfunction Modal({ children, onClose, showCloseIcon, className }) {\r\n  useEffect(() => {\r\n    document.body.classList.add('modal-open');\r\n\r\n    return () => document.body.classList.remove('modal-open');\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div className='modal-overlay' onClick={onClose} />\r\n      <div className={classNames('modal', className)}>\r\n        {showCloseIcon && (\r\n          <img\r\n            alt='close'\r\n            src={crossIcon}\r\n            onClick={onClose}\r\n            className='close-icon'\r\n            aria-label='button to close modal'\r\n          />\r\n        )}\r\n        {children}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nModal.propTypes = {\r\n  children: PropTypes.any.isRequired,\r\n  onClose: PropTypes.func,\r\n  showCloseIcon: PropTypes.bool,\r\n  className: PropTypes.string,\r\n};\r\n\r\nModal.defaultProps = {\r\n  isOpen: true,\r\n  onClose: () => {},\r\n  showCloseIcon: true,\r\n  className: '',\r\n};\r\n\r\nexport default Modal;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Modal } from '../../../base-components/Modal';\r\nimport { Button } from '../../../base-components/Button';\r\nimport { closeModal } from '../../../../ducks/ui/modals/actions';\r\n\r\nimport './StatusModal.scss';\r\n\r\nfunction StatusModal({ statusMsg, icon, closeButtonLabel, closeModal }) {\r\n  return (\r\n    <Modal className='status-modal' onClose={closeModal} showCloseIcon={false}>\r\n      <div className='status-msg-box'>\r\n        <img alt='' className='icon' src={icon} />\r\n        <p className='status-msg'>{statusMsg}</p>\r\n        <Button className='close-btn' onClick={closeModal}>\r\n          {closeButtonLabel}\r\n        </Button>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  closeModal,\r\n};\r\n\r\nStatusModal.propTypes = {\r\n  closeModal: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps,\r\n)(StatusModal);\r\n","import React from 'react';\r\n\r\nimport { StatusModal } from '../../common/StatusModal';\r\n\r\nimport sadnessIcon from '../../../../assets/images/sad-icon.svg';\r\n\r\nfunction ReservationFailureModal() {\r\n  return (\r\n    <StatusModal\r\n      statusMsg={'К сожалению, пока вы выбирали,\\n эти места уже заняли'}\r\n      icon={sadnessIcon}\r\n      closeButtonLabel='Ок'\r\n    />\r\n  );\r\n}\r\n\r\nexport default ReservationFailureModal;\r\n","import React from 'react';\r\n\r\nimport { StatusModal } from '../../common/StatusModal';\r\n\r\nimport sadnessIcon from '../../../../assets/images/sad-icon.svg';\r\n\r\nfunction NotAvailableAuthModal() {\r\n  return (\r\n    <StatusModal\r\n      statusMsg={\r\n        'К сожалению, в вашем регионе\\nне доступна функция авторизации'\r\n      }\r\n      icon={sadnessIcon}\r\n      closeButtonLabel='Ок'\r\n    />\r\n  );\r\n}\r\n\r\nexport default NotAvailableAuthModal;\r\n","import React from 'react';\r\n\r\nimport { StatusModal } from '../../common/StatusModal';\r\n\r\nimport congratIcon from '../../../../assets/images/congrat-icon.svg';\r\n\r\nfunction PaymentSuccessModal() {\r\n  return (\r\n    <StatusModal\r\n      statusMsg='Оплата прошла успешно!'\r\n      icon={congratIcon}\r\n      closeButtonLabel='Ок'\r\n    />\r\n  );\r\n}\r\n\r\nexport default PaymentSuccessModal;\r\n","import { useState, useCallback, useMemo } from 'react';\r\n\r\nfunction useInputState({\r\n  initialValue,\r\n  shouldMatch = '/.*/',\r\n  required = false,\r\n}) {\r\n  const [input, setInput] = useState(initialValue);\r\n  const [touched, setTouched] = useState(false);\r\n\r\n  const handleInputChange = useCallback(event => {\r\n    setInput(event.target.value);\r\n    setTouched(true);\r\n  }, shouldMatch);\r\n\r\n  const handleBlur = useCallback(() => {\r\n    setTouched(true);\r\n  }, []);\r\n\r\n  const valid = useMemo(() => {\r\n    const matchPattern = shouldMatch.test(input);\r\n    const notEmpty = input !== '';\r\n\r\n    return (!required || notEmpty) && matchPattern;\r\n  }, [input, shouldMatch, required]);\r\n\r\n  return [input, handleInputChange, handleBlur, valid, touched];\r\n}\r\n\r\nexport { useInputState };\r\n","export function selectReservationStatus(state) {\r\n  return state.tickets.reservationStatus;\r\n}\r\n\r\nexport function selectPaymentStatus(state) {\r\n  return state.tickets.paymentStatus;\r\n}\r\n","export const RESERVE_TICKETS = {\r\n  REQUEST: '@@tickets/RESERVE_TICKETS_REQUEST',\r\n  SUCCESS: '@@tickets/RESERVE_TICKETS_SUCCESS',\r\n  ERROR: '@@tickets/RESERVE_TICKETS_ERROR',\r\n};\r\n\r\nexport const PAY_TICKETS = {\r\n  REQUEST: '@@tickets/PAY_TICKETS_REQUEST',\r\n  SUCCESS: '@@tickets/PAY_TICKETS_SUCCESS',\r\n  ERROR: '@@tickets/PAY_TICKETS_ERROR',\r\n};\r\n\r\nexport const RESET_RESERVATION_STATUS = '@@tickets/RESET_RESERVATION_STATUS';\r\n\r\nexport const RESET_PAYMENT_STATUS = '@@tickets/RESET_PAYMENT_STATUS';\r\n","import {\r\n  PAY_TICKETS,\r\n  RESERVE_TICKETS,\r\n  RESET_PAYMENT_STATUS,\r\n  RESET_RESERVATION_STATUS,\r\n} from './action-types';\r\n\r\nexport const reserveTicketsRequest = (seanceId, seatsId) => {\r\n  return {\r\n    type: RESERVE_TICKETS.REQUEST,\r\n    seanceId,\r\n    seatsId,\r\n  };\r\n};\r\n\r\nexport const reserveTicketsSuccess = (seanceId, reservedSeatsId) => {\r\n  return {\r\n    type: RESERVE_TICKETS.SUCCESS,\r\n    reservedSeatsId,\r\n  };\r\n};\r\n\r\nexport const reserveTicketsError = error => {\r\n  return {\r\n    type: RESERVE_TICKETS.ERROR,\r\n    error,\r\n  };\r\n};\r\n\r\nexport const resetReservationStatus = () => {\r\n  return {\r\n    type: RESET_RESERVATION_STATUS,\r\n  };\r\n};\r\n\r\nexport const payTicketsRequest = (seanceId, seatsId) => {\r\n  return {\r\n    type: PAY_TICKETS.REQUEST,\r\n    seanceId,\r\n    seatsId,\r\n  };\r\n};\r\n\r\nexport const payTicketsSuccess = (seanceId, seatsId) => {\r\n  return {\r\n    type: PAY_TICKETS.SUCCESS,\r\n    seanceId,\r\n    seatsId,\r\n  };\r\n};\r\n\r\nexport const payTicketsError = error => {\r\n  return {\r\n    type: PAY_TICKETS.ERROR,\r\n    error,\r\n  };\r\n};\r\n\r\nexport const resetPaymentStatus = () => {\r\n  return {\r\n    type: RESET_PAYMENT_STATUS,\r\n  };\r\n};\r\n","import React, { useEffect, useMemo, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport classNames from 'classnames';\r\nimport Card from 'react-credit-cards';\r\nimport declint from 'declint-ru';\r\n\r\nimport { Spinner } from '../../common/Spinner';\r\nimport { Button } from '../../../base-components/Button';\r\nimport { useInputState } from '../../../../hooks/useInputState';\r\nimport { useFocusState } from '../../../../hooks/useFocusState';\r\nimport { closeModal, showModal } from '../../../../ducks/ui/modals/actions';\r\nimport { selectPaymentStatus } from '../../../../ducks/data/tickets/selectors';\r\nimport { MODAL, RUSSIAN_CURRENCY_SYMBOL, STATUS } from '../../../../constants';\r\n\r\nimport {\r\n  payTicketsRequest,\r\n  resetPaymentStatus,\r\n  resetReservationStatus,\r\n} from '../../../../ducks/data/tickets/actions';\r\n\r\nimport 'react-credit-cards/lib/styles.scss';\r\nimport './TicketsPaymentPage.scss';\r\n\r\nfunction TicketsPaymentPage({\r\n  orderDetails,\r\n  payTickets,\r\n  paymentStatus,\r\n  showModal,\r\n  closeModal,\r\n  resetReservationStatus,\r\n  resetPaymentStatus,\r\n}) {\r\n  useEffect(() => {\r\n    resetReservationStatus();\r\n  }, []);\r\n\r\n  const [\r\n    number,\r\n    handleNumberChange,\r\n    handleNumberBlur,\r\n    numberValid,\r\n    numberTouched,\r\n  ] = useInputState({\r\n    initialValue: '',\r\n    shouldMatch: useMemo(() => /^[\\d| ]{16,19}$/, []),\r\n    required: true,\r\n  });\r\n  const [\r\n    name,\r\n    handleNameChange,\r\n    handleNameBlur,\r\n    nameValid,\r\n    nameTouched,\r\n  ] = useInputState({\r\n    initialValue: '',\r\n    shouldMatch: useMemo(() => /^[[a-zA-Z]| ]+$/, []),\r\n    required: true,\r\n  });\r\n  const [\r\n    expiry,\r\n    handleExpiryChange,\r\n    handleExpiryBlur,\r\n    expiryValid,\r\n    expiryTouched,\r\n  ] = useInputState({\r\n    initialValue: '',\r\n    shouldMatch: useMemo(() => /^\\d\\d\\/\\d\\d$/, []),\r\n    required: true,\r\n  });\r\n  const [\r\n    cvc,\r\n    handleCvcChange,\r\n    handleCvcBlur,\r\n    cvcValid,\r\n    cvcTouched,\r\n  ] = useInputState({\r\n    initialValue: '',\r\n    shouldMatch: useMemo(() => /^\\d{3,4}$/, []),\r\n    required: true,\r\n  });\r\n\r\n  const allValid = useMemo(() => {\r\n    return numberValid && nameValid && expiryValid && cvcValid;\r\n  }, [numberValid, nameValid, expiryValid, cvcValid]);\r\n\r\n  const [focused, handleFocusChange] = useFocusState('');\r\n\r\n  const ticketsCount = declint(orderDetails.seatsId.length, [\r\n    '%s билет',\r\n    '%s билета',\r\n    '%s билетов',\r\n  ]);\r\n\r\n  const handleSubmit = useCallback(() => {\r\n    payTickets(orderDetails.seanceId, orderDetails.seatsId);\r\n  }, []);\r\n\r\n  const showPaymentSuccessModal = useCallback(() => {\r\n    resetPaymentStatus();\r\n    closeModal();\r\n    showModal(MODAL.PAYMENT_SUCCESS);\r\n  }, []);\r\n\r\n  const showPaymentFailureModal = useCallback(() => {\r\n    showModal(MODAL.PAYMENT_FAILURE);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    switch (paymentStatus) {\r\n      case STATUS.SUCCESS: {\r\n        showPaymentSuccessModal();\r\n        break;\r\n      }\r\n      case STATUS.ERROR: {\r\n        showPaymentFailureModal();\r\n        break;\r\n      }\r\n      case STATUS.REQUEST: {\r\n        break;\r\n      }\r\n      case STATUS.IDLE: {\r\n        break;\r\n      }\r\n      default: {\r\n        console.error('Unknown status ', paymentStatus);\r\n      }\r\n    }\r\n  }, [paymentStatus]);\r\n\r\n  return paymentStatus === STATUS.REQUEST ? (\r\n    <Spinner message='Идет оплата заказа' />\r\n  ) : (\r\n    <div className='tickets-payment-box'>\r\n      <header className='tickets-payment-header'>\r\n        <h1 className='tickets-payment-title'>Оплата билетов</h1>\r\n      </header>\r\n      <div className='tickets-info-box'>\r\n        <p className='tickets-info'>\r\n          {`= ${ticketsCount} ${\r\n            orderDetails.totalPrice\r\n          }${RUSSIAN_CURRENCY_SYMBOL}`}\r\n        </p>\r\n      </div>\r\n      <div className='payment-info-box'>\r\n        <Card\r\n          number={number}\r\n          name={name}\r\n          expiry={expiry}\r\n          cvc={cvc}\r\n          focused={focused}\r\n          className='card'\r\n          placeholders={{\r\n            name: 'IVAN IVANOV',\r\n          }}\r\n        />\r\n        <div className='form'>\r\n          <input\r\n            type='tel'\r\n            name='number'\r\n            maxLength={19}\r\n            className={classNames(\r\n              'form-input',\r\n              numberTouched && !numberValid && 'invalid',\r\n            )}\r\n            placeholder='Номер карты'\r\n            onChange={handleNumberChange}\r\n            onFocus={handleFocusChange}\r\n            onBlur={handleNumberBlur}\r\n          />\r\n          <input\r\n            type='text'\r\n            name='name'\r\n            className={classNames(\r\n              'form-input',\r\n              nameTouched && !nameValid && 'invalid',\r\n            )}\r\n            placeholder='IVAN IVANOV'\r\n            onChange={handleNameChange}\r\n            onFocus={handleFocusChange}\r\n            onBlur={handleNameBlur}\r\n          />\r\n          <input\r\n            type='tel'\r\n            name='expiry'\r\n            maxLength={5}\r\n            className={classNames(\r\n              'form-input',\r\n              expiryTouched && !expiryValid && 'invalid',\r\n            )}\r\n            placeholder='Срок действия'\r\n            onChange={handleExpiryChange}\r\n            onFocus={handleFocusChange}\r\n            onBlur={handleExpiryBlur}\r\n          />\r\n          <input\r\n            type='tel'\r\n            name='cvc'\r\n            maxLength={3}\r\n            className={classNames(\r\n              'form-input',\r\n              cvcTouched && !cvcValid && 'invalid',\r\n            )}\r\n            placeholder='CVC'\r\n            onChange={handleCvcChange}\r\n            onFocus={handleFocusChange}\r\n            onBlur={handleCvcBlur}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className='payment-actions'>\r\n        <Button\r\n          className={classNames('pay-btn', !allValid && 'disabled')}\r\n          onClick={handleSubmit}\r\n          disabled={!allValid}\r\n        >\r\n          Оплатить\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  paymentStatus: selectPaymentStatus(state),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  showModal,\r\n  closeModal,\r\n  resetReservationStatus,\r\n  resetPaymentStatus,\r\n  payTickets: payTicketsRequest,\r\n};\r\n\r\nTicketsPaymentPage.propTypes = {\r\n  orderDetails: PropTypes.shape({\r\n    seanceId: PropTypes.string.isRequired,\r\n    seatsId: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n    totalPrice: PropTypes.number.isRequired,\r\n  }),\r\n  showModal: PropTypes.func.isRequired,\r\n  closeModal: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(TicketsPaymentPage);\r\n","import { useState } from 'react';\r\n\r\nfunction useFocusState(initialValue) {\r\n  const [focused, setFocus] = useState(initialValue);\r\n\r\n  function handleFocusChange(event) {\r\n    setFocus(event.target.name);\r\n  }\r\n\r\n  return [focused, handleFocusChange];\r\n}\r\n\r\nexport { useFocusState };\r\n","import React, { useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Modal } from '../../../base-components/Modal';\r\nimport { TicketsPaymentPage } from '../TicketsPaymentPage';\r\nimport { resetPaymentStatus } from '../../../../ducks/data/tickets/actions';\r\nimport { closeModal } from '../../../../ducks/ui/modals/actions';\r\n\r\nfunction TicketsPaymentModal({\r\n  closeModal,\r\n  resetPaymentStatus,\r\n  ...ticketsPaymentPageProps\r\n}) {\r\n  const handleModalClose = useCallback(() => {\r\n    resetPaymentStatus();\r\n    closeModal();\r\n  }, []);\r\n\r\n  return (\r\n    <Modal onClose={handleModalClose}>\r\n      <TicketsPaymentPage {...ticketsPaymentPageProps} />\r\n    </Modal>\r\n  );\r\n}\r\n\r\nTicketsPaymentModal.propTypes = {\r\n  resetPaymentStatus: PropTypes.func.isRequired,\r\n  closeModal: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  resetPaymentStatus,\r\n  closeModal,\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps,\r\n)(TicketsPaymentModal);\r\n","import React, { useState, useCallback, useEffect, useMemo } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment/moment';\r\nimport { uniqueId } from 'lodash';\r\nimport classNames from 'classnames';\r\n\r\nimport {\r\n  getTodayDate,\r\n  getTomorrowDate,\r\n  toAppDateFormat,\r\n} from '../../../../utils/date';\r\n\r\nimport { Spinner } from '../../common/Spinner';\r\nimport { Button } from '../../../base-components/Button';\r\nimport { Tooltip } from '../../../base-components/Tooltip';\r\nimport { MODAL, RUSSIAN_CURRENCY_SYMBOL, STATUS } from '../../../../constants';\r\nimport { selectReservationStatus } from '../../../../ducks/data/tickets/selectors';\r\nimport { reserveTicketsRequest } from '../../../../ducks/data/tickets/actions';\r\nimport { closeModal, showModal } from '../../../../ducks/ui/modals/actions';\r\n\r\nimport hallScreen from '../../../../assets/images/cropped-screen.svg';\r\n\r\nimport './SeanceTicketsPage.scss';\r\n\r\nfunction SeanceTicketsPage({\r\n  id: seanceId,\r\n  movieName,\r\n  startTime,\r\n  hallScheme,\r\n  takenSeats,\r\n  reservedSeats,\r\n  reserveTickets,\r\n  reservationStatus,\r\n  closeModal,\r\n  showModal,\r\n}) {\r\n  const [selectedSeats, setSelectedSeats] = useState([]);\r\n  const selectSeat = useCallback((seatId, price) => {\r\n    const seatToSelect = {\r\n      id: seatId,\r\n      price,\r\n    };\r\n    setSelectedSeats(selectedSeats => selectedSeats.concat(seatToSelect));\r\n  }, []);\r\n\r\n  const unselectSeat = useCallback(seatId => {\r\n    setSelectedSeats(selectedSeats => {\r\n      const idxToRemoveAt = selectedSeats.findIndex(seat => seat.id === seatId);\r\n\r\n      if (idxToRemoveAt === -1) {\r\n        console.error(`Try to unselect not selected seat with id ${seatId} `);\r\n        return selectedSeats;\r\n      }\r\n\r\n      const newSelectedSeats = [...selectedSeats];\r\n      newSelectedSeats.splice(idxToRemoveAt, 1);\r\n\r\n      return newSelectedSeats;\r\n    });\r\n  }, []);\r\n\r\n  const seatsAreNotSelected = !selectedSeats.length;\r\n\r\n  const totalPrice = useMemo(() => {\r\n    return selectedSeats.reduce(\r\n      (totalPrice, seat) => (totalPrice += seat.price),\r\n      0,\r\n    );\r\n  }, [selectedSeats]);\r\n\r\n  const buyTickets = useCallback(() => {\r\n    const seatsId = selectedSeats.map(seat => seat.id);\r\n    reserveTickets(seanceId, seatsId);\r\n  }, [selectedSeats]);\r\n\r\n  const goToTicketsPayment = useCallback(() => {\r\n    closeModal();\r\n\r\n    const seatsId = selectedSeats.map(seat => seat.id);\r\n    const modalProps = { orderDetails: { seanceId, seatsId, totalPrice } };\r\n\r\n    showModal(MODAL.TICKETS_PAYMENT, modalProps);\r\n  }, [selectedSeats, totalPrice]);\r\n\r\n  const showReservationFailureModal = useCallback(() => {\r\n    setSelectedSeats([]);\r\n    showModal(MODAL.RESERVATION_FAILURE);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    switch (reservationStatus) {\r\n      case STATUS.SUCCESS: {\r\n        goToTicketsPayment();\r\n        break;\r\n      }\r\n      case STATUS.ERROR: {\r\n        showReservationFailureModal();\r\n        break;\r\n      }\r\n      case STATUS.REQUEST: {\r\n        break;\r\n      }\r\n      case STATUS.IDLE: {\r\n        break;\r\n      }\r\n      default: {\r\n        console.error('Unknown status ', reservationStatus);\r\n      }\r\n    }\r\n  }, [reservationStatus]);\r\n\r\n  const today = getTodayDate();\r\n  const tomorrow = getTomorrowDate();\r\n  const seanceMoment = moment.unix(startTime);\r\n  const seanceDate = toAppDateFormat(seanceMoment);\r\n\r\n  let seanceDateAppearance = '';\r\n  switch (seanceDate) {\r\n    case today:\r\n      seanceDateAppearance = 'Сегодня';\r\n      break;\r\n    case tomorrow:\r\n      seanceDateAppearance = 'Завтра';\r\n      break;\r\n    default:\r\n      seanceDateAppearance = seanceMoment.format('DD MMMM');\r\n      break;\r\n  }\r\n  const seanceStartTimeAppearance = moment.unix(startTime).format('HH:mm');\r\n\r\n  return reservationStatus === STATUS.REQUEST || reservationStatus === STATUS.SUCCESS ? (\r\n    <Spinner message='Заказ резервируется' />\r\n  ) : (\r\n    <div className='seance-tickets-page-container'>\r\n      <div className='movie-title-box'>\r\n        <h1 className='movie-title'>{movieName}</h1>\r\n      </div>\r\n      <div className='seance-start-time-box'>\r\n        <p className='seance-start-time'>\r\n          {`${seanceDateAppearance} в ${seanceStartTimeAppearance}`}\r\n        </p>\r\n      </div>\r\n      <div className='hall-scheme-box'>\r\n        <object data={hallScreen} style={{ width: '450px' }}>\r\n          <p>Screen</p>\r\n        </object>\r\n        {hallScheme.map(row => {\r\n          if (!row)\r\n            return <div key={uniqueId('empty-row')} className='empty-row' />;\r\n\r\n          return (\r\n            <div key={row.number} className='row'>\r\n              {row.seats.map((seat, idx) => {\r\n                if (!seat) return <div key={idx} className='empty-space' />;\r\n\r\n                const isAvailable =\r\n                  !takenSeats.includes(seat.id) &&\r\n                  !reservedSeats.includes(seat.id);\r\n                const isSelected = selectedSeats.find(\r\n                  selectedSeat => selectedSeat.id === seat.id,\r\n                );\r\n\r\n                return isAvailable ? (\r\n                  <div key={idx} className='seat-box'>\r\n                    <div\r\n                      className={\r\n                        isSelected ? 'selected-seat' : 'available-seat'\r\n                      }\r\n                      onClick={\r\n                        !isSelected\r\n                          ? () => selectSeat(seat.id, seat.price)\r\n                          : () => unselectSeat(seat.id)\r\n                      }\r\n                    >\r\n                      {seat.number}\r\n                      <Tooltip className='seat-tooltip'>\r\n                        <p className='seat-price'>\r\n                          {`${seat.price} ${RUSSIAN_CURRENCY_SYMBOL}`}\r\n                        </p>\r\n                        <p className='seat-position'>\r\n                          {`${row.number} ряд, ${seat.number} место`}\r\n                        </p>\r\n                      </Tooltip>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div key={seat.id} className='seat-box'>\r\n                    <div className='not-available-seat' />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <div className='tickets-purchase-box'>\r\n        {!seatsAreNotSelected && (\r\n          <p className='total-price'>{`${totalPrice} ${RUSSIAN_CURRENCY_SYMBOL}`}</p>\r\n        )}\r\n        <Button\r\n          className={classNames('buy-btn', seatsAreNotSelected && 'disabled')}\r\n          onClick={buyTickets}\r\n          disabled={seatsAreNotSelected}\r\n        >\r\n          Купить\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nSeanceTicketsPage.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  movieName: PropTypes.string.isRequired,\r\n  startTime: PropTypes.number.isRequired,\r\n  hallScheme: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      number: PropTypes.number.isRequired,\r\n      seats: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n          number: PropTypes.number,\r\n          price: PropTypes.number,\r\n        }),\r\n      ),\r\n    }),\r\n  ).isRequired,\r\n  takenSeats: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n  reservedSeats: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  reservationStatus: selectReservationStatus(state),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  closeModal,\r\n  showModal,\r\n  reserveTickets: reserveTicketsRequest,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(SeanceTicketsPage);\r\n","import React, { useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Modal } from '../../../base-components/Modal';\r\nimport { SeanceTicketsPage } from '../SeanceTicketsPage';\r\nimport { closeModal } from '../../../../ducks/ui/modals/actions';\r\nimport { resetReservationStatus } from '../../../../ducks/data/tickets/actions';\r\n\r\nfunction SeanceTicketsModal({\r\n  resetReservationStatus,\r\n  closeModal,\r\n  ...seanceTicketsPageProps\r\n}) {\r\n  const handleModalClose = useCallback(() => {\r\n    resetReservationStatus();\r\n    closeModal();\r\n  }, []);\r\n\r\n  return (\r\n    <Modal onClose={handleModalClose}>\r\n      <SeanceTicketsPage {...seanceTicketsPageProps} />\r\n    </Modal>\r\n  );\r\n}\r\n\r\nSeanceTicketsModal.propTypes = {\r\n  closeModal: PropTypes.func.isRequired,\r\n  resetReservationStatus: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  closeModal,\r\n  resetReservationStatus,\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps,\r\n)(SeanceTicketsModal);\r\n","import React from 'react';\r\n\r\nimport { StatusModal } from '../../common/StatusModal';\r\n\r\nimport sadnessIcon from '../../../../assets/images/sad-icon.svg';\r\n\r\nfunction PaymentFailureModal() {\r\n  return (\r\n    <StatusModal\r\n      statusMsg='Оплата не прошла\\nПопробуйте еще раз'\r\n      icon={sadnessIcon}\r\n      closeButtonLabel='Ок'\r\n    />\r\n  );\r\n}\r\n\r\nexport default PaymentFailureModal;\r\n","const selectModalsToShow = state => state.modals.modalsToShow;\r\n\r\nexport { selectModalsToShow };\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { ReservationFailureModal } from '../../app-components/seanceTickets/ReservationFailureModal';\r\nimport { NotAvailableAuthModal } from '../../app-components/auth/NotAvailableAuthModal';\r\nimport { PaymentSuccessModal } from '../../app-components/ticketsPayment/PaymentSuccessModal';\r\nimport { TicketsPaymentModal } from '../../app-components/ticketsPayment/TicketsPaymentModal';\r\nimport { SeanceTicketsModal } from '../../app-components/seanceTickets/SeanceTicketsModal';\r\nimport { PaymentFailureModal } from '../../app-components/ticketsPayment/PaymentFailureModal';\r\nimport { selectModalsToShow } from '../../../ducks/ui/modals/selectors';\r\nimport { MODAL } from '../../../constants';\r\n\r\nconst MODAL_COMPONENTS = {\r\n  [MODAL.SEANCE_TICKETS]: SeanceTicketsModal,\r\n  [MODAL.TICKETS_PAYMENT]: TicketsPaymentModal,\r\n  [MODAL.PAYMENT_SUCCESS]: PaymentSuccessModal,\r\n  [MODAL.NOT_AVAILABLE_AUTH]: NotAvailableAuthModal,\r\n  [MODAL.RESERVATION_FAILURE]: ReservationFailureModal,\r\n  [MODAL.PAYMENT_FAILURE]: PaymentFailureModal,\r\n};\r\n\r\nfunction ModalManager({ modalsToShow }) {\r\n  return (\r\n    <React.Fragment>\r\n      {modalsToShow.map(modal => {\r\n        const SpecificModalComponent = MODAL_COMPONENTS[modal.modalType];\r\n        return (\r\n          <SpecificModalComponent key={modal.modalType} {...modal.modalProps} />\r\n        );\r\n      })}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nModalManager.propTypes = {\r\n  modalsToShow: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      modalType: PropTypes.oneOf([\r\n        MODAL.SEANCE_TICKETS,\r\n        MODAL.TICKETS_PAYMENT,\r\n        MODAL.PAYMENT_SUCCESS,\r\n        MODAL.NOT_AVAILABLE_AUTH,\r\n        MODAL.RESERVATION_FAILURE,\r\n        MODAL.PAYMENT_FAILURE,\r\n      ]).isRequired,\r\n      modalProps: PropTypes.object,\r\n    }).isRequired,\r\n  ).isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  modalsToShow: selectModalsToShow(state),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  null,\r\n)(ModalManager);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { NavBar } from '../navbar';\r\nimport { Routes } from '../routes';\r\nimport { ModalManager } from '../../base-components/ModalManager';\r\n\r\nfunction App({ currentUser }) {\r\n  return (\r\n    <div className='app'>\r\n      <ModalManager />\r\n      <NavBar\r\n        currentUser={currentUser}\r\n        onLogout={() => {}}\r\n        onSettings={() => {}}\r\n      />\r\n      <div className='page'>\r\n        <Routes className='' />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nApp.propTypes = {\r\n  currentUser: PropTypes.shape({\r\n    name: PropTypes.string.isRequired,\r\n    surname: PropTypes.string.isRequired,\r\n  }),\r\n};\r\n\r\nApp.defaultProps = {\r\n  currentUser: null,\r\n};\r\n\r\nexport default App;\r\n","import { FETCH_MOVIE, FETCH_MOVIES, FETCH_SEANCES } from './action-types';\r\n\r\nconst initialState = {\r\n  movies: null,\r\n  selectedMovie: null,\r\n  selectedMovieSeances: null,\r\n};\r\n\r\nexport const movies = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case FETCH_MOVIES.REQUEST: {\r\n      return {\r\n        ...state,\r\n        movies: null,\r\n      };\r\n    }\r\n    case FETCH_MOVIE.REQUEST: {\r\n      return {\r\n        ...state,\r\n        selectedMovie: null,\r\n      };\r\n    }\r\n    case FETCH_SEANCES.REQUEST: {\r\n      return {\r\n        ...state,\r\n        selectedMovieSeances: null,\r\n      };\r\n    }\r\n    case FETCH_MOVIES.SUCCESS: {\r\n      return {\r\n        ...state,\r\n        movies: action.movies,\r\n      };\r\n    }\r\n    case FETCH_MOVIE.SUCCESS: {\r\n      return {\r\n        ...state,\r\n        selectedMovie: action.movie,\r\n      };\r\n    }\r\n    case FETCH_SEANCES.SUCCESS: {\r\n      return {\r\n        ...state,\r\n        selectedMovieSeances: action.seances,\r\n      };\r\n    }\r\n    case FETCH_MOVIES.ERROR:\r\n    case FETCH_MOVIE.ERROR: {\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};","import {\r\n  PAY_TICKETS,\r\n  RESERVE_TICKETS,\r\n  RESET_PAYMENT_STATUS,\r\n  RESET_RESERVATION_STATUS,\r\n} from './action-types';\r\n\r\nimport { STATUS } from '../../../constants';\r\n\r\nconst initialState = {\r\n  paymentStatus: STATUS.IDLE,\r\n  reservationStatus: STATUS.IDLE,\r\n};\r\n\r\nexport const tickets = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case RESERVE_TICKETS.REQUEST: {\r\n      return {\r\n        ...state,\r\n        reservationStatus: STATUS.REQUEST,\r\n      };\r\n    }\r\n    case RESERVE_TICKETS.SUCCESS: {\r\n      const reservationCancelled = state.reservationStatus === STATUS.IDLE;\r\n      return {\r\n        ...state,\r\n        reservationStatus: reservationCancelled ? STATUS.IDLE : STATUS.SUCCESS,\r\n      };\r\n    }\r\n    case RESERVE_TICKETS.ERROR: {\r\n      const reservationCancelled = state.reservationStatus === STATUS.IDLE;\r\n      return {\r\n        ...state,\r\n        reservationStatus: reservationCancelled ? STATUS.IDLE : STATUS.ERROR,\r\n      };\r\n    }\r\n    case RESET_RESERVATION_STATUS: {\r\n      return {\r\n        ...state,\r\n        reservationStatus: STATUS.IDLE,\r\n      };\r\n    }\r\n    case PAY_TICKETS.REQUEST: {\r\n      return {\r\n        ...state,\r\n        paymentStatus: STATUS.REQUEST,\r\n      };\r\n    }\r\n    case PAY_TICKETS.SUCCESS: {\r\n      const paymentCancelled = state.paymentStatus === STATUS.IDLE;\r\n      return {\r\n        ...state,\r\n        paymentStatus: paymentCancelled ? STATUS.IDLE : STATUS.SUCCESS,\r\n      };\r\n    }\r\n    case PAY_TICKETS.ERROR: {\r\n      return {\r\n        ...state,\r\n        paymentStatus: STATUS.ERROR,\r\n      };\r\n    }\r\n    case RESET_PAYMENT_STATUS: {\r\n      return {\r\n        ...state,\r\n        paymentStatus: STATUS.IDLE,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { CLOSE_MODAL, SHOW_MODAL } from './action-types';\r\n\r\nconst initialState = {\r\n  modalsToShow: [],\r\n};\r\n\r\nexport const modals = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SHOW_MODAL: {\r\n      const modal = {\r\n        modalType: action.modalType,\r\n        modalProps: action.modalProps,\r\n      };\r\n      return {\r\n        ...state,\r\n        modalsToShow: [...state.modalsToShow, modal],\r\n      };\r\n    }\r\n    case CLOSE_MODAL: {\r\n      return {\r\n        ...state,\r\n        modalsToShow: state.modalsToShow.slice(\r\n          0,\r\n          state.modalsToShow.length - 1,\r\n        ),\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport { createBrowserHistory } from 'history';\r\nimport { connectRouter } from 'connected-react-router';\r\n\r\nimport { movies } from '../ducks/data/movies/reducer';\r\nimport { tickets } from '../ducks/data/tickets/reducer';\r\nimport { modals } from '../ducks/ui/modals/reducer';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nconst rootReducer = combineReducers({\r\n  router: connectRouter(history),\r\n  movies,\r\n  modals,\r\n  tickets,\r\n});\r\n\r\nexport { history, rootReducer };\r\n","/* eslint-disable no-use-before-define */\r\nimport { uniqueId } from 'lodash';\r\nimport {\r\n  bindTimeToDayMoment,\r\n  getTodayDate,\r\n  getTomorrowDate,\r\n  momentToUnixTime,\r\n  toMoment,\r\n} from '../utils/date';\r\n\r\nconst daysWithSchedule = [getTodayDate(), getTomorrowDate()];\r\nexport function getMovies(date) {\r\n  return daysWithSchedule.includes(date) ? generateMoviesFor(date) : [];\r\n}\r\n\r\nexport function getMovie(id) {\r\n  if (!movies[id]) throw new NotFoundError('Movie with given id is not found');\r\n  return movies[id];\r\n}\r\n\r\nexport function getSeances(movieId, date) {\r\n  return daysWithSchedule.includes(date)\r\n    ? generateSeancesFor(toMoment(date), movieId)\r\n    : {};\r\n}\r\n\r\nfunction generateMoviesFor(day) {\r\n  const dayStartMoment = toMoment(day).startOf('day');\r\n\r\n  const generatedMovies = [];\r\n  Object.keys(movies).forEach(movieId => {\r\n    const movie = movies[movieId];\r\n    generatedMovies.push({\r\n      id: parseInt(movieId, 10),\r\n      ...movie,\r\n      seances: generateSeancesFor(dayStartMoment, movieId),\r\n    });\r\n  });\r\n\r\n  return generatedMovies;\r\n}\r\n\r\nfunction generateSeancesFor(dayStartMoment, movieId) {\r\n  const seanceStartTimes2D =\r\n    possibleSeanceStartTimes[movieId % possibleSeanceStartTimes.length];\r\n  const seanceStartTimes3D =\r\n    possibleSeanceStartTimes[(movieId + 1) % possibleSeanceStartTimes.length];\r\n\r\n  return {\r\n    '3D': generateSeancesAt(\r\n      seanceStartTimes3D\r\n        .map(time => bindTimeToDayMoment(time, dayStartMoment))\r\n        .map(momentToUnixTime),\r\n    ),\r\n    '2D': generateSeancesAt(\r\n      seanceStartTimes2D\r\n        .map(time => bindTimeToDayMoment(time, dayStartMoment))\r\n        .map(momentToUnixTime),\r\n    ),\r\n  };\r\n}\r\n\r\nfunction generateSeancesAt(seanceStartTimes) {\r\n  return seanceStartTimes.map((startTime, idx) => ({\r\n    id: uniqueId(),\r\n    startTime,\r\n    hallScheme,\r\n    price: getMinPrice(hallScheme),\r\n    takenSeats: possibleTakenSeats[idx % possibleTakenSeats.length],\r\n    reservedSeats: possibleReservedSeats[idx % possibleReservedSeats.length],\r\n  }));\r\n}\r\n\r\nclass NotFoundError extends Error {\r\n  constructor(message) {\r\n    super();\r\n    this.name = 'NotFoundError';\r\n    this.message = message;\r\n  }\r\n}\r\n\r\nfunction getMinPrice(hallScheme) {\r\n  return hallScheme.reduce((min, row) => {\r\n    return row\r\n      ? row.seats.reduce((min, seat) => {\r\n          return seat ? Math.min(min, seat.price) : min;\r\n        }, min)\r\n      : min;\r\n  }, Infinity);\r\n}\r\n\r\nconst hallScheme = [\r\n  {\r\n    number: 1,\r\n    seats: [\r\n      null,\r\n      { id: 1, number: 1, price: 200 },\r\n      { id: 2, number: 2, price: 200 },\r\n      { id: 3, number: 3, price: 200 },\r\n      null,\r\n      { id: 4, number: 4, price: 200 },\r\n      { id: 5, number: 5, price: 200 },\r\n      { id: 6, number: 6, price: 200 },\r\n      null,\r\n      { id: 7, number: 7, price: 200 },\r\n      { id: 8, number: 8, price: 200 },\r\n      { id: 9, number: 9, price: 200 },\r\n    ],\r\n  },\r\n  {\r\n    number: 2,\r\n    seats: [\r\n      null,\r\n      { id: 10, number: 1, price: 200 },\r\n      { id: 11, number: 2, price: 200 },\r\n      { id: 12, number: 3, price: 200 },\r\n      null,\r\n      { id: 13, number: 4, price: 200 },\r\n      { id: 14, number: 5, price: 200 },\r\n      { id: 15, number: 6, price: 200 },\r\n      null,\r\n      { id: 16, number: 7, price: 200 },\r\n      { id: 17, number: 8, price: 200 },\r\n      { id: 18, number: 9, price: 200 },\r\n    ],\r\n  },\r\n  {\r\n    number: 3,\r\n    seats: [\r\n      null,\r\n      { id: 19, number: 1, price: 200 },\r\n      { id: 20, number: 2, price: 200 },\r\n      { id: 21, number: 3, price: 200 },\r\n      null,\r\n      { id: 22, number: 4, price: 200 },\r\n      { id: 23, number: 5, price: 200 },\r\n      { id: 24, number: 6, price: 200 },\r\n      null,\r\n      { id: 25, number: 7, price: 200 },\r\n      { id: 26, number: 8, price: 200 },\r\n      { id: 27, number: 9, price: 200 },\r\n    ],\r\n  },\r\n  {\r\n    number: 4,\r\n    seats: [\r\n      null,\r\n      { id: 28, number: 1, price: 200 },\r\n      { id: 29, number: 2, price: 200 },\r\n      { id: 30, number: 3, price: 200 },\r\n      null,\r\n      { id: 31, number: 4, price: 200 },\r\n      { id: 32, number: 5, price: 200 },\r\n      { id: 33, number: 6, price: 200 },\r\n      null,\r\n      { id: 34, number: 7, price: 200 },\r\n      { id: 35, number: 8, price: 200 },\r\n      { id: 36, number: 9, price: 200 },\r\n    ],\r\n  },\r\n  null,\r\n  {\r\n    number: 5,\r\n    seats: [\r\n      { id: 37, number: 1, price: 250 },\r\n      { id: 38, number: 2, price: 250 },\r\n      { id: 39, number: 3, price: 250 },\r\n      { id: 40, number: 4, price: 250 },\r\n      { id: 41, number: 5, price: 250 },\r\n      { id: 42, number: 6, price: 250 },\r\n      { id: 43, number: 7, price: 250 },\r\n      { id: 44, number: 8, price: 250 },\r\n      { id: 45, number: 9, price: 250 },\r\n      { id: 46, number: 10, price: 250 },\r\n      { id: 47, number: 11, price: 250 },\r\n      { id: 48, number: 12, price: 200 },\r\n    ],\r\n  },\r\n];\r\n\r\nconst possibleTakenSeats = [\r\n  [3, 13, 17, 24, 26, 28, 30],\r\n  [39, 40, 43, 44, 46],\r\n  [16, 17, 18, 19],\r\n  [2, 3, 4, 5, 6],\r\n];\r\n\r\nconst possibleReservedSeats = [\r\n  [16, 17, 18, 19],\r\n  [2, 3, 4, 5, 6],\r\n  [3, 13, 24, 26, 28, 30],\r\n  [39, 40, 43, 44, 46],\r\n];\r\n\r\nconst possibleSeanceStartTimes = [\r\n  ['12:30', '14:30', '16:50', '17:50', '19:20'],\r\n  ['12:30', '14:30', '16:50', '17:50', '19:20'],\r\n  ['12:30', '14:30', '16:50', '17:50', '26:20'],\r\n];\r\n\r\nconst movies = {\r\n  1: {\r\n    id: 1,\r\n    name: 'Властелин колец',\r\n    description:\r\n      'Сказания о Средиземье — это хроника Великой войны за Кольцо, войны, длившейся не одну тысячу лет. Тот, кто владел Кольцом, получал власть над всеми живыми тварями, но был обязан служить злу. \\n' +\r\n      '\\n' +\r\n      'Тихая деревня, где живут хоббиты. Волшебник Гэндальф, придя на 111-й день рождения к своему старому другу Бильбо Бэггинсу, начинает вести разговор о кольце, которое Бильбо нашел много лет назад. Это кольцо принадлежало когда-то темному властителю Средиземья Саурону, и оно дает большую власть своему обладателю. Теперь Саурон хочет вернуть себе власть над Средиземьем. Бильбо отдает найденное кольцо своему племяннику Фродо, который пытается научиться справляться с тем страшным могуществом, которое дает ему кольцо…',\r\n    duration: 178,\r\n    genres: ['Фэнтези', 'Приключения'],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/328.jpg',\r\n    frames: [\r\n      {\r\n        description: 'Властелин колец',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/328.jpg',\r\n      },\r\n      {\r\n        description: 'Властелин колец',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/5/3/kinopoisk.ru-The-Lord-of-the-Rings_3A-The-Fellowship-of-the-Ring-1530919.jpg',\r\n      },\r\n      {\r\n        description: 'Властелин колец',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/5/3/kinopoisk.ru-The-Lord-of-the-Rings_3A-The-Fellowship-of-the-Ring-1530934.jpg',\r\n      },\r\n      {\r\n        description: 'Властелин колец',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/5/3/kinopoisk.ru-The-Lord-of-the-Rings_3A-The-Fellowship-of-the-Ring-1530933.jpg',\r\n      },\r\n      {\r\n        description: 'Властелин колец',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/5/3/kinopoisk.ru-The-Lord-of-the-Rings_3A-The-Fellowship-of-the-Ring-1530932.jpg',\r\n      },\r\n      {\r\n        description: 'Властелин колец',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/5/3/kinopoisk.ru-The-Lord-of-the-Rings_3A-The-Fellowship-of-the-Ring-1530925.jpg',\r\n      },\r\n    ],\r\n  },\r\n  2: {\r\n    id: 2,\r\n    name: 'Хоббит: Битва пяти воинств',\r\n    description: `Когда отряд из тринадцати гномов нанимал хоббита Бильбо Бэгинса в качестве взломщика и четырнадцатого, «счастливого», участника похода к Одинокой горе, Бильбо полагал, что его приключения закончатся, когда он выполнит свою задачу — найдет сокровище, которое так необходимо предводителю гномов Торину. Путешествие в Эребор, захваченное драконом Смаугом королевство гномов, оказалось еще более опасным, чем предполагали гномы и даже Гэндальф — мудрый волшебник, протянувший Торину и его отряду руку помощи.\r\n\r\nВ погоню за гномами устремилась армия орков, ведомых пробудившимся в руинах древним злом, а эльфы и люди, с которыми Бильбо и его товарищам пришлось иметь дело во время путешествия и которые пострадали от последствий желания гномов вернуть свой дом, предъявили права на щедрое вознаграждение — часть сокровищ Одинокой горы. Скоро неподалеку от Одинокой горы встретятся пять армий, и лишь кровопролитная битва определит результаты смелого гномьего похода.`,\r\n    duration: 205,\r\n    genres: ['Фэнтези', 'Приключения'],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/694633.jpg',\r\n    frames: [\r\n      {\r\n        description: 'Хоббит: Битва пяти воинств',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/694633.jpg',\r\n      },\r\n      {\r\n        description: 'Хоббит: Битва пяти воинств',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/5/4/kinopoisk.ru-The-Hobbit_3A-The-Battle-of-the-Five-Armies-2545681.jpg',\r\n      },\r\n      {\r\n        description: 'Хоббит: Битва пяти воинств',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/5/4/kinopoisk.ru-The-Hobbit_3A-The-Battle-of-the-Five-Armies-2545680.jpg',\r\n      },\r\n      {\r\n        description: 'Хоббит: Битва пяти воинств',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/5/4/kinopoisk.ru-The-Hobbit_3A-The-Battle-of-the-Five-Armies-2545678.jpg',\r\n      },\r\n      {\r\n        description: 'Хоббит: Битва пяти воинств',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/5/4/kinopoisk.ru-The-Hobbit_3A-The-Battle-of-the-Five-Armies-2545677.jpg',\r\n      },\r\n      {\r\n        description: 'Хоббит: Битва пяти воинств',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/5/4/kinopoisk.ru-The-Hobbit_3A-The-Battle-of-the-Five-Armies-2545676.jpg',\r\n      },\r\n    ],\r\n  },\r\n  3: {\r\n    id: 3,\r\n    name: 'Видоизмененный углерод',\r\n    description:\r\n      'Земля, XXVII век. Мир, в котором появилась возможность «сгружать» человеческое сознание и личность из одного тела в другое. Идеальный мир и для преступников, и для полицейских, и для армии, но вряд ли идеальный для бывшего военного спецназовца и бывшего повстанца Такеси Ковача, которого миллиардер Бэнкрофт нанял для расследования гибели одного из своих тел. Внешне — явное самоубийство, но Бэнкрофт считает себя неспособным на такой поступок, а воспоминания о последних минутах жизни уничтожены метким выстрелом в запоминающее устройство.',\r\n    duration: 229,\r\n    genres: ['Фантастика', 'Боевик'],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/669089.jpg',\r\n    frames: [\r\n      {\r\n        description: 'Видоизмененный углерод',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/669089.jpg',\r\n      },\r\n      {\r\n        description: 'Видоизмененный углерод',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/0/8/kinopoisk.ru-Altered-Carbon-3089561.jpg',\r\n      },\r\n      {\r\n        description: 'Видоизмененный углерод',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/2/1/kinopoisk.ru-Altered-Carbon-3216791.jpg',\r\n      },\r\n      {\r\n        description: 'Видоизмененный углерод',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/2/1/kinopoisk.ru-Altered-Carbon-3216789.jpg',\r\n      },\r\n      {\r\n        description: 'Видоизмененный углерод',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/2/1/kinopoisk.ru-Altered-Carbon-3216790.jpg',\r\n      },\r\n      {\r\n        description: 'Видоизмененный углерод',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/1/2/kinopoisk.ru-Altered-Carbon-3121337.jpg',\r\n      },\r\n      {\r\n        description: 'Видоизмененный углерод',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/1/2/kinopoisk.ru-Altered-Carbon-3121340.jpg',\r\n      },\r\n    ],\r\n  },\r\n  4: {\r\n    id: 4,\r\n    name: 'Борджиа',\r\n    description:\r\n      'В конце XV века в руках Папы Римского сосредоточилась неограниченная власть: он мог короновать и свергать королей, изменять судьбу империй. Некогда доброе имя церкви стало теперь ассоциироваться только с коррупцией и безнравственностью. В 1492 году, после смерти папы Иннокентия VIII, престол Святого Петра занял Александр VI (в миру Родриго Борджиа), который вписал в историю имя клана Борджиа отнюдь не благими деяниями…',\r\n    duration: 236,\r\n    genres: ['История'],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/521722.jpg',\r\n    frames: [\r\n      {\r\n        description: 'Борджиа',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/521722.jpg',\r\n      },\r\n      {\r\n        description: 'Борджиа',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/1/9/kinopoisk.ru-The-Borgias-2192982.jpg',\r\n      },\r\n      {\r\n        description: 'Борджиа',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/1/9/kinopoisk.ru-The-Borgias-2192979.jpg',\r\n      },\r\n      {\r\n        description: 'Борджиа',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/1/9/kinopoisk.ru-The-Borgias-2192978.jpg',\r\n      },\r\n      {\r\n        description: 'Борджиа',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/1/9/kinopoisk.ru-The-Borgias-2192981.jpg',\r\n      },\r\n      {\r\n        description: 'Борджиа',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/1/9/kinopoisk.ru-The-Borgias-2192977.jpg',\r\n      },\r\n    ],\r\n  },\r\n  5: {\r\n    id: 5,\r\n    name: 'Игра престолов',\r\n    description:\r\n      'К концу подходит время благоденствия, и лето, длившееся почти десятилетие, угасает. Вокруг средоточия власти Семи королевств, Железного трона, зреет заговор, и в это непростое время король решает искать поддержки у друга юности Эддарда Старка. В мире, где все — от короля до наемника — рвутся к власти, плетут интриги и готовы вонзить нож в спину, есть место и благородству, состраданию и любви. Между тем, никто не замечает пробуждение тьмы из легенд далеко на Севере — и лишь Стена защищает живых к югу от нее.',\r\n    duration: 218,\r\n    genres: ['Фэнтези', 'Боевик', 'Драма'],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/464963.jpg',\r\n    frames: [\r\n      {\r\n        description: 'Игра престолов',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/464963.jpg',\r\n      },\r\n      {\r\n        description: 'Игра престолов',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/7/7/kinopoisk.ru-Game-of-Thrones-2777019.jpg',\r\n      },\r\n      {\r\n        description: 'Игра престолов',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/7/8/kinopoisk.ru-Game-of-Thrones-2786695.jpg',\r\n      },\r\n      {\r\n        description: 'Игра престолов',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/0/3/kinopoisk.ru-Game-of-Thrones-3030604.jpg',\r\n      },\r\n      {\r\n        description: 'Игра престолов',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/0/1/kinopoisk.ru-Game-of-Thrones-3019199.jpg',\r\n      },\r\n      {\r\n        description: 'Игра престолов',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/0/1/kinopoisk.ru-Game-of-Thrones-3011410.jpg',\r\n      },\r\n    ],\r\n  },\r\n  6: {\r\n    id: 6,\r\n    name: 'Мстители: Финал',\r\n    description:\r\n      'Оставшиеся в живых члены команды Мстителей и их союзники должны разработать новый план, который поможет противостоять разрушительным действиям могущественного титана Таноса. После наиболее масштабной и трагической битвы в истории они не могут допустить ошибку.',\r\n    duration: 183,\r\n    genres: ['Фантастика', 'Боевик'],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/843650.jpg',\r\n    frames: [\r\n      {\r\n        description: 'Мстители: Финал',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/843650.jpg',\r\n      },\r\n    ],\r\n  },\r\n  7: {\r\n    id: 7,\r\n    name: 'Мстители',\r\n    description: `Локи, сводный брат Тора, возвращается, и в этот раз он не один. Земля на грани порабощения, и только лучшие из лучших могут спасти человечество.\r\n\r\nНик Фьюри, глава международной организации Щ. И. Т., собирает выдающихся поборников справедливости и добра, чтобы отразить атаку. Под предводительством Капитана Америки Железный Человек, Тор, Невероятный Халк, Соколиный глаз и Чёрная Вдова вступают в войну с захватчиком.`,\r\n    duration: 93,\r\n    genres: ['Фантастика', 'Боевик'],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/263531.jpg',\r\n    frames: [\r\n      {\r\n        description: 'Мстители',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/263531.jpg',\r\n      },\r\n    ],\r\n  },\r\n  8: {\r\n    id: 8,\r\n    name: 'Терминатор',\r\n    description:\r\n      'История противостояния солдата Кайла Риза и киборга-терминатора, прибывших в 1984-й год из пост-апокалиптического будущего, где миром правят машины-убийцы, а человечество находится на грани вымирания. Цель киборга: убить девушку по имени Сара Коннор, чей ещё нерождённый сын к 2029 году выиграет войну человечества с машинами. Цель Риза: спасти Сару и остановить Терминатора любой ценой.',\r\n    duration: 85,\r\n    genres: ['Фантастика', 'Боевик', 'Триллер'],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/507.jpg',\r\n    frames: [\r\n      {\r\n        description: 'Терминатор',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/507.jpg',\r\n      },\r\n    ],\r\n  },\r\n  9: {\r\n    id: 9,\r\n    name: 'Терминатор 2: Судный день',\r\n    description: `Прошло более десяти лет с тех пор, как киборг-терминатор из 2029 года пытался уничтожить Сару Коннор — женщину, чей будущий сын выиграет войну человечества против машин.\r\n\r\nТеперь у Сары родился сын Джон и время, когда он поведёт за собой выживших людей на борьбу с машинами, неумолимо приближается. Именно в этот момент из постапокалиптического будущего прибывает новый терминатор — практически неуязвимый и способный принимать любое обличье. Цель нового терминатора уже не Сара, а уничтожение молодого Джона Коннора.\r\n\r\nОднако шансы Джона на спасение существенно повышаются, когда на помощь приходит перепрограммированный сопротивлением терминатор предыдущего поколения. Оба киборга вступают в смертельный бой, от исхода которого зависит судьба человечества.`,\r\n    duration: 157,\r\n    genres: ['Фантастика', 'Боевик', 'Триллер'],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/444.jpg',\r\n    frames: [\r\n      {\r\n        description: 'Терминатор 2: Судный день',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/444.jpg',\r\n      },\r\n    ],\r\n  },\r\n  10: {\r\n    id: 10,\r\n    name: 'Терминатор 3: Восстание машин',\r\n    description: `Прошло десять лет с тех пор, как Джон Коннор помог предотвратить Судный День и спасти человечество от массового уничтожения. Теперь ему 25, Коннор не живет «как все» — у него нет дома, нет кредитных карт, нет сотового телефона и никакой работы.\r\n\r\nЕго существование нигде не зарегистрировано. Он не может быть прослежен системой Skynet — высокоразвитой сетью машин, которые когда-то попробовали убить его и развязать войну против человечества. Пока из теней будущего не появляется T-X — Терминатрикс, самый сложный киборг-убийца Skynet.\r\n\r\nПосланная назад сквозь время, чтобы завершить работу, начатую её предшественником, T-1000, эта машина так же упорна, как прекрасен её человеческий облик. Теперь единственная надежда Коннору выжить — Терминатор, его таинственный прежний убийца. Вместе они должны одержать победу над новыми технологиями T-X и снова предотвратить Судный День…`,\r\n    duration: 60,\r\n    genres: ['Фантастика', 'Боевик', 'Триллер'],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/319.jpg',\r\n    frames: [\r\n      {\r\n        description: 'Терминатор 3: Восстание машин',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/319.jpg',\r\n      },\r\n    ],\r\n  },\r\n};\r\n","import { getMovie, getMovies, getSeances } from '../../../mocks/movies';\r\n\r\nfunction fetchMovies(date) {\r\n  return new Promise(resolve => {\r\n    setTimeout(() => resolve(getMovies(date)), 1000);\r\n  });\r\n}\r\n\r\nfunction fetchMovie(id) {\r\n  return new Promise(resolve => {\r\n    setTimeout(() => resolve(getMovie(id)), 1000);\r\n  });\r\n}\r\n\r\nfunction fetchSeances(movieId, date) {\r\n  return new Promise(resolve => {\r\n    setTimeout(() => resolve(getSeances(movieId, date)), 1000);\r\n  });\r\n}\r\n\r\nexport { fetchMovies, fetchMovie, fetchSeances };","import {\r\n  all,\r\n  call,\r\n  takeLatest,\r\n  put,\r\n} from 'redux-saga/dist/redux-saga-effects-npm-proxy.esm';\r\n\r\nimport {\r\n  fetchMovieError,\r\n  fetchMoviesError,\r\n  fetchMoviesSuccess,\r\n  fetchMovieSuccess,\r\n  fetchSeancesError,\r\n  fetchSeancesSuccess,\r\n} from './actions';\r\n\r\nimport { FETCH_MOVIE, FETCH_MOVIES, FETCH_SEANCES } from './action-types';\r\nimport * as services from './services';\r\n\r\nfunction* fetchMovies({ date }) {\r\n  try {\r\n    const movies = yield call(services.fetchMovies, date);\r\n    yield put(fetchMoviesSuccess(movies));\r\n  } catch (e) {\r\n    yield put(fetchMoviesError(e));\r\n  }\r\n}\r\n\r\nfunction* fetchMovie({ id }) {\r\n  try {\r\n    const movie = yield call(services.fetchMovie, id);\r\n    yield put(fetchMovieSuccess(movie));\r\n  } catch (e) {\r\n    yield put(fetchMovieError(e));\r\n  }\r\n}\r\n\r\nfunction* fetchSeances({ movieId, date }) {\r\n  try {\r\n    const seances = yield call(services.fetchSeances, movieId, date);\r\n    yield put(fetchSeancesSuccess(seances));\r\n  } catch (e) {\r\n    yield put(fetchSeancesError(e));\r\n  }\r\n}\r\n\r\nexport function* watchMoviesRequests() {\r\n  yield all([\r\n    takeLatest(FETCH_MOVIES.REQUEST, fetchMovies),\r\n    takeLatest(FETCH_MOVIE.REQUEST, fetchMovie),\r\n    takeLatest(FETCH_SEANCES.REQUEST, fetchSeances),\r\n  ]);\r\n}\r\n","export function reserveTicketsRequest(seanceId, seatsId) {\r\n  return new Promise(resolve => {\r\n    setTimeout(() => {\r\n      resolve([seanceId, seatsId]);\r\n    }, 1000);\r\n  });\r\n}\r\n\r\nexport function payTicketsRequest(seanceId, seatsId) {\r\n  return new Promise(resolve => {\r\n    setTimeout(() => {\r\n      resolve([seanceId, seatsId]);\r\n    }, 1000);\r\n  });\r\n}\r\n","import { all, call, takeLatest, put } from 'redux-saga/effects';\r\n\r\nimport {\r\n  payTicketsError,\r\n  payTicketsSuccess,\r\n  reserveTicketsError,\r\n  reserveTicketsSuccess,\r\n} from './actions';\r\nimport { PAY_TICKETS, RESERVE_TICKETS } from './action-types';\r\nimport * as services from './services';\r\n\r\nfunction* reserveTickets({ seanceId, seatsId }) {\r\n  try {\r\n    const [reservedSeanceId, reservedSeatsId] = yield call(\r\n      services.reserveTicketsRequest,\r\n      seanceId,\r\n      seatsId,\r\n    );\r\n    yield put(reserveTicketsSuccess(reservedSeanceId, reservedSeatsId));\r\n  } catch (e) {\r\n    yield put(reserveTicketsError());\r\n  }\r\n}\r\n\r\nfunction* payTickets({ seanceId, seatsId }) {\r\n  try {\r\n    const [payedSeanceId, payedSeatsId] = yield call(\r\n      services.payTicketsRequest,\r\n      seanceId,\r\n      seatsId,\r\n    );\r\n    yield put(payTicketsSuccess(payedSeanceId, payedSeatsId));\r\n  } catch (e) {\r\n    yield put(payTicketsError(e));\r\n  }\r\n}\r\n\r\nexport function* watchTicketsRequests() {\r\n  yield all([\r\n    takeLatest(RESERVE_TICKETS.REQUEST, reserveTickets),\r\n    takeLatest(PAY_TICKETS.REQUEST, payTickets),\r\n  ]);\r\n}\r\n","import { all, call } from 'redux-saga/effects';\r\nimport { watchMoviesRequests } from '../ducks/data/movies/sagas';\r\nimport { watchTicketsRequests } from '../ducks/data/tickets/sagas';\r\n\r\nexport default function* rootSaga() {\r\n  yield all([call(watchMoviesRequests), call(watchTicketsRequests)]);\r\n}\r\n","import createSagaMiddleware from 'redux-saga';\r\n\r\nimport { applyMiddleware, createStore } from 'redux';\r\nimport { routerMiddleware } from 'connected-react-router';\r\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly';\r\n\r\nimport { rootReducer, history } from './rootReducer';\r\nimport rootSaga from './rootSaga';\r\n\r\nconst navigationMiddleware = routerMiddleware(history);\r\nconst sagaMiddleware = createSagaMiddleware();\r\nconst initialState = {};\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  initialState,\r\n  composeWithDevTools(applyMiddleware(navigationMiddleware, sagaMiddleware)),\r\n);\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport { store };\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { ConnectedRouter } from 'connected-react-router';\r\nimport { Provider } from 'react-redux';\r\nimport moment from 'moment';\r\n\r\nimport { App } from './components/app-components/app';\r\nimport { history } from './store/rootReducer';\r\nimport { store } from './store/store';\r\n\r\nimport './assets/scss/reset.scss';\r\nimport './assets/scss/main.scss';\r\nimport './index.scss';\r\n\r\nmoment.locale('ru');\r\n\r\nconst nominative_months = [\r\n  'Январь',\r\n  'Февраль',\r\n  'Март',\r\n  'Апрель',\r\n  'Май',\r\n  'Июнь',\r\n  'Июль',\r\n  'Август',\r\n  'Сентябрь',\r\n  'Октябрь',\r\n  'Ноябрь',\r\n  'Декабрь',\r\n];\r\n\r\nconst subjective_months = [\r\n  'Января',\r\n  'Февраля',\r\n  'Мара',\r\n  'Апреля',\r\n  'Мая',\r\n  'Июня',\r\n  'Июля',\r\n  'Августа',\r\n  'Сентября',\r\n  'Октября',\r\n  'Ноября',\r\n  'Декабря',\r\n];\r\n\r\nmoment.updateLocale('ru', {\r\n  months(momentToFormat, format) {\r\n    if (/^MMMM/.test(format)) {\r\n      return nominative_months[momentToFormat.month()];\r\n    }\r\n    return subjective_months[momentToFormat.month()];\r\n  },\r\n  weekdaysShort: ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'],\r\n  weekdaysMin: ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'],\r\n});\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ConnectedRouter history={history}>\r\n      <App />\r\n    </ConnectedRouter>\r\n  </Provider>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n"],"sourceRoot":""}