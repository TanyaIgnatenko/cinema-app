{"version":3,"sources":["assets/images/sad-icon.svg","assets/images/light-arrow-left.svg","assets/images/dark-arrow-left.svg","assets/images/dark-cross-icon.svg","assets/images/light-cross-icon.svg","assets/images/down-arrow.svg","assets/images/search-icon.svg","assets/images/congrat-icon.svg","assets/images/cropped-screen.svg","components/app-components/navbar/NavLink/NavLink.js","components/base-components/Button/Button.js","utils/time.js","constants.js","ducks/ui/modals/actions.js","ducks/ui/modals/action-types.js","components/app-components/navbar/NavBar.js","components/app-components/bestDeals/BestDealsPage/BestDealsPage.js","components/base-components/Gallery/GalleryViewer/GalleryViewer.js","components/base-components/Gallery/Gallery.js","components/app-components/common/Spinner/Spinner.js","components/app-components/common/ErrorPage/ErrorPage.js","components/base-components/Tooltip/Tooltip.js","components/app-components/movies/utils/movies.js","components/app-components/movies/common/Seances/Seances.js","components/app-components/common/NoScheduleComponent/NoScheduleComponent.js","components/app-components/common/NotFoundComponent/NotFoundComponent.js","ducks/data/movies/selectors.js","ducks/data/movies/action-types.js","ducks/data/movies/actions.js","components/app-components/movies/movie-page/SeancesList/SeancesList.js","components/base-components/ButtonNext/ButtonNext.js","components/base-components/ButtonPrev/ButtonPrev.js","utils/date.js","components/base-components/Calendar/Calendar.js","utils/array.js","components/base-components/ToggleIcon/ToggleIcon.js","components/base-components/Toggle/Toggle.js","components/base-components/DateFilter/DateInput/DateInput.js","components/base-components/DateFilter/FrequentDateButton/FrequentDateButton.js","components/base-components/DateFilter/DateFilter.js","components/base-components/DateFilter/DateFilterContext.js","components/app-components/movies/movies-page/DateFilter/DateFilter.js","components/app-components/common/NotFoundPage/NotFoundPage.js","components/base-components/RangeSlider/SliderWireframe/SliderWireframe.js","components/base-components/RangeSlider/utils/array.js","components/base-components/RangeSlider/utils/clamp.js","components/base-components/RangeSlider/SelectedRange/SelectedRange.js","components/base-components/RangeSlider/Handle/Handle.js","components/base-components/RangeSlider/RangeSlider.js","components/app-components/movies/movie-page/MoviePage.js","components/app-components/movies/movies-page/Search/Search.js","components/app-components/movies/movies-page/Movie/Movie.js","utils/routes.js","components/app-components/movies/movies-page/MoviesList/MoviesList.js","components/app-components/movies/movies-page/MoviesPage.js","components/app-components/routes/Routes.js","components/base-components/Modal/Modal.js","components/app-components/common/StatusModal/StatusModal.js","components/app-components/seanceTickets/ReservationFailureModal/ReservationFailureModal.js","components/app-components/auth/NotAvailableAuthModal/NotAvailableAuthModal.js","components/app-components/ticketsPayment/PaymentSuccessModal/PaymentSuccessModal.js","hooks/useInputState.js","ducks/data/tickets/selectors.js","ducks/data/tickets/action-types.js","ducks/data/tickets/actions.js","components/app-components/ticketsPayment/TicketsPaymentPage/TicketsPaymentPage.js","hooks/useFocusState.js","components/app-components/ticketsPayment/TicketsPaymentModal/TicketsPaymentModal.js","components/app-components/seanceTickets/SeanceTicketsPage/SeanceTicketsPage.js","components/app-components/seanceTickets/SeanceTicketsModal/SeanceTicketsModal.js","components/app-components/ticketsPayment/PaymentFailureModal/PaymentFailureModal.js","ducks/ui/modals/selectors.js","components/base-components/ModalManager/ModalManager.js","components/base-components/ScrollToTop/ScrollToTop.js","components/app-components/app/App.js","ducks/data/movies/reducer.js","ducks/data/tickets/reducer.js","ducks/ui/modals/reducer.js","store/rootReducer.js","mocks/movies.js","ducks/data/movies/services.js","ducks/data/movies/sagas.js","ducks/data/tickets/services.js","ducks/data/tickets/sagas.js","store/rootSaga.js","store/store.js","index.js"],"names":["module","exports","__webpack_require__","p","NavLink","_ref","to","location","children","linkClassName","linkBoxClassName","activeLinkClassName","isActive","activeLinkBoxClassName","Object","objectWithoutProperties","pathname","react_default","a","createElement","data-testid","className","classNames","active-link-box","react_router_dom","active-link","defaultProps","withRouter","Button","props","assign","type","MINUTES_IN_HOUR","toTimeLabel","minutes","hours","Math","floor","minutesRest","concat","ROUTE","MOVIES","MOVIE","SOON_MOVIES","BEST_DEALS","MODAL","SEANCE_TICKETS","TICKETS_PAYMENT","PAYMENT_SUCCESS","NOT_AVAILABLE_AUTH","RESERVATION_FAILURE","PAYMENT_FAILURE","STATUS","SUCCESS","ERROR","REQUEST","IDLE","SEANCES_TIME_RANGE","start","end","RUSSIAN_CURRENCY_SYMBOL","showModal","modalType","modalProps","closeModal","mapDispatchToProps","connect","showNotAvailableAuthModal","useCallback","navbar_NavLink_NavLink","base_components_Button_Button","onClick","BestDealsPage","alt","src","sadnessIcon","GalleryViewer","items","selectedItemIdx","selectItem","closeViewer","es2015","onEscapeKey","length","aria-label","tabIndex","crossIcon","url","description","MAX_PREVIEWS_COUNT","Gallery","hasAtLeastOneItem","Boolean","primaryItem","itemsWithPreviewsCount","min","hasAtLeastOneItemWithPreview","itemsWithPreviews","slice","hiddenItems","hasAtLeastOneHiddenItem","_useState","useState","_useState2","slicedToArray","setSelectedItem","_useState3","_useState4","showItem","setShowItem","handleItemClick","itemIdx","Fragment","map","itemWithPreview","idx","key","Gallery_GalleryViewer_GalleryViewer","Spinner","message","reloadPage","window","reload","ErrorPage","Tooltip","keepSeancesAt","date","timeRange","seances","hasAtLeastOneSeance","seancesFormats","keys","filteredSeances","momentRange","moment","add","forEach","format","filter","seance","unix","startTime","isBetween","hasStarted","now","isSameOrBefore","Seances","movieName","goToSeanceTicketsPage","objectSpread","disabled","base_components_Tooltip_Tooltip","price","NoScheduleComponent","NotFoundComponent","resetSettings","selectMovies","state","movies","selectSelectedMovie","selectedMovie","selectSelectedMovieSeances","selectedMovieSeances","selectMoviesError","error","FETCH_MOVIES","FETCH_MOVIE","FETCH_SEANCES","fetchMoviesSuccess","fetchMoviesError","fetchMovieSuccess","movie","fetchMovieError","fetchSeancesSuccess","fetchSeancesError","SEANCES_STATE","LOADING","SCHEDULE_NOT_EXIST","NOT_FOUND","FOUND","SeancesList","selectedRange","selectedDate","resetFiltersSettings","selectedSeances","useMemo","_","isEmpty","getSeancesState","common_NoScheduleComponent_NoScheduleComponent","common_NotFoundComponent_NotFoundComponent","common_Seances_Seances","fetchSeances","movieId","_ref2","useEffect","SeancesList_SeancesList","common_Spinner_Spinner","ButtonNext","lightArrowLeft","darkArrowLeft","ButtonPrev","toMoment","toAppDateFormat","momentDate","getTodayStartMoment","startOf","getTodayDate","getTomorrowDate","getDateAfterTomorrow","getEndDateOfSixthMonthFromCurrent","endOf","bindTimeToDayMoment","time","dayMoment","clone","duration","momentToUnixTime","extendMoment","Moment","Calendar","selectedMonth","_this","initialMonth","handleNextMonthClick","setState","nextMonthMoment","handlePrevMonthClick","prevMonthMoment","subtract","handleDateSelected","_this$props","onDateSelected","onDateLeave","closeOnSelect","closeCalendar","handleClickOutside","_this2","this","_this$props2","minDate","maxDate","onDateEnter","selectedMonthMoment","startMonthDate","endMonthDate","monthDates","startDate","endDate","currentDate","dateRange","push","startEmptyDays","step","arguments","undefined","range","i","Number","minMoment","maxMoment","prevMonthBtnEnabled","isValid","isBefore","nextMonthBtnEnabled","isAfter","base_components_ButtonPrev_ButtonPrev","base_components_ButtonNext_ButtonNext","day","enabledDate","isSameOrAfter","onMouseEnter","onMouseLeave","React","Component","onClickOutside","ToggleIcon","on","downArrowIcon","Toggle","openByDefault","toggle","open","close","DateInput","defaultLabel","getDateLabel","shouldShowSelectedDate","active","buttonLabel","setButtonLabel","_useContext","useContext","DateFilterContext","selectDate","base_components_Toggle_Toggle","base_components_ToggleIcon_ToggleIcon","base_components_Calendar_Calendar","FrequentDateButton","label","isSelected","DateFilter","DateFilter_DateFilterContext","Provider","value","createContext","TODAY_LABEL","TOMORROW_LABEL","DEFAULT_DATE_INPUT_LABEL","DateFilterWrapper","_datesLabels","today","tomorrow","dayAfterTomorrow","DAY_AFTER_TOMORROW_LABEL","shouldShowSelectedDateOnDateInput","datesLabels","defineProperty","base_components_DateFilter_DateFilter","NotFoundPage","Wireframe","max","valuePerStep","formatLabel","labelMarkStep","rangeUnits","makeRange","lastUnit","isFirstStep","unit","islabelMarkStep","first","clamp","SelectedRange","cursorShift","grab","event","target","cursorX","pageX","onChangeStart","selectedRangeLeft","getBoundingClientRect","left","document","addEventListener","move","release","stopPropagation","preventDefault","cursorPageValue","normalizedRange","onChange","normalizeValue","pagePositionToNormalizedValue","normalizedRangeLength","newNormalizedRangeStart","newNormalizedRangeEnd","newNormalizedRange","isEqual","removeEventListener","onChangeEnd","selectedRangeRef","selectedRangeStart","selectedRangeLength","abs","ref","style","width","onPointerDown","Handle","handle","name","handleLeft","cursorPagePosition","oldValue","normalizedValue","newValue","_this$props3","_this$props4","handleRef","transform","MODE","DRAG","RangeSlider","mode","firstHandleName","secondHandleName","handleResize","measureElementsSize","handleChangeStart","switchToDragMode","handleChangeEnd","switchToIdleMode","animateSelectedRangeRounding","finishSelectedRangeRoundingAnimation","classList","remove","firstHandle","secondHandle","handleHandleValueChange","absoluteRangeToNormalized","swapHandlesWhileDrag","handleSelectedRangeChange","absoluteRange","normalizedRangeToAbsolute","roundValue","round","normalizedValueToAbsolute","absoluteValueToNormalized","absoluteValue","position","sliderLeft","sliderWidth","setSliderRef","slider","setSelectedRangeRef","setFirstHandleRef","setSecondHandleRef","nextProps","nextState","stateChanged","propsChanged","_this$slider$getBound","setTimeout","handlesSwappedWhileDrag","getSelectedRange","normalizedSelectedRange","RangeSlider_Handle_Handle","RangeSlider_SelectedRange_SelectedRange","SliderWireframe_SliderWireframe","MoviePage","setSelectedDate","setSelectedRange","base_components_Gallery_Gallery","frames","htmlFor","id","genres","join","movies_movies_page_DateFilter_DateFilter","base_components_RangeSlider_RangeSlider","movie_page_SeancesList_SeancesList","fetchMovie","match","NotFoundPage_NotFoundPage","common_ErrorPage_ErrorPage","parseInt","params","MoviePage_MoviePage","Search","hint","placeholder","onHintChange","resetHint","searchIcon","Movie","poster","history","goToMoviePage","apiURL","replacer","replace","createRoute","MOVIES_STATE","MoviesList","movieHint","selectedMovies","toLowerCase","includes","trim","getMoviesState","movies_page_Movie_Movie","fetchMovies","MoviesList_MoviesList","MOVIE_SEARCH_PLACEHOLDER","MoviesPage","setMovieHint","_useState5","_useState6","movies_page_Search_Search","movies_page_MoviesList_MoviesList","react_router","exact","path","component","MoviePageContainer","Modal","onClose","showCloseIcon","isOpen","statusMsg","icon","closeButtonLabel","base_components_Modal_Modal","ReservationFailureModal","common_StatusModal_StatusModal","NotAvailableAuthModal","PaymentSuccessModal","congratIcon","useInputState","initialValue","_ref$shouldMatch","shouldMatch","_ref$required","required","input","setInput","touched","setTouched","handleInputChange","handleBlur","valid","matchPattern","test","selectReservationStatus","tickets","reservationStatus","selectPaymentStatus","paymentStatus","RESERVE_TICKETS","PAY_TICKETS","reserveTicketsSuccess","seanceId","reservedSeatsId","reserveTicketsError","resetReservationStatus","payTicketsSuccess","seatsId","payTicketsError","resetPaymentStatus","payTickets","orderDetails","_useInputState","_useInputState2","number","handleNumberChange","handleNumberBlur","numberValid","numberTouched","_useInputState3","_useInputState4","handleNameChange","handleNameBlur","nameValid","nameTouched","_useInputState5","_useInputState6","expiry","handleExpiryChange","handleExpiryBlur","expiryValid","expiryTouched","_useInputState7","_useInputState8","cvc","handleCvcChange","handleCvcBlur","cvcValid","cvcTouched","allValid","_useFocusState","focused","setFocus","useFocusState","_useFocusState2","handleFocusChange","ticketsCount","declint","handleSubmit","showPaymentSuccessModal","showPaymentFailureModal","console","totalPrice","react_credit_cards_es","placeholders","maxLength","onFocus","onBlur","ticketsPaymentPageProps","handleModalClose","ticketsPayment_TicketsPaymentPage_TicketsPaymentPage","reserveTickets","hallScheme","takenSeats","reservedSeats","selectedSeats","setSelectedSeats","selectSeat","seatId","seatToSelect","unselectSeat","idxToRemoveAt","findIndex","seat","newSelectedSeats","toConsumableArray","splice","seatsAreNotSelected","reduce","buyTickets","goToTicketsPayment","showReservationFailureModal","seanceMoment","seanceDateAppearance","seanceStartTimeAppearance","data","hallScreen","height","row","seats","isAvailable","find","selectedSeat","uniqueId","seanceTicketsPageProps","seanceTickets_SeanceTicketsPage_SeanceTicketsPage","PaymentFailureModal","selectModalsToShow","modals","modalsToShow","MODAL_COMPONENTS","_MODAL_COMPONENTS","SeanceTicketsModal","TicketsPaymentModal","modal","SpecificModalComponent","ScrollToTop","scrollTo","PropTypes","any","isRequired","shape","string","App","currentUser","base_components_ScrollToTop_ScrollToTop","ModalManager_ModalManager","navbar_NavBar","onLogout","onSettings","routes_Routes","initialState","createBrowserHistory","rootReducer","combineReducers","router","connectRouter","action","reservationCancelled","paymentCancelled","daysWithSchedule","getMovies","dayStartMoment","generatedMovies","generateSeancesFor","generateMoviesFor","seanceStartTimes2D","possibleSeanceStartTimes","3D","generateSeancesAt","2D","seanceStartTimes","Infinity","possibleTakenSeats","possibleReservedSeats","NotFoundError","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Error","1","2","3","4","5","6","7","8","9","10","11","Promise","resolve","getMovie","getSeances","watchMoviesRequests","regenerator_default","wrap","_context","prev","next","services","sent","put","t0","stop","_marked","_context2","_marked2","_ref3","_context3","_marked3","_context4","all","takeLatest","_marked4","reserveTicketsRequest","payTicketsRequest","watchTicketsRequests","reservedSeanceId","sagas_marked","_ref4","_ref5","_ref6","payedSeanceId","payedSeatsId","sagas_marked2","sagas_marked3","rootSaga","rootSaga_marked","navigationMiddleware","routerMiddleware","sagaMiddleware","createSagaMiddleware","store","createStore","composeWithDevTools","applyMiddleware","run","locale","nominative_months","subjective_months","updateLocale","months","momentToFormat","month","weekdaysShort","weekdaysMin","ReactDOM","render","es","esm","app_App","getElementById"],"mappings":"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","file":"static/js/main.31aa83ad.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sad-icon.a0e48e08.svg\";","module.exports = __webpack_public_path__ + \"static/media/light-arrow-left.76c47b79.svg\";","module.exports = __webpack_public_path__ + \"static/media/dark-arrow-left.eda10a91.svg\";","module.exports = __webpack_public_path__ + \"static/media/dark-cross-icon.b2320be2.svg\";","module.exports = __webpack_public_path__ + \"static/media/light-cross-icon.e1b38e08.svg\";","module.exports = __webpack_public_path__ + \"static/media/down-arrow.d51c4cbd.svg\";","module.exports = __webpack_public_path__ + \"static/media/search-icon.2e5a42b6.svg\";","module.exports = __webpack_public_path__ + \"static/media/congrat-icon.b052a4be.svg\";","module.exports = __webpack_public_path__ + \"static/media/cropped-screen.a6343b03.svg\";","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { Link, withRouter } from 'react-router-dom';\r\n\r\nimport './NavLink.scss';\r\n\r\nfunction NavLink({\r\n  to,\r\n  location,\r\n  children,\r\n  linkClassName,\r\n  activeLinkClassName,\r\n  linkBoxClassName,\r\n  activeLinkBoxClassName,\r\n  ...props\r\n}) {\r\n  const isActive = to === location.pathname;\r\n  return (\r\n    <li\r\n      data-testid='link-box'\r\n      className={classNames('link-box', linkBoxClassName, {\r\n        'active-link-box': isActive,\r\n        activeLinkBoxClassName: isActive,\r\n      })}\r\n    >\r\n      <Link\r\n        to={to}\r\n        data-testid='link'\r\n        className={classNames('link', linkClassName, {\r\n          'active-link': isActive,\r\n          activeLinkClassName: isActive,\r\n        })}\r\n      >\r\n        {children}\r\n      </Link>\r\n    </li>\r\n  );\r\n}\r\n\r\nNavLink.propTypes = {\r\n  to: PropTypes.string.isRequired,\r\n  location: PropTypes.object.isRequired,\r\n  children: PropTypes.any.isRequired,\r\n  linkClassName: PropTypes.string,\r\n  linkBoxClassName: PropTypes.string,\r\n  activeLinkClassName: PropTypes.string,\r\n  activeLinkBoxClassName: PropTypes.string,\r\n};\r\n\r\nNavLink.defaultProps = {\r\n  linkClassName: '',\r\n  linkBoxClassName: '',\r\n  activeLinkClassName: '',\r\n  activeLinkBoxClassName: '',\r\n};\r\n\r\nexport default withRouter(NavLink);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport './Button.scss';\r\n\r\nfunction Button({ children, className, ...props }) {\r\n  return (\r\n    <button\r\n      type='button'\r\n      className={classNames('button', className)}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  children: PropTypes.any.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nButton.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default Button;\r\n","const MINUTES_IN_HOUR = 60;\r\nconst HOURS_IN_DAY = 24;\r\n\r\nconst toTimeLabel = minutes => {\r\n  const hours = Math.floor(minutes / MINUTES_IN_HOUR) % HOURS_IN_DAY;\r\n  let minutesRest = minutes % MINUTES_IN_HOUR;\r\n  minutesRest = minutesRest < 10 ? `0${minutesRest}` : minutesRest;\r\n  return `${hours}:${minutesRest}`;\r\n};\r\n\r\nexport { toTimeLabel, MINUTES_IN_HOUR, HOURS_IN_DAY };\r\n","import { MINUTES_IN_HOUR } from './utils/time';\r\n\r\nconst ROUTE = {\r\n  MOVIES: '/movies-page',\r\n  MOVIE: '/movie-page/:id',\r\n  SOON_MOVIES: '/soon-movies-page',\r\n  BEST_DEALS: '/best-deals',\r\n};\r\n\r\nconst MODAL = {\r\n  SEANCE_TICKETS: 'SEANCE_TICKETS',\r\n  TICKETS_PAYMENT: 'TICKETS_PAYMENT',\r\n  PAYMENT_SUCCESS: 'PAYMENT_SUCCESS',\r\n  NOT_AVAILABLE_AUTH: 'NOT_AVAILABLE_AUTH',\r\n  RESERVATION_FAILURE: 'RESERVATION_FAILURE',\r\n  PAYMENT_FAILURE: 'PAYMENT_FAILURE',\r\n};\r\n\r\nconst STATUS = {\r\n  SUCCESS: 'SUCCESS',\r\n  ERROR: 'ERROR',\r\n  REQUEST: 'REQUEST',\r\n  IDLE: 'IDLE',\r\n};\r\n\r\nconst APP_DATE_FORMAT = 'YYYY-MM-DD';\r\n\r\nconst SEANCES_TIME_RANGE = {\r\n  start: 10 * MINUTES_IN_HOUR,\r\n  end: 26 * MINUTES_IN_HOUR,\r\n};\r\n\r\nconst RUSSIAN_CURRENCY_SYMBOL = '\\u20BD';\r\n\r\nexport {\r\n  ROUTE,\r\n  APP_DATE_FORMAT,\r\n  SEANCES_TIME_RANGE,\r\n  MODAL,\r\n  STATUS,\r\n  RUSSIAN_CURRENCY_SYMBOL,\r\n};\r\n","import { CLOSE_MODAL, SHOW_MODAL } from './action-types';\r\n\r\nconst showModal = (modalType, modalProps) => ({\r\n  type: SHOW_MODAL,\r\n  modalType,\r\n  modalProps,\r\n});\r\n\r\nconst closeModal = () => ({\r\n  type: CLOSE_MODAL,\r\n});\r\n\r\nexport { showModal, closeModal };\r\n","const SHOW_MODAL = '@@modals/SHOW_MODAL';\r\n\r\nconst CLOSE_MODAL = '@@modals/CLOSE_MODAL';\r\n\r\nexport { SHOW_MODAL, CLOSE_MODAL };\r\n","import React, { useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { NavLink } from './NavLink';\r\nimport { Button } from '../../base-components/Button';\r\nimport { MODAL, ROUTE } from '../../../constants';\r\nimport { showModal } from '../../../ducks/ui/modals/actions';\r\n\r\nimport './NavBar.scss';\r\n\r\nfunction NavBar({ showModal }) {\r\n  const showNotAvailableAuthModal = useCallback(() => {\r\n    showModal(MODAL.NOT_AVAILABLE_AUTH);\r\n  }, []);\r\n\r\n  return (\r\n    <header className='navBarContainer'>\r\n      <ul className='leftPart'>\r\n        <h1 className='brand'> </h1>\r\n        <NavLink linkBoxClassName='movies-link' to={ROUTE.MOVIES}>\r\n            \r\n        </NavLink>\r\n        <NavLink linkBoxClassName='best-deals-link' to={ROUTE.BEST_DEALS}>\r\n          \r\n        </NavLink>\r\n      </ul>\r\n      <div className='rightPart'>\r\n        <Button className='login-btn' onClick={showNotAvailableAuthModal}>\r\n          \r\n        </Button>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nNavBar.propTypes = {\r\n  showModal: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  showModal,\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps,\r\n)(NavBar);\r\n","import React from 'react';\r\n\r\nimport sadnessIcon from '../../../../assets/images/sad-icon.svg';\r\n\r\nimport './BestDealsPage.scss';\r\n\r\nfunction BestDealsPage() {\r\n  return (\r\n    <p className='page-info'>\r\n       ,      {' '}\r\n      <img alt='' className='sadness-icon' src={sadnessIcon} />\r\n    </p>\r\n  );\r\n}\r\n\r\nexport default BestDealsPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FocusOn } from 'react-focus-on';\r\n\r\nimport crossIcon from '../../../../assets/images/light-cross-icon.svg';\r\n\r\nimport './GalleryViewer.scss';\r\n\r\nfunction GalleryViewer({ items, selectedItemIdx, selectItem, closeViewer }) {\r\n  const handleNextItemClick = () =>\r\n    selectItem((selectedItemIdx + 1) % items.length);\r\n  const handlePreviousItemClick = () =>\r\n    selectItem((items.length + selectedItemIdx - 1) % items.length);\r\n\r\n  return (\r\n    <FocusOn onEscapeKey={closeViewer}>\r\n      <div className='gallery-popup'>\r\n        <div className='popup-header'>\r\n          <p className='item-number-info'>\r\n            {`${selectedItemIdx + 1}  ${items.length}`}\r\n          </p>\r\n          <input\r\n            type='image'\r\n            alt='close'\r\n            aria-label='close'\r\n            tabIndex={0}\r\n            className='close-icon smoothly-enhance-on-hover'\r\n            src={crossIcon}\r\n            onClick={closeViewer}\r\n          />\r\n        </div>\r\n        <div className='popup-content'>\r\n          <img\r\n            alt='item'\r\n            className='item-content'\r\n            src={items[selectedItemIdx].url}\r\n          />\r\n          <button\r\n            aria-label='previous'\r\n            tabIndex={0}\r\n            className='btn-prev smoothly-enhance-on-hover'\r\n            onClick={handlePreviousItemClick}\r\n          />\r\n          <button\r\n            aria-label='next'\r\n            tabIndex={0}\r\n            className='btn-next smoothly-enhance-on-hover'\r\n            onClick={handleNextItemClick}\r\n          />\r\n        </div>\r\n        <div className='popup-footer'>\r\n          <p className='item-description'>\r\n            {items[selectedItemIdx].description}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </FocusOn>\r\n  );\r\n}\r\n\r\nGalleryViewer.propTypes = {\r\n  items: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      description: PropTypes.string.isRequired,\r\n      url: PropTypes.string.isRequired,\r\n    }).isRequired,\r\n  ).isRequired,\r\n  selectedItemIdx: PropTypes.number.isRequired,\r\n  selectItem: PropTypes.func.isRequired,\r\n  closeViewer: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default GalleryViewer;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { GalleryViewer } from './GalleryViewer';\r\n\r\nimport './Gallery.scss';\r\n\r\nconst MAX_PREVIEWS_COUNT = 4;\r\n\r\nfunction Gallery({ items, className }) {\r\n  const hasAtLeastOneItem = Boolean(items.length);\r\n  const primaryItem = items[0];\r\n\r\n  const itemsWithPreviewsCount = Math.min(items.length - 1, MAX_PREVIEWS_COUNT);\r\n  const hasAtLeastOneItemWithPreview = Boolean(itemsWithPreviewsCount);\r\n  const itemsWithPreviews = items.slice(1, itemsWithPreviewsCount + 1);\r\n\r\n  const hiddenItems = items.slice(itemsWithPreviewsCount + 1);\r\n  const hasAtLeastOneHiddenItem = Boolean(hiddenItems.length);\r\n\r\n  const [selectedItemIdx, setSelectedItem] = useState(0);\r\n  const [showItem, setShowItem] = useState(false);\r\n\r\n  const handleItemClick = itemIdx => {\r\n    setSelectedItem(itemIdx);\r\n    setShowItem(true);\r\n  };\r\n\r\n  const closeViewer = () => {\r\n    setShowItem(false);\r\n  };\r\n\r\n  return (\r\n    hasAtLeastOneItem && (\r\n      <div className={classNames('gallery', className)}>\r\n        <div className='primary-item-container'>\r\n          <img\r\n            alt='primary item'\r\n            className='primary-item'\r\n            src={primaryItem.url}\r\n            onClick={() => handleItemClick(0)}\r\n          />\r\n        </div>\r\n        {hasAtLeastOneItemWithPreview && (\r\n          <div className='items-previews-container'>\r\n            <>\r\n              {itemsWithPreviews.map((itemWithPreview, idx) => (\r\n                <div\r\n                  key={itemWithPreview.url}\r\n                  className='item-preview-container'\r\n                  onClick={() => handleItemClick(idx + 1)}\r\n                >\r\n                  <img\r\n                    alt='item preview'\r\n                    className='item-preview'\r\n                    src={itemWithPreview.url}\r\n                  />\r\n                </div>\r\n              ))}\r\n              {hasAtLeastOneHiddenItem && (\r\n                <div\r\n                  className='hidden-items-count'\r\n                  onClick={() => handleItemClick(itemsWithPreviewsCount + 1)}\r\n                >\r\n                  {`+${hiddenItems.length}`}\r\n                </div>\r\n              )}\r\n            </>\r\n          </div>\r\n        )}\r\n        {showItem && (\r\n          <GalleryViewer\r\n            items={items}\r\n            selectedItemIdx={selectedItemIdx}\r\n            selectItem={setSelectedItem}\r\n            closeViewer={closeViewer}\r\n          />\r\n        )}\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nGallery.propTypes = {\r\n  items: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      description: PropTypes.string.isRequired,\r\n      url: PropTypes.string.isRequired,\r\n    }).isRequired,\r\n  ).isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nGallery.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default Gallery;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport './Spinner.scss';\r\n\r\nfunction Spinner({ message, className }) {\r\n  return (\r\n    <div className={classNames('spinner-container', className)}>\r\n      <div className='spinner' />\r\n      <p className='loading-msg'>{message}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nSpinner.propTypes = {\r\n  message: PropTypes.string,\r\n  className: PropTypes.string,\r\n};\r\n\r\nSpinner.defaultProps = {\r\n  message: ' ',\r\n  className: '',\r\n};\r\n\r\nexport default Spinner;\r\n","import React from 'react';\r\n\r\nimport './ErrorPage.scss';\r\n\r\nconst reloadPage = () => window.location.reload();\r\n\r\nfunction ErrorPage() {\r\n  return (\r\n    <p className='error-page-info'>\r\n       \r\n      <br />\r\n      <span className='error-page-request'>\r\n        &nbsp;\r\n        <button className='reload-link' onClick={reloadPage}>\r\n           \r\n        </button>\r\n      </span>\r\n    </p>\r\n  );\r\n}\r\n\r\nexport default ErrorPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport './Tooltip.scss';\r\n\r\nfunction Tooltip({ children, className }) {\r\n  return <span className={classNames('tooltip', className)}>{children}</span>;\r\n}\r\n\r\nTooltip.propTypes = {\r\n  children: PropTypes.any.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nTooltip.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default Tooltip;\r\n","import moment from 'moment/moment';\r\n\r\nfunction keepSeancesAt(date, timeRange, seances) {\r\n  let hasAtLeastOneSeance = false;\r\n  const seancesFormats = Object.keys(seances);\r\n  const filteredSeances = {};\r\n  const momentRange = {\r\n    start: moment(date).add(timeRange.start, 'm'),\r\n    end: moment(date).add(timeRange.end, 'm'),\r\n  };\r\n\r\n  seancesFormats.forEach(format => {\r\n    filteredSeances[format] = seances[format].filter(seance => {\r\n      const seanceStartMoment = moment.unix(seance.startTime);\r\n      return seanceStartMoment.isBetween(momentRange.start, momentRange.end, 'm', '[]');\r\n    });\r\n\r\n    hasAtLeastOneSeance = hasAtLeastOneSeance || filteredSeances[format].length;\r\n  });\r\n\r\n  return hasAtLeastOneSeance ? filteredSeances : null;\r\n}\r\n\r\nfunction hasStarted(seance) {\r\n  const now = moment();\r\n  return moment.unix(seance.startTime).isSameOrBefore(now);\r\n}\r\n\r\nexport { keepSeancesAt, hasStarted };\r\n","import React, { useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment/moment';\r\nimport classNames from 'classnames';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Tooltip } from '../../../../base-components/Tooltip';\r\nimport { MODAL, RUSSIAN_CURRENCY_SYMBOL } from '../../../../../constants';\r\nimport { showModal } from '../../../../../ducks/ui/modals/actions';\r\nimport { hasStarted } from '../../utils/movies';\r\n\r\nimport './Seances.scss';\r\n\r\nfunction Seances({ movieName, seances, className, showModal }) {\r\n  const goToSeanceTicketsPage = useCallback((movieName, seance) => {\r\n    const modalProps = { movieName, ...seance };\r\n    showModal(MODAL.SEANCE_TICKETS, modalProps);\r\n  }, []);\r\n\r\n  return (\r\n    <div className={classNames('seances', className)}>\r\n      {Object.keys(seances).map(\r\n        format =>\r\n          seances[format].length && (\r\n            <div key={format} className='format-seances-container'>\r\n              <p className='format'>{format}</p>\r\n              <ul className='format-seances'>\r\n                {seances[format].map(seance => {\r\n                  return (\r\n                    <li key={seance.startTime}>\r\n                      <button\r\n                        className={classNames(\r\n                          'seance',\r\n                          hasStarted(seance) && 'has-started',\r\n                        )}\r\n                        onClick={() => goToSeanceTicketsPage(movieName, seance)}\r\n                        disabled={hasStarted(seance)}\r\n                      >\r\n                        {moment.unix(seance.startTime).format('HH:mm')}\r\n                        <Tooltip className='price-tooltip'>\r\n                          {` ${seance.price} ${RUSSIAN_CURRENCY_SYMBOL}`}\r\n                        </Tooltip>\r\n                      </button>\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            </div>\r\n          ),\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nSeances.propTypes = {\r\n  movieName: PropTypes.string.isRequired,\r\n  seances: PropTypes.objectOf(\r\n    PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        id: PropTypes.string.isRequired,\r\n        startTime: PropTypes.number.isRequired,\r\n        price: PropTypes.number.isRequired,\r\n      }),\r\n    ),\r\n  ),\r\n  showModal: PropTypes.func.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nSeances.defaultProps = {\r\n  seances: null,\r\n  className: '',\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  showModal,\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps,\r\n)(Seances);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport './NoScheduleComponent.scss';\r\n\r\nfunction NoScheduleComponent({ className }) {\r\n  return (\r\n    <div className={classNames('no-schedule-container', className)}>\r\n      <p className='no-schedule-msg'>     </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nNoScheduleComponent.propTypes = {\r\n  className: PropTypes.string,\r\n};\r\n\r\nNoScheduleComponent.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default NoScheduleComponent;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport './NotFoundComponent.scss';\r\n\r\nfunction NotFoundComponent({ resetSettings, className }) {\r\n  return (\r\n    <div className={classNames('info-box', className)}>\r\n      <div className='info no-found'>\r\n            \r\n        <br />\r\n        <span className='reset-request'>\r\n          ,&nbsp;\r\n          <button className='reset-settings-link' onClick={resetSettings}>\r\n             \r\n          </button>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nNotFoundComponent.propTypes = {\r\n  resetSettings: PropTypes.func.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nNotFoundComponent.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default NotFoundComponent;\r\n","const selectMovies = state => state.movies.movies;\r\n\r\nconst selectSelectedMovie = state => state.movies.selectedMovie;\r\n\r\nconst selectSelectedMovieSeances = state => state.movies.selectedMovieSeances;\r\n\r\nconst selectMoviesError = state => state.movies.error;\r\n\r\nexport {\r\n  selectMovies,\r\n  selectSelectedMovie,\r\n  selectMoviesError,\r\n  selectSelectedMovieSeances,\r\n};\r\n","const FETCH_MOVIES = {\r\n  REQUEST: '@@movies-page/FETCH_MOVIES_REQUEST',\r\n  SUCCESS: '@@movies-page/FETCH_MOVIES_SUCCESS',\r\n  ERROR: '@@movies-page/FETCH_MOVIES_ERROR',\r\n};\r\n\r\nconst FETCH_MOVIE = {\r\n  REQUEST: '@@movies-page/FETCH_MOVIE_REQUEST',\r\n  SUCCESS: '@@movies-page/FETCH_MOVIE_SUCCESS',\r\n  ERROR: '@@movies-page/FETCH_MOVIE_ERROR',\r\n};\r\n\r\nconst FETCH_SEANCES = {\r\n  REQUEST: '@@movies-page/FETCH_SEANCES_REQUEST',\r\n  SUCCESS: '@@movies-page/FETCH_SEANCES_SUCCESS',\r\n  ERROR: '@@movies-page/FETCH_SEANCES_ERROR',\r\n};\r\n\r\nexport { FETCH_MOVIES, FETCH_MOVIE, FETCH_SEANCES };","import { FETCH_MOVIE, FETCH_MOVIES, FETCH_SEANCES } from './action-types';\r\n\r\nconst fetchMoviesRequest = date => ({\r\n  type: FETCH_MOVIES.REQUEST,\r\n  date,\r\n});\r\n\r\nconst fetchMoviesSuccess = movies => ({\r\n  type: FETCH_MOVIES.SUCCESS,\r\n  movies,\r\n});\r\n\r\nconst fetchMoviesError = error => ({\r\n  type: FETCH_MOVIES.ERROR,\r\n  error,\r\n});\r\n\r\nconst fetchMovieRequest = id => ({\r\n  type: FETCH_MOVIE.REQUEST,\r\n  id,\r\n});\r\n\r\nconst fetchMovieSuccess = movie => ({\r\n  type: FETCH_MOVIE.SUCCESS,\r\n  movie,\r\n});\r\n\r\nconst fetchMovieError = error => ({\r\n  type: FETCH_MOVIE.ERROR,\r\n  error,\r\n});\r\n\r\nconst fetchSeancesRequest = (movieId, date) => ({\r\n  type: FETCH_SEANCES.REQUEST,\r\n  movieId,\r\n  date,\r\n});\r\n\r\nconst fetchSeancesSuccess = seances => ({\r\n  type: FETCH_SEANCES.SUCCESS,\r\n  seances,\r\n});\r\n\r\nconst fetchSeancesError = error => ({\r\n  type: FETCH_SEANCES.ERROR,\r\n  error,\r\n});\r\n\r\nexport {\r\n  fetchMoviesRequest,\r\n  fetchMoviesSuccess,\r\n  fetchMoviesError,\r\n  fetchMovieRequest,\r\n  fetchMovieSuccess,\r\n  fetchMovieError,\r\n  fetchSeancesRequest,\r\n  fetchSeancesSuccess,\r\n  fetchSeancesError,\r\n};\r\n","import React, { useEffect, useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport _ from 'lodash';\r\n\r\nimport { Seances } from '../../common/Seances';\r\nimport { keepSeancesAt } from '../../utils/movies';\r\nimport { Spinner } from '../../../common/Spinner';\r\nimport { NoScheduleComponent } from '../../../common/NoScheduleComponent';\r\nimport { NotFoundComponent } from '../../../common/NotFoundComponent';\r\n\r\nimport { selectSelectedMovieSeances } from '../../../../../ducks/data/movies/selectors';\r\nimport { fetchSeancesRequest } from '../../../../../ducks/data/movies/actions';\r\n\r\nimport './SeancesList.scss';\r\n\r\nconst SEANCES_STATE = {\r\n  LOADING: 0,\r\n  SCHEDULE_NOT_EXIST: 1,\r\n  NOT_FOUND: 2,\r\n  FOUND: 3,\r\n};\r\n\r\nfunction getSeancesState(seances, selectedSeances) {\r\n  if (_.isEmpty(seances)) {\r\n    return SEANCES_STATE.SCHEDULE_NOT_EXIST;\r\n  }\r\n  if (!selectedSeances) {\r\n    return SEANCES_STATE.NOT_FOUND;\r\n  }\r\n  return SEANCES_STATE.FOUND;\r\n}\r\n\r\nfunction SeancesList({\r\n  movieName,\r\n  seances,\r\n  selectedRange,\r\n  selectedDate,\r\n  resetFiltersSettings,\r\n}) {\r\n  const selectedSeances = useMemo(\r\n    () =>\r\n      seances ? keepSeancesAt(selectedDate, selectedRange, seances) : null,\r\n    [seances, selectedRange],\r\n  );\r\n\r\n  const seancesState = getSeancesState(seances, selectedSeances);\r\n  switch (seancesState) {\r\n    case SEANCES_STATE.LOADING:\r\n      return;\r\n    case SEANCES_STATE.SCHEDULE_NOT_EXIST:\r\n      return <NoScheduleComponent className='info-box' />;\r\n    case SEANCES_STATE.NOT_FOUND:\r\n      return (\r\n        <NotFoundComponent\r\n          className='info-box'\r\n          resetSettings={resetFiltersSettings}\r\n        />\r\n      );\r\n    case SEANCES_STATE.FOUND:\r\n      return (\r\n        <div className='seances-list'>\r\n          <Seances movieName={movieName} seances={selectedSeances} className='seances' />\r\n        </div>\r\n      );\r\n  }\r\n}\r\n\r\nSeancesList.propTypes = {\r\n  seances: PropTypes.objectOf(\r\n    PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        id: PropTypes.string.isRequired,\r\n        startTime: PropTypes.number.isRequired,\r\n        price: PropTypes.number.isRequired,\r\n      }),\r\n    ),\r\n  ).isRequired,\r\n  selectedRange: PropTypes.shape({\r\n    start: PropTypes.number.isRequired,\r\n    end: PropTypes.number.isRequired,\r\n  }).isRequired,\r\n  selectedDate: PropTypes.string.isRequired,\r\n  resetFiltersSettings: PropTypes.func.isRequired,\r\n};\r\n\r\nfunction SeancesListContainer({\r\n  movieId,\r\n  seances,\r\n  selectedDate,\r\n  fetchSeances,\r\n  ...props\r\n}) {\r\n  useEffect(() => {\r\n    fetchSeances(movieId, selectedDate);\r\n  }, [selectedDate]);\r\n\r\n  return seances ? (\r\n    <SeancesList seances={seances} selectedDate={selectedDate} {...props} />\r\n  ) : (\r\n    <Spinner className='info-box' />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  seances: selectSelectedMovieSeances(state),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  fetchSeances: fetchSeancesRequest,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(SeancesListContainer);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport lightArrowLeft from '../../../assets/images/light-arrow-left.svg';\r\nimport darkArrowLeft from '../../../assets/images/dark-arrow-left.svg';\r\n\r\nimport './ButtonNext.scss';\r\n\r\nfunction ButtonNext({ onClick, type, className, ...props }) {\r\n  return (\r\n    <button\r\n      aria-label='button next'\r\n      onClick={onClick}\r\n      className={classNames('btn', className)}\r\n      {...props}\r\n    >\r\n      <img\r\n        alt='button next'\r\n        className='btn-icon arrow-next enhance-on-hover'\r\n        src={type === 'light' ? lightArrowLeft : darkArrowLeft}\r\n      />\r\n    </button>\r\n  );\r\n}\r\n\r\nButtonNext.propTypes = {\r\n  onClick: PropTypes.func,\r\n  type: PropTypes.string,\r\n  className: PropTypes.string,\r\n};\r\n\r\nButtonNext.defaultProps = {\r\n  onClick: () => {},\r\n  type: 'dark',\r\n  className: '',\r\n};\r\n\r\nexport default ButtonNext;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport lightArrowLeft from '../../../assets/images/light-arrow-left.svg';\r\nimport darkArrowLeft from '../../../assets/images/dark-arrow-left.svg';\r\n\r\nimport './ButtonPrev.scss';\r\n\r\nfunction ButtonPrev({ onClick, type, className, ...props }) {\r\n  return (\r\n    <button\r\n      aria-label='button previous'\r\n      onClick={onClick}\r\n      className={classNames('btn', className)}\r\n      {...props}\r\n    >\r\n      <img\r\n        alt='button previous'\r\n        className='btn-icon enhance-on-hover'\r\n        src={type === 'light' ? lightArrowLeft : darkArrowLeft}\r\n      />\r\n    </button>\r\n  );\r\n}\r\n\r\nButtonPrev.propTypes = {\r\n  onClick: PropTypes.func,\r\n  type: PropTypes.string,\r\n  className: PropTypes.string,\r\n};\r\n\r\nButtonPrev.defaultProps = {\r\n  onClick: () => {},\r\n  type: 'dark',\r\n  className: '',\r\n};\r\n\r\nexport default ButtonPrev;\r\n","import moment from 'moment';\r\n\r\nimport { APP_DATE_FORMAT } from '../constants';\r\n\r\nconst toMoment = date => moment(date, APP_DATE_FORMAT, true);\r\n\r\nconst toAppDateFormat = momentDate => momentDate.format(APP_DATE_FORMAT);\r\n\r\nconst getTodayStartMoment = () => moment().startOf('day');\r\n\r\nconst getTodayDate = () => toAppDateFormat(getTodayStartMoment());\r\n\r\nconst getTomorrowDate = () =>\r\n  toAppDateFormat(getTodayStartMoment().add(1, 'days'));\r\n\r\nconst getDateAfterTomorrow = () =>\r\n  toAppDateFormat(getTodayStartMoment().add(2, 'days'));\r\n\r\nconst getEndDateOfSixthMonthFromCurrent = () =>\r\n  toAppDateFormat(\r\n    moment()\r\n      .add(6, 'months')\r\n      .endOf('month'),\r\n  );\r\n\r\nconst dateRange = (startDate, endDate) => {\r\n  const currentDate = startDate.clone();\r\n  const dateRange = [];\r\n  while (currentDate.isSameOrBefore(endDate)) {\r\n    dateRange.push(currentDate.clone());\r\n    currentDate.add(1, 'days');\r\n  }\r\n  return dateRange;\r\n};\r\n\r\nconst bindTimeToDayMoment = (time, dayMoment) => {\r\n  return dayMoment.clone().add(moment.duration(time));\r\n};\r\n\r\nconst momentToUnixTime = momentDate => momentDate.unix();\r\n\r\nexport {\r\n  toAppDateFormat,\r\n  toMoment,\r\n  getTodayStartMoment,\r\n  getTodayDate,\r\n  getTomorrowDate,\r\n  getDateAfterTomorrow,\r\n  getEndDateOfSixthMonthFromCurrent,\r\n  dateRange,\r\n  bindTimeToDayMoment,\r\n  momentToUnixTime,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport onClickOutside from 'react-onclickoutside';\r\nimport { extendMoment } from 'moment-range/dist/moment-range';\r\nimport Moment from 'moment/moment';\r\n\r\nimport { ButtonNext } from '../ButtonNext';\r\nimport { ButtonPrev } from '../ButtonPrev';\r\nimport { range } from '../../../utils/array';\r\nimport { dateRange, toAppDateFormat, toMoment } from '../../../utils/date';\r\n\r\nimport './Calendar.scss';\r\n\r\nconst moment = extendMoment(Moment);\r\n\r\nclass Calendar extends React.Component {\r\n  static propTypes = {\r\n    initialMonth: PropTypes.string,\r\n    onDateSelected: PropTypes.func.isRequired,\r\n    closeCalendar: PropTypes.func,\r\n    onDateEnter: PropTypes.func,\r\n    onDateLeave: PropTypes.func,\r\n    minDate: PropTypes.string,\r\n    maxDate: PropTypes.string,\r\n    closeOnSelect: PropTypes.bool,\r\n  };\r\n\r\n  static defaultProps = {\r\n    initialMonth: toAppDateFormat(moment()),\r\n    onDateEnter: () => {},\r\n    onDateLeave: () => {},\r\n    closeCalendar: () => {},\r\n    closeOnSelect: false,\r\n    minDate: null,\r\n    maxDate: null,\r\n  };\r\n\r\n  state = {\r\n    selectedMonth: this.props.initialMonth,\r\n  };\r\n\r\n  handleNextMonthClick = () => {\r\n    this.setState(({ selectedMonth }) => {\r\n      const monthMoment = toMoment(selectedMonth);\r\n      const nextMonthMoment = monthMoment.add(1, 'months');\r\n      const nextMonth = toAppDateFormat(nextMonthMoment);\r\n      return { selectedMonth: nextMonth };\r\n    });\r\n  };\r\n\r\n  handlePrevMonthClick = () => {\r\n    this.setState(({ selectedMonth }) => {\r\n      const monthMoment = toMoment(selectedMonth);\r\n      const prevMonthMoment = monthMoment.subtract(1, 'months');\r\n      const prevMonth = toAppDateFormat(prevMonthMoment);\r\n      return { selectedMonth: prevMonth };\r\n    });\r\n  };\r\n\r\n  handleDateSelected = date => {\r\n    const {\r\n      onDateSelected,\r\n      onDateLeave,\r\n      closeOnSelect,\r\n      closeCalendar,\r\n    } = this.props;\r\n\r\n    onDateSelected(date);\r\n    if (closeOnSelect) {\r\n      onDateLeave(date);\r\n      closeCalendar();\r\n    }\r\n  };\r\n\r\n  handleClickOutside = () => {\r\n    const { closeCalendar } = this.props;\r\n    closeCalendar();\r\n  };\r\n\r\n  render() {\r\n    const { minDate, maxDate, onDateEnter, onDateLeave } = this.props;\r\n\r\n    const { selectedMonth } = this.state;\r\n    const selectedMonthMoment = toMoment(selectedMonth);\r\n\r\n    const startMonthDate = selectedMonthMoment.startOf('month').clone();\r\n    const endMonthDate = selectedMonthMoment.endOf('month').clone();\r\n    const monthDates = dateRange(startMonthDate, endMonthDate);\r\n\r\n    const startWeekdayNumber = Number(startMonthDate.format('E'));\r\n    const startEmptyDays = range(1, startWeekdayNumber);\r\n\r\n    const minMoment = toMoment(minDate);\r\n    const maxMoment = toMoment(maxDate);\r\n    const prevMonthBtnEnabled =\r\n      !minMoment.isValid() || minMoment.isBefore(startMonthDate);\r\n    const nextMonthBtnEnabled =\r\n      !minMoment.isValid() || maxMoment.isAfter(endMonthDate);\r\n\r\n    return (\r\n      <div className='calendar'>\r\n        <div className='selectMonthArea'>\r\n          <p className='month'>{selectedMonthMoment.format('MMMM')}</p>\r\n          <div className='btnContainer'>\r\n            <ButtonPrev\r\n              onClick={this.handlePrevMonthClick}\r\n              className={classNames(\r\n                'btn btn-prev',\r\n                !prevMonthBtnEnabled && 'disabled',\r\n              )}\r\n              disabled={!prevMonthBtnEnabled}\r\n            />\r\n            <ButtonNext\r\n              onClick={this.handleNextMonthClick}\r\n              className={classNames('btn', !nextMonthBtnEnabled && 'disabled')}\r\n              disabled={!nextMonthBtnEnabled}\r\n            />\r\n          </div>\r\n        </div>\r\n        <ul className='weekdays'>\r\n          <li key={0} className='weekday'>\r\n            \r\n          </li>\r\n          <li key={1} className='weekday'>\r\n            \r\n          </li>\r\n          <li key={2} className='weekday'>\r\n            \r\n          </li>\r\n          <li key={3} className='weekday'>\r\n            \r\n          </li>\r\n          <li key={4} className='weekday'>\r\n            \r\n          </li>\r\n          <li key={5} className='weekday weekend'>\r\n            \r\n          </li>\r\n          <li key={6} className='weekday weekend'>\r\n            \r\n          </li>\r\n        </ul>\r\n        <ul className='days'>\r\n          {startEmptyDays.map(day => (\r\n            <li key={day} className='day' />\r\n          ))}\r\n          {monthDates.map(date => {\r\n            const enabledDate =\r\n              !minMoment.isValid() ||\r\n              (date.isSameOrAfter(minMoment) && date.isSameOrBefore(maxDate));\r\n            return (\r\n              <li\r\n                key={date.format('DD')}\r\n                onClick={() =>\r\n                  enabledDate\r\n                    ? this.handleDateSelected(toAppDateFormat(date))\r\n                    : false\r\n                }\r\n                className={enabledDate ? 'enabled-day' : 'disabled-day'}\r\n                onMouseEnter={() =>\r\n                  enabledDate ? onDateEnter(toAppDateFormat(date)) : false\r\n                }\r\n                onMouseLeave={() =>\r\n                  enabledDate ? onDateLeave(toAppDateFormat(date)) : false\r\n                }\r\n              >\r\n                {date.format('DD')}\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default onClickOutside(Calendar);\r\n","function range(start, end, step = 1) {\r\n  const range = [];\r\n  for (let i = start; i < end; i += step) {\r\n    range.push(i);\r\n  }\r\n  return range;\r\n}\r\n\r\nexport { range };\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport downArrowIcon from '../../../assets/images/down-arrow.svg';\r\n\r\nimport './ToggleIcon.scss';\r\n\r\nfunction ToggleIcon({ on, className, ...props }) {\r\n  return (\r\n    <img\r\n      alt='toggle icon'\r\n      className={classNames('toggleIcon', on ? 'on' : 'off', className)}\r\n      src={downArrowIcon}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nToggleIcon.propTypes = {\r\n  on: PropTypes.bool.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nToggleIcon.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default ToggleIcon;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Toggle extends React.Component {\r\n  static propTypes = {\r\n    children: PropTypes.func.isRequired,\r\n    openByDefault: PropTypes.bool,\r\n  };\r\n\r\n  static defaultProps = {\r\n    openByDefault: false,\r\n  };\r\n\r\n  state = {\r\n    on: this.props.openByDefault,\r\n  };\r\n\r\n  toggle = () => {\r\n    this.setState(state => ({ on: !state.on }));\r\n  };\r\n\r\n  open = () => {\r\n    this.setState({ on: true });\r\n  };\r\n\r\n  close = () => {\r\n    this.setState({ on: false });\r\n  };\r\n\r\n  render() {\r\n    const { children } = this.props;\r\n    const { on } = this.state;\r\n\r\n    return children(on, this.toggle, this.open, this.close);\r\n  }\r\n}\r\n\r\nexport default Toggle;\r\n","import React, { useContext, useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { Button } from '../../Button';\r\nimport { Calendar } from '../../Calendar';\r\nimport { ToggleIcon } from '../../ToggleIcon';\r\nimport { Toggle } from '../../Toggle';\r\nimport { DateFilterContext } from '..';\r\n\r\nimport './DateInput.scss';\r\n\r\nfunction DateInput({\r\n  minDate,\r\n  maxDate,\r\n  defaultLabel,\r\n  getDateLabel,\r\n  shouldShowSelectedDate,\r\n  active,\r\n}) {\r\n  const [buttonLabel, setButtonLabel] = useState(defaultLabel);\r\n  const { selectDate, selectedDate } = useContext(DateFilterContext);\r\n\r\n  useEffect(() => {\r\n    shouldShowSelectedDate\r\n      ? setButtonLabel(getDateLabel(selectedDate))\r\n      : setButtonLabel(defaultLabel);\r\n  }, [shouldShowSelectedDate, selectedDate]);\r\n\r\n  return (\r\n    <Toggle>\r\n      {(on, toggle) => (\r\n        <div className='date-input-container'>\r\n          <Button\r\n            className={classNames(\r\n              'calendar-btn ignore-react-onclickoutside',\r\n              active && 'active',\r\n            )}\r\n            onClick={toggle}\r\n          >\r\n            {buttonLabel}\r\n            <ToggleIcon on={on} className='calendar-btn-icon' />\r\n          </Button>\r\n          {on && (\r\n            <Calendar\r\n              initialMonth={selectedDate}\r\n              minDate={minDate}\r\n              maxDate={maxDate}\r\n              onDateSelected={date => selectDate(date)}\r\n              onDateEnter={date => setButtonLabel(getDateLabel(date))}\r\n              onDateLeave={() => setButtonLabel(defaultLabel)}\r\n              closeCalendar={toggle}\r\n              closeOnSelect\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n    </Toggle>\r\n  );\r\n}\r\n\r\nDateInput.propTypes = {\r\n  defaultLabel: PropTypes.string,\r\n  getDateLabel: PropTypes.func,\r\n  minDate: PropTypes.string,\r\n  maxDate: PropTypes.string,\r\n  shouldShowSelectedDate: PropTypes.bool,\r\n  active: PropTypes.bool,\r\n};\r\n\r\nDateInput.defaultProps = {\r\n  defaultLabel: ' ',\r\n  getDateLabel: date => date.format('DD MMMM'),\r\n  minDate: null,\r\n  maxDate: null,\r\n  shouldShowSelectedDate: false,\r\n  active: false,\r\n};\r\n\r\nexport default DateInput;\r\n","import React, { useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { DateFilterContext } from '..';\r\n\r\nimport './FrequentDateButton.scss';\r\n\r\nfunction FrequentDateButton({ date, label }) {\r\n  const { selectedDate, selectDate } = useContext(DateFilterContext);\r\n  const isSelected = date === selectedDate;\r\n  return (\r\n    <button\r\n      onClick={() => (!isSelected ? selectDate(date) : false)}\r\n      className={classNames('frequent-date-btn', isSelected && 'selected')}\r\n    >\r\n      {label}\r\n    </button>\r\n  );\r\n}\r\n\r\nFrequentDateButton.propTypes = {\r\n  date: PropTypes.string.isRequired,\r\n  label: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default FrequentDateButton;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { DateInput } from './DateInput';\r\nimport { DateFilterContext } from './index';\r\nimport { FrequentDateButton } from './FrequentDateButton';\r\n\r\nclass DateFilter extends React.Component {\r\n  static DateInput = DateInput;\r\n\r\n  static FrequentDateButton = FrequentDateButton;\r\n\r\n  render() {\r\n    const { selectedDate, selectDate, children, className } = this.props;\r\n    return (\r\n      <div className={className}>\r\n        <DateFilterContext.Provider value={{ selectedDate, selectDate }}>\r\n          <>{children}</>\r\n        </DateFilterContext.Provider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nDateFilter.propTypes = {\r\n  selectedDate: PropTypes.string,\r\n  selectDate: PropTypes.func.isRequired,\r\n  children: PropTypes.any.isRequired,\r\n  className: PropTypes.string.isRequired,\r\n};\r\n\r\nDateFilter.defaultProps = {\r\n  selectedDate: null,\r\n};\r\n\r\nexport default DateFilter;\r\n","import React from 'react';\r\n\r\nconst DateFilterContext = React.createContext({\r\n  selectedDate: null,\r\n  selectDate: () => {},\r\n});\r\n\r\nexport default DateFilterContext;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { DateFilter } from '../../../../base-components/DateFilter';\r\n\r\nimport {\r\n  getDateAfterTomorrow,\r\n  getEndDateOfSixthMonthFromCurrent,\r\n  getTodayDate,\r\n  getTomorrowDate,\r\n  toMoment,\r\n} from '../../../../../utils/date';\r\n\r\nimport './DateFilter.scss';\r\n\r\nconst TODAY_LABEL = '';\r\nconst TOMORROW_LABEL = '';\r\nconst DEFAULT_DATE_INPUT_LABEL = ' ';\r\n\r\nfunction DateFilterWrapper({ selectedDate, selectDate, className }) {\r\n  const today = getTodayDate();\r\n  const tomorrow = getTomorrowDate();\r\n  const dayAfterTomorrow = getDateAfterTomorrow();\r\n  const DAY_AFTER_TOMORROW_LABEL = toMoment(dayAfterTomorrow).format('dd, DD MMMM');\r\n\r\n  const shouldShowSelectedDateOnDateInput =\r\n    selectedDate &&\r\n    selectedDate !== today &&\r\n    selectedDate !== tomorrow &&\r\n    selectedDate !== dayAfterTomorrow;\r\n\r\n  const datesLabels = {\r\n    [today]: TODAY_LABEL,\r\n    [tomorrow]: TOMORROW_LABEL,\r\n  };\r\n\r\n  function getDateLabel(date) {\r\n    if (date in datesLabels) return datesLabels[date];\r\n    return toMoment(date).format('dd, DD MMMM');\r\n  }\r\n\r\n  const minDate = today;\r\n  const maxDate = getEndDateOfSixthMonthFromCurrent();\r\n\r\n  return (\r\n    <DateFilter\r\n      selectedDate={selectedDate}\r\n      selectDate={selectDate}\r\n      className={classNames('date-filter horizontal', className)}\r\n    >\r\n      <DateFilter.FrequentDateButton date={today} label={TODAY_LABEL} />\r\n      <DateFilter.FrequentDateButton date={tomorrow} label={TOMORROW_LABEL} />\r\n      <DateFilter.FrequentDateButton date={dayAfterTomorrow} label={DAY_AFTER_TOMORROW_LABEL} />\r\n      <DateFilter.DateInput\r\n        defaultLabel={DEFAULT_DATE_INPUT_LABEL}\r\n        getDateLabel={getDateLabel}\r\n        shouldShowSelectedDate={shouldShowSelectedDateOnDateInput}\r\n        active={shouldShowSelectedDateOnDateInput}\r\n        minDate={minDate}\r\n        maxDate={maxDate}\r\n      />\r\n    </DateFilter>\r\n  );\r\n}\r\nDateFilterWrapper.propTypes = {\r\n  selectedDate: PropTypes.string.isRequired,\r\n  selectDate: PropTypes.func.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nDateFilterWrapper.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default DateFilterWrapper;\r\n","import React from 'react';\r\n\r\nfunction NotFoundPage() {\r\n  return (\r\n    <h1 className='page-title'>\r\n      <span className='notFoundCode'>404:</span>\r\n      &nbsp;  \r\n    </h1>\r\n  );\r\n}\r\n\r\nexport default NotFoundPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { range as makeRange } from '../utils/array';\r\n\r\nimport './SliderWireframe.scss';\r\n\r\nfunction Wireframe({ min, max, valuePerStep, formatLabel, labelMarkStep }) {\r\n  const rangeUnits = makeRange(min, max, valuePerStep);\r\n  const lastUnit = max;\r\n\r\n  const islabelMarkStep = step => step % labelMarkStep === 0;\r\n  const isFirstStep = step => step === 0;\r\n\r\n  return (\r\n    <>\r\n      {rangeUnits.map((unit, step) =>\r\n        islabelMarkStep(step) ? (\r\n          <div key={unit} className='time-interval-with-mark-box'>\r\n            <p className={classNames('mark-label', { first: isFirstStep(step) })}>\r\n              {formatLabel(unit)}\r\n            </p>\r\n            <div\r\n              className={classNames('time-interval with-mark', {\r\n                first: isFirstStep(step),\r\n              })}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <div key={unit} className={classNames('time-interval')} />\r\n        ),\r\n      )}\r\n      <div className='invisible-time-interval-with-mark-box'>\r\n        <p className='mark-label last'>{formatLabel(lastUnit)}</p>\r\n        <div className={classNames('invisible-time-interval with-mark')} />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nWireframe.propTypes = {\r\n  min: PropTypes.number.isRequired,\r\n  max: PropTypes.number.isRequired,\r\n  formatLabel: PropTypes.func.isRequired,\r\n  valuePerStep: PropTypes.number.isRequired,\r\n  labelMarkStep: PropTypes.number,\r\n};\r\n\r\nWireframe.defaultProps = {\r\n  labelMarkStep: 4,\r\n};\r\n\r\nexport default Wireframe;\r\n","function range(start, end, step = 1) {\r\n  const range = [];\r\n  for (let i = start; i < end; i += step) {\r\n    range.push(i);\r\n  }\r\n  return range;\r\n}\r\n\r\nexport { range };\r\n","function clamp(value, min, max) {\r\n  return Math.max(min, Math.min(max, value));\r\n}\r\n\r\nexport { clamp };\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { isEqual } from 'lodash';\r\n\r\nimport { clamp } from '../utils/clamp';\r\n\r\nimport './SelectedRange.scss';\r\n\r\nconst CSS_UNIT = '%';\r\n\r\nclass SelectedRange extends React.Component {\r\n  static propTypes = {\r\n    normalizedRange: PropTypes.shape({\r\n      start: PropTypes.number.isRequired,\r\n      end: PropTypes.number.isRequired,\r\n    }).isRequired,\r\n    pagePositionToNormalizedValue: PropTypes.func.isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n    onChangeStart: PropTypes.func,\r\n    onChangeEnd: PropTypes.func,\r\n    selectedRangeRef: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    onChangeStart: () => {},\r\n    onChangeEnd: () => {},\r\n    selectedRangeRef: null,\r\n  };\r\n\r\n  cursorShift = null;\r\n\r\n  grab = event => {\r\n    const { target: selectedRange, pageX: cursorX } = event;\r\n    const { onChangeStart } = this.props;\r\n\r\n    const selectedRangeLeft = selectedRange.getBoundingClientRect().left;\r\n    this.cursorShift = cursorX - selectedRangeLeft;\r\n\r\n    document.addEventListener('pointermove', this.move);\r\n    document.addEventListener('pointerup', this.release);\r\n\r\n    onChangeStart();\r\n\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  move = event => {\r\n    const { pageX: cursorPageValue } = event;\r\n    const { normalizedRange, onChange } = this.props;\r\n    const { pagePositionToNormalizedValue: normalizeValue } = this.props;\r\n\r\n    const normalizedRangeLength = normalizedRange.end - normalizedRange.start;\r\n\r\n    const newNormalizedRangeStart = normalizeValue(cursorPageValue - this.cursorShift);\r\n    const newNormalizedRangeEnd = newNormalizedRangeStart + normalizedRangeLength;\r\n\r\n    const newNormalizedRange = {\r\n      start: clamp(newNormalizedRangeStart, 0, 1 - normalizedRangeLength),\r\n      end: clamp(newNormalizedRangeEnd, normalizedRangeLength, 1),\r\n    };\r\n\r\n    if (!isEqual(newNormalizedRange, normalizedRange)) {\r\n      onChange(newNormalizedRange);\r\n    }\r\n\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  release = event => {\r\n    document.removeEventListener('pointermove', this.move);\r\n    document.removeEventListener('pointerup', this.release);\r\n\r\n    const { onChangeEnd } = this.props;\r\n    onChangeEnd();\r\n\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  render() {\r\n    const { normalizedRange, selectedRangeRef } = this.props;\r\n\r\n    const selectedRangeStart = Math.min(normalizedRange.start, normalizedRange.end);\r\n    const selectedRangeLength = Math.abs(normalizedRange.end - normalizedRange.start);\r\n\r\n    return (\r\n      <div\r\n        ref={selectedRangeRef}\r\n        className='selected-range'\r\n        style={{\r\n          left: selectedRangeStart * 100 + CSS_UNIT,\r\n          width: selectedRangeLength * 100 + CSS_UNIT,\r\n        }}\r\n        onPointerDown={this.grab}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default SelectedRange;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { clamp } from '../utils/clamp';\r\n\r\nimport './Handle.scss';\r\n\r\nconst CSS_UNIT = '%';\r\n\r\nclass Handle extends React.Component {\r\n  static propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    normalizedValue: PropTypes.number.isRequired,\r\n    pagePositionToNormalizedValue: PropTypes.func.isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n    onChangeStart: PropTypes.func,\r\n    onChangeEnd: PropTypes.func,\r\n    handleRef: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    onChangeStart: () => {},\r\n    onChangeEnd: () => {},\r\n    handleRef: null,\r\n  };\r\n\r\n  cursorShift = null;\r\n\r\n  grab = event => {\r\n    const { target: handle, pageX: cursorX } = event;\r\n    const { onChangeStart, name } = this.props;\r\n\r\n    const handleLeft = handle.getBoundingClientRect().left;\r\n    this.cursorShift = cursorX - handleLeft;\r\n\r\n    document.addEventListener('pointermove', this.move);\r\n    document.addEventListener('pointerup', this.release);\r\n\r\n    onChangeStart(name);\r\n\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  move = event => {\r\n    const { pageX: cursorPagePosition } = event;\r\n    const { normalizedValue: oldValue, onChange, name } = this.props;\r\n    const { pagePositionToNormalizedValue: normalizeValue } = this.props;\r\n\r\n    const normalizedValue = normalizeValue(cursorPagePosition - this.cursorShift);\r\n    const newValue = clamp(normalizedValue, 0, 1);\r\n\r\n    if (newValue !== oldValue) {\r\n      onChange(name, newValue);\r\n    }\r\n\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  release = event => {\r\n    document.removeEventListener('pointermove', this.move);\r\n    document.removeEventListener('pointerup', this.release);\r\n\r\n    const { onChangeEnd, name } = this.props;\r\n    onChangeEnd(name);\r\n\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  render() {\r\n    const { handleRef, normalizedValue } = this.props;\r\n    return (\r\n      <div\r\n        className='slider-handle'\r\n        ref={handleRef}\r\n        style={{\r\n          left: normalizedValue * 100 + CSS_UNIT,\r\n          transform: 'translateX(-50%)',\r\n        }}\r\n        onPointerDown={this.grab}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nHandle.propTypes = {};\r\n\r\nexport default Handle;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { isEqual } from 'lodash';\r\n\r\nimport { SliderWireframe } from './SliderWireframe';\r\nimport { SelectedRange } from './SelectedRange';\r\nimport { Handle } from './Handle';\r\n\r\nimport './RangeSlider.scss';\r\n\r\nconst MODE = {\r\n  IDLE: 0,\r\n  DRAG: 1,\r\n};\r\n\r\nclass RangeSlider extends React.Component {\r\n  static propTypes = {\r\n    min: PropTypes.number.isRequired,\r\n    max: PropTypes.number.isRequired,\r\n    selectedRange: PropTypes.shape({\r\n      start: PropTypes.number.isRequired,\r\n      end: PropTypes.number.isRequired,\r\n    }).isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n    formatLabel: PropTypes.func.isRequired,\r\n    valuePerStep: PropTypes.number,\r\n    labelMarkStep: PropTypes.number,\r\n    className: PropTypes.string,\r\n  };\r\n\r\n  static defaultProps = {\r\n    valuePerStep: 1,\r\n    labelMarkStep: 4,\r\n    className: '',\r\n  };\r\n\r\n  state = {\r\n    mode: MODE.IDLE,\r\n    selectedRange: {\r\n      start: null,\r\n      end: null,\r\n    },\r\n  };\r\n\r\n  firstHandleName = 'start';\r\n  secondHandleName = 'end';\r\n\r\n  componentDidMount() {\r\n    this.measureElementsSize();\r\n    window.addEventListener('resize', this.handleResize);\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    const stateChanged = !isEqual(nextState, this.state);\r\n    const propsChanged = !isEqual(nextState, this.props);\r\n\r\n    const { mode } = this.state;\r\n    return stateChanged || (propsChanged && mode !== MODE.DRAG);\r\n  }\r\n\r\n  handleResize = () => {\r\n    this.measureElementsSize();\r\n  };\r\n\r\n  measureElementsSize() {\r\n    const { width, left } = this.slider.getBoundingClientRect();\r\n    this.sliderWidth = width;\r\n    this.sliderLeft = left;\r\n  }\r\n\r\n  handleChangeStart = () => {\r\n    this.switchToDragMode();\r\n  };\r\n\r\n  handleChangeEnd = () => {\r\n    this.switchToIdleMode();\r\n    this.animateSelectedRangeRounding();\r\n  };\r\n\r\n  switchToDragMode() {\r\n    const { selectedRange } = this.props;\r\n    this.setState({ mode: MODE.DRAG, selectedRange });\r\n  }\r\n\r\n  switchToIdleMode() {\r\n    this.setState({ mode: MODE.IDLE, selectedRange: null });\r\n  }\r\n\r\n  animateSelectedRangeRounding() {\r\n    this.selectedRange.classList.add('smooth-position-transition');\r\n    this.firstHandle.classList.add('smooth-position-transition');\r\n    this.secondHandle.classList.add('smooth-position-transition');\r\n\r\n    setTimeout(this.finishSelectedRangeRoundingAnimation, 500);\r\n  }\r\n\r\n  finishSelectedRangeRoundingAnimation = () => {\r\n    this.selectedRange.classList.remove('smooth-position-transition');\r\n    this.firstHandle.classList.remove('smooth-position-transition');\r\n    this.secondHandle.classList.remove('smooth-position-transition');\r\n  };\r\n\r\n  handleHandleValueChange = (handle, value) => {\r\n    const { selectedRange } = this.state;\r\n\r\n    const normalizedRange = this.absoluteRangeToNormalized(selectedRange);\r\n    normalizedRange[handle] = value;\r\n\r\n    if (normalizedRange.start > normalizedRange.end) {\r\n      [normalizedRange.start, normalizedRange.end] = [normalizedRange.end, normalizedRange.start];\r\n      this.swapHandlesWhileDrag();\r\n    }\r\n\r\n    this.handleSelectedRangeChange(normalizedRange);\r\n  };\r\n\r\n  swapHandlesWhileDrag() {\r\n    [this.firstHandleName, this.secondHandleName] = [this.secondHandleName, this.firstHandleName];\r\n    this.handlesSwappedWhileDrag = !this.handlesSwappedWhileDrag;\r\n  }\r\n\r\n  handleSelectedRangeChange = normalizedRange => {\r\n    const absoluteRange = this.normalizedRangeToAbsolute(normalizedRange);\r\n    this.setState({ selectedRange: absoluteRange });\r\n\r\n    const { onChange } = this.props;\r\n    const roundedRange = {\r\n      start: this.roundValue(absoluteRange.start),\r\n      end: this.roundValue(absoluteRange.end),\r\n    };\r\n\r\n    onChange(roundedRange);\r\n  };\r\n\r\n  roundValue = value => {\r\n    const { valuePerStep } = this.props;\r\n    return Math.round(value / valuePerStep) * valuePerStep;\r\n  };\r\n\r\n  normalizedRangeToAbsolute = absoluteRange => ({\r\n    start: this.normalizedValueToAbsolute(absoluteRange.start),\r\n    end: this.normalizedValueToAbsolute(absoluteRange.end),\r\n  });\r\n\r\n  absoluteRangeToNormalized = absoluteRange => ({\r\n    start: this.absoluteValueToNormalized(absoluteRange.start),\r\n    end: this.absoluteValueToNormalized(absoluteRange.end),\r\n  });\r\n\r\n  normalizedValueToAbsolute = normalizedValue => {\r\n    const { min, max } = this.props;\r\n    return normalizedValue * (max - min) + min;\r\n  };\r\n\r\n  absoluteValueToNormalized = absoluteValue => {\r\n    const { min, max } = this.props;\r\n    return (absoluteValue - min) / (max - min);\r\n  };\r\n\r\n  pagePositionToNormalizedValue = position => {\r\n    return (position - this.sliderLeft) / this.sliderWidth;\r\n  };\r\n\r\n  setSliderRef = slider => (this.slider = slider);\r\n\r\n  setSelectedRangeRef = selectedRange => (this.selectedRange = selectedRange);\r\n\r\n  setFirstHandleRef = handle => (this.firstHandle = handle);\r\n\r\n  setSecondHandleRef = handle => (this.secondHandle = handle);\r\n\r\n  getSelectedRange() {\r\n    const { mode } = this.state;\r\n    switch (mode) {\r\n      case MODE.IDLE:\r\n        return this.props.selectedRange;\r\n      case MODE.DRAG:\r\n        return this.state.selectedRange;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { min, max, formatLabel, valuePerStep, labelMarkStep, className } = this.props;\r\n\r\n    const selectedRange = this.getSelectedRange();\r\n    const normalizedSelectedRange = this.absoluteRangeToNormalized(selectedRange);\r\n\r\n    return (\r\n      <div ref={this.setSliderRef} className={classNames('slider-box', className)}>\r\n        <Handle\r\n          name={this.firstHandleName}\r\n          handleRef={this.setFirstHandleRef}\r\n          normalizedValue={normalizedSelectedRange[this.firstHandleName]}\r\n          onChange={this.handleHandleValueChange}\r\n          onChangeStart={this.handleChangeStart}\r\n          onChangeEnd={this.handleChangeEnd}\r\n          pagePositionToNormalizedValue={this.pagePositionToNormalizedValue}\r\n        />\r\n        <Handle\r\n          name={this.secondHandleName}\r\n          handleRef={this.setSecondHandleRef}\r\n          normalizedValue={normalizedSelectedRange[this.secondHandleName]}\r\n          onChange={this.handleHandleValueChange}\r\n          onChangeStart={this.handleChangeStart}\r\n          onChangeEnd={this.handleChangeEnd}\r\n          pagePositionToNormalizedValue={this.pagePositionToNormalizedValue}\r\n        />\r\n        <SelectedRange\r\n          selectedRangeRef={this.setSelectedRangeRef}\r\n          normalizedRange={normalizedSelectedRange}\r\n          onChange={this.handleSelectedRangeChange}\r\n          onChangeStart={this.handleChangeStart}\r\n          onChangeEnd={this.handleChangeEnd}\r\n          pagePositionToNormalizedValue={this.pagePositionToNormalizedValue}\r\n        />\r\n        <SliderWireframe\r\n          min={min}\r\n          max={max}\r\n          selectedRange={selectedRange}\r\n          valuePerStep={valuePerStep}\r\n          labelMarkStep={labelMarkStep}\r\n          formatLabel={formatLabel}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RangeSlider;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Gallery } from '../../../base-components/Gallery';\r\nimport { Spinner } from '../../common/Spinner';\r\nimport { ErrorPage } from '../../common/ErrorPage';\r\nimport { SeancesListContainer } from './SeancesList';\r\nimport { DateFilter } from '../movies-page/DateFilter';\r\nimport { NotFoundPage } from '../../common/NotFoundPage';\r\nimport { RangeSlider } from '../../../base-components/RangeSlider';\r\nimport { fetchMovieRequest } from '../../../../ducks/data/movies/actions';\r\nimport { MINUTES_IN_HOUR, toTimeLabel } from '../../../../utils/time';\r\nimport { SEANCES_TIME_RANGE } from '../../../../constants';\r\nimport { getTodayDate } from '../../../../utils/date';\r\n\r\nimport {\r\n  selectMoviesError,\r\n  selectSelectedMovie,\r\n} from '../../../../ducks/data/movies/selectors';\r\n\r\nimport './MoviePage.scss';\r\n\r\nfunction MoviePage({ movie }) {\r\n  const [selectedDate, setSelectedDate] = useState(getTodayDate());\r\n\r\n  const [selectedRange, setSelectedRange] = useState(SEANCES_TIME_RANGE);\r\n  const handleResetFiltersSettings = () => {\r\n    setSelectedRange(SEANCES_TIME_RANGE);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1 className='page-title'>{movie.name}</h1>\r\n      <Gallery items={movie.frames} className='movie-frames-gallery' />\r\n      <p className='movie-description'>{movie.description}</p>\r\n      <ul className='movie-extra-info'>\r\n        <li>\r\n          <label className='label' htmlFor='genres'>\r\n            :\r\n          </label>\r\n          <p id='genres'>{movie.genres.join(', ')}</p>\r\n        </li>\r\n        <li>\r\n          <label className='label' htmlFor='duration'>\r\n            :\r\n          </label>\r\n          <p id='duration'>{`${movie.duration} .`}</p>\r\n        </li>\r\n      </ul>\r\n      <div className='schedule-container'>\r\n        <h2 className='schedule-title'></h2>\r\n        <div className='filters-container'>\r\n          <DateFilter\r\n            className='movie-date-filter'\r\n            selectedDate={selectedDate}\r\n            selectDate={setSelectedDate}\r\n          />\r\n          <RangeSlider\r\n            className='movie-time-range-slider'\r\n            min={SEANCES_TIME_RANGE.start}\r\n            max={SEANCES_TIME_RANGE.end}\r\n            valuePerStep={MINUTES_IN_HOUR}\r\n            selectedRange={selectedRange}\r\n            onChange={setSelectedRange}\r\n            formatLabel={toTimeLabel}\r\n          />\r\n        </div>\r\n        <SeancesListContainer\r\n          movieName={movie.name}\r\n          movieId={movie.id}\r\n          selectedDate={selectedDate}\r\n          selectedRange={selectedRange}\r\n          resetFiltersSettings={handleResetFiltersSettings}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nMoviePage.propTypes = {\r\n  movie: PropTypes.shape({\r\n    id: PropTypes.number.isRequired,\r\n    name: PropTypes.string.isRequired,\r\n    description: PropTypes.string.isRequired,\r\n    genres: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\r\n    duration: PropTypes.number.isRequired,\r\n    frames: PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        url: PropTypes.string.isRequired,\r\n        description: PropTypes.string.isRequired,\r\n      }),\r\n    ).isRequired,\r\n  }).isRequired,\r\n};\r\n\r\n// eslint-disable-next-line react/prop-types\r\nfunction MoviePageContainer({ movie, fetchMovie, match, error, ...props }) {\r\n  if (error) {\r\n    return error.name === 'NotFoundError' ? <NotFoundPage /> : <ErrorPage />;\r\n  }\r\n\r\n  const movieId = parseInt(match.params.id, 10);\r\n  useEffect(() => {\r\n    fetchMovie(movieId);\r\n  }, []);\r\n\r\n  return movie ? (\r\n    <MoviePage movie={movie} {...props} />\r\n  ) : (\r\n    <Spinner className='page-spinner-container' />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  movie: selectSelectedMovie(state),\r\n  error: selectMoviesError(state),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  fetchMovie: fetchMovieRequest,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(MoviePageContainer);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport crossIcon from '../../../../../assets/images/dark-cross-icon.svg';\r\nimport searchIcon from '../../../../../assets/images/search-icon.svg';\r\n\r\nimport './Search.scss';\r\n\r\nfunction Search({ hint, placeholder, onHintChange, resetHint, className }) {\r\n  return (\r\n    <div className={className}>\r\n      <div className='input-box'>\r\n        <img alt='' src={searchIcon} className='search-icon' />\r\n        <input\r\n          value={hint}\r\n          placeholder={placeholder}\r\n          className='search-input'\r\n          onChange={onHintChange}\r\n        />\r\n        {hint && (\r\n          <img\r\n            aria-label='reset icon'\r\n            alt='reset-icon'\r\n            src={crossIcon}\r\n            className='reset-icon smoothly-enhance-on-hover'\r\n            onClick={resetHint}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nSearch.propTypes = {\r\n  hint: PropTypes.string.isRequired,\r\n  placeholder: PropTypes.string.isRequired,\r\n  onHintChange: PropTypes.func.isRequired,\r\n  resetHint: PropTypes.func.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nSearch.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default Search;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport { Seances } from '../../common/Seances';\r\nimport { createRoute } from '../../../../../utils/routes';\r\nimport { ROUTE } from '../../../../../constants';\r\n\r\nimport './Movie.scss';\r\n\r\nfunction Movie({ id, name, genres, poster, seances, className, history }) {\r\n  const goToMoviePage = () => history.push(createRoute(ROUTE.MOVIE, { id }));\r\n\r\n  return (\r\n    <div className={classNames('movie-box', className)}>\r\n      <img\r\n        alt='movie poster'\r\n        className='poster'\r\n        src={poster}\r\n        onClick={goToMoviePage}\r\n      />\r\n      <div className='main-info'>\r\n        <p className='genres'>{genres.join(', ')}</p>\r\n        <p className='title' onClick={goToMoviePage}>\r\n          {name}\r\n        </p>\r\n      </div>\r\n      <Seances movieName={name} seances={seances} className='seances' />\r\n    </div>\r\n  );\r\n}\r\n\r\nMovie.propTypes = {\r\n  id: PropTypes.number.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  genres: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\r\n  poster: PropTypes.string.isRequired,\r\n  seances: PropTypes.objectOf(\r\n    PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        id: PropTypes.string.isRequired,\r\n        startTime: PropTypes.number.isRequired,\r\n        price: PropTypes.number.isRequired,\r\n      }),\r\n    ),\r\n  ).isRequired,\r\n  history: PropTypes.object.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nMovie.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default withRouter(Movie);\r\n","function createRoute(apiURL, replacer) {\r\n  const key = Object.keys(replacer)[0];\r\n  return apiURL.replace(`:${key}`, replacer[key]);\r\n}\r\n\r\nexport { createRoute };\r\n","import React, { useEffect, useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Movie } from '../Movie';\r\nimport { Spinner } from '../../../common/Spinner';\r\nimport { NotFoundComponent } from '../../../common/NotFoundComponent';\r\nimport { NoScheduleComponent } from '../../../common/NoScheduleComponent';\r\nimport { fetchMoviesRequest } from '../../../../../ducks/data/movies/actions';\r\nimport { selectMovies } from '../../../../../ducks/data/movies/selectors';\r\nimport { keepSeancesAt } from '../../utils/movies';\r\n\r\nimport './MoviesList.scss';\r\n\r\nconst MOVIES_STATE = {\r\n  LOADING: 0,\r\n  SCHEDULE_NOT_EXIST: 1,\r\n  NOT_FOUND: 2,\r\n  FOUND: 3,\r\n};\r\n\r\nfunction getMoviesState(movies, selectedMovies) {\r\n  if (!movies.length) {\r\n    return MOVIES_STATE.SCHEDULE_NOT_EXIST;\r\n  }\r\n  if (!selectedMovies.length) {\r\n    return MOVIES_STATE.NOT_FOUND;\r\n  }\r\n  return MOVIES_STATE.FOUND;\r\n}\r\n\r\nfunction MoviesList({\r\n  movies,\r\n  movieHint,\r\n  selectedRange,\r\n  selectedDate,\r\n  resetFiltersSettings,\r\n}) {\r\n  const selectedMovies = useMemo(\r\n    () =>\r\n      movies\r\n        .filter(movie =>\r\n          movie.name.toLowerCase().includes(movieHint.toLowerCase().trim()),\r\n        )\r\n        .map(movie => ({\r\n          ...movie,\r\n          seances: keepSeancesAt(selectedDate, selectedRange, movie.seances),\r\n        }))\r\n        .filter(movie => movie.seances),\r\n    [movies, movieHint, selectedRange],\r\n  );\r\n\r\n  const moviesState = getMoviesState(movies, selectedMovies);\r\n  switch (moviesState) {\r\n    case MOVIES_STATE.LOADING:\r\n      return <Spinner className='info-box' />;\r\n    case MOVIES_STATE.SCHEDULE_NOT_EXIST:\r\n      return <NoScheduleComponent className='info-box' />;\r\n    case MOVIES_STATE.NOT_FOUND:\r\n      return (\r\n        <NotFoundComponent\r\n          className='info-box'\r\n          resetSettings={resetFiltersSettings}\r\n        />\r\n      );\r\n    case MOVIES_STATE.FOUND:\r\n      return (\r\n        <ul className='movie-list'>\r\n          {selectedMovies.map(movie => (\r\n            <Movie\r\n              key={movie.id}\r\n              id={movie.id}\r\n              name={movie.name}\r\n              genres={movie.genres}\r\n              poster={movie.poster}\r\n              seances={movie.seances}\r\n            />\r\n          ))}\r\n        </ul>\r\n      );\r\n  }\r\n}\r\n\r\nMoviesList.propTypes = {\r\n  movies: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n      name: PropTypes.string.isRequired,\r\n      genres: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\r\n      poster: PropTypes.string.isRequired,\r\n      seances: PropTypes.objectOf(\r\n        PropTypes.arrayOf(\r\n          PropTypes.shape({\r\n            id: PropTypes.string.isRequired,\r\n            startTime: PropTypes.number.isRequired,\r\n            price: PropTypes.number.isRequired,\r\n          }),\r\n        ),\r\n      ).isRequired,\r\n    }),\r\n  ).isRequired,\r\n  movieHint: PropTypes.string.isRequired,\r\n  selectedRange: PropTypes.shape({\r\n    start: PropTypes.number.isRequired,\r\n    end: PropTypes.number.isRequired,\r\n  }).isRequired,\r\n  selectedDate: PropTypes.string.isRequired,\r\n  resetFiltersSettings: PropTypes.func.isRequired,\r\n};\r\n\r\n// eslint-disable-next-line react/prop-types\r\nfunction MoviesListContainer({ movies, selectedDate, fetchMovies, ...props }) {\r\n  useEffect(() => {\r\n    fetchMovies(selectedDate);\r\n  }, [selectedDate]);\r\n\r\n  return movies ? (\r\n    <MoviesList movies={movies} selectedDate={selectedDate} {...props} />\r\n  ) : (\r\n    <Spinner className='info-box' />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  movies: selectMovies(state),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  fetchMovies: fetchMoviesRequest,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(MoviesListContainer);\r\n","import React, { useState } from 'react';\r\n\r\nimport { Search } from './Search';\r\nimport { DateFilter } from './DateFilter';\r\nimport { MoviesListContainer } from './MoviesList';\r\nimport { RangeSlider } from '../../../base-components/RangeSlider';\r\nimport { MINUTES_IN_HOUR, toTimeLabel } from '../../../../utils/time';\r\nimport { SEANCES_TIME_RANGE } from '../../../../constants';\r\nimport { getTodayDate } from '../../../../utils/date';\r\n\r\nimport './MoviesPage.scss';\r\n\r\nconst MOVIE_SEARCH_PLACEHOLDER = '';\r\n\r\nfunction MoviesPage() {\r\n  const [movieHint, setMovieHint] = useState('');\r\n  const [selectedRange, setSelectedRange] = useState(SEANCES_TIME_RANGE);\r\n  const [selectedDate, setSelectedDate] = useState(getTodayDate());\r\n\r\n  const handleResetFiltersSettings = () => {\r\n    setMovieHint('');\r\n    setSelectedRange(SEANCES_TIME_RANGE);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1 className='page-title'></h1>\r\n      <DateFilter\r\n        className='movies-date-filter'\r\n        selectedDate={selectedDate}\r\n        selectDate={setSelectedDate}\r\n      />\r\n      <div className='sub-filters'>\r\n        <Search\r\n          hint={movieHint}\r\n          placeholder={MOVIE_SEARCH_PLACEHOLDER}\r\n          onHintChange={event => setMovieHint(event.target.value)}\r\n          resetHint={() => setMovieHint('')}\r\n          className='search'\r\n        />\r\n        <RangeSlider\r\n          className='time-range-slider'\r\n          min={SEANCES_TIME_RANGE.start}\r\n          max={SEANCES_TIME_RANGE.end}\r\n          valuePerStep={MINUTES_IN_HOUR}\r\n          selectedRange={selectedRange}\r\n          onChange={setSelectedRange}\r\n          formatLabel={toTimeLabel}\r\n        />\r\n      </div>\r\n      <MoviesListContainer\r\n        movieHint={movieHint}\r\n        selectedRange={selectedRange}\r\n        selectedDate={selectedDate}\r\n        resetFiltersSettings={handleResetFiltersSettings}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MoviesPage;\r\n","import React from 'react';\r\nimport { Redirect, Route, Switch, withRouter } from 'react-router-dom';\r\n\r\nimport { BestDealsPage } from '../bestDeals/BestDealsPage';\r\nimport { MoviePageContainer } from '../movies/movie-page';\r\nimport { MoviesPage } from '../movies/movies-page';\r\nimport { ROUTE } from '../../../constants';\r\n\r\nfunction Routes(location) {\r\n  return (\r\n    <Switch>\r\n      <Route\r\n        location={location}\r\n        exact\r\n        path={ROUTE.MOVIES}\r\n        component={MoviesPage}\r\n      />\r\n      <Route\r\n        location={location}\r\n        exact\r\n        path={ROUTE.MOVIE}\r\n        component={MoviePageContainer}\r\n      />\r\n      <Route\r\n        location={location}\r\n        exact\r\n        path={ROUTE.SOON_MOVIES}\r\n        component={BestDealsPage}\r\n      />\r\n      <Route\r\n        location={location}\r\n        exact\r\n        path={ROUTE.BEST_DEALS}\r\n        component={BestDealsPage}\r\n      />\r\n      <Redirect to={ROUTE.MOVIES} />\r\n    </Switch>\r\n  );\r\n}\r\n\r\nRoutes.propTypes = {};\r\n\r\nexport default withRouter(Routes);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { FocusOn } from 'react-focus-on';\r\n\r\nimport crossIcon from '../../../assets/images/dark-cross-icon.svg';\r\n\r\nimport './Modal.scss';\r\n\r\nfunction Modal({ children, onClose, showCloseIcon, className }) {\r\n  return (\r\n    <FocusOn onEscapeKey={onClose}>\r\n      <div className='modal-overlay' onClick={onClose} />\r\n      <div className={classNames('modal', className)}>\r\n        {showCloseIcon && (\r\n          <input\r\n            type='image'\r\n            alt='close'\r\n            src={crossIcon}\r\n            tabIndex={0}\r\n            onClick={onClose}\r\n            className='close-icon'\r\n            aria-label='button to close modal'\r\n          />\r\n        )}\r\n        {children}\r\n      </div>\r\n    </FocusOn>\r\n  );\r\n}\r\n\r\nModal.propTypes = {\r\n  children: PropTypes.any.isRequired,\r\n  onClose: PropTypes.func,\r\n  showCloseIcon: PropTypes.bool,\r\n  className: PropTypes.string,\r\n};\r\n\r\nModal.defaultProps = {\r\n  isOpen: true,\r\n  onClose: () => {},\r\n  showCloseIcon: true,\r\n  className: '',\r\n};\r\n\r\nexport default Modal;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Modal } from '../../../base-components/Modal';\r\nimport { Button } from '../../../base-components/Button';\r\nimport { closeModal } from '../../../../ducks/ui/modals/actions';\r\n\r\nimport './StatusModal.scss';\r\n\r\nfunction StatusModal({ statusMsg, icon, closeButtonLabel, closeModal }) {\r\n  return (\r\n    <Modal className='status-modal' onClose={closeModal} showCloseIcon={false}>\r\n      <div className='status-msg-box'>\r\n        <img alt='' className='icon' src={icon} />\r\n        <p className='status-msg'>{statusMsg}</p>\r\n        <Button className='close-btn' onClick={closeModal}>\r\n          {closeButtonLabel}\r\n        </Button>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  closeModal,\r\n};\r\n\r\nStatusModal.propTypes = {\r\n  closeModal: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps,\r\n)(StatusModal);\r\n","import React from 'react';\r\n\r\nimport { StatusModal } from '../../common/StatusModal';\r\n\r\nimport sadnessIcon from '../../../../assets/images/sad-icon.svg';\r\n\r\nfunction ReservationFailureModal() {\r\n  return (\r\n    <StatusModal\r\n      statusMsg={' ,   ,\\n    '}\r\n      icon={sadnessIcon}\r\n      closeButtonLabel=''\r\n    />\r\n  );\r\n}\r\n\r\nexport default ReservationFailureModal;\r\n","import React from 'react';\r\n\r\nimport { StatusModal } from '../../common/StatusModal';\r\n\r\nimport sadnessIcon from '../../../../assets/images/sad-icon.svg';\r\n\r\nfunction NotAvailableAuthModal() {\r\n  return (\r\n    <StatusModal\r\n      statusMsg={\r\n        ' ,   \\n   '\r\n      }\r\n      icon={sadnessIcon}\r\n      closeButtonLabel=''\r\n    />\r\n  );\r\n}\r\n\r\nexport default NotAvailableAuthModal;\r\n","import React from 'react';\r\n\r\nimport { StatusModal } from '../../common/StatusModal';\r\n\r\nimport congratIcon from '../../../../assets/images/congrat-icon.svg';\r\n\r\nfunction PaymentSuccessModal() {\r\n  return (\r\n    <StatusModal\r\n      statusMsg='  !'\r\n      icon={congratIcon}\r\n      closeButtonLabel=''\r\n    />\r\n  );\r\n}\r\n\r\nexport default PaymentSuccessModal;\r\n","import { useState, useCallback, useMemo } from 'react';\r\n\r\nfunction useInputState({\r\n  initialValue,\r\n  shouldMatch = '/.*/',\r\n  required = false,\r\n}) {\r\n  const [input, setInput] = useState(initialValue);\r\n  const [touched, setTouched] = useState(false);\r\n\r\n  const handleInputChange = useCallback(event => {\r\n    setInput(event.target.value);\r\n    setTouched(true);\r\n  }, shouldMatch);\r\n\r\n  const handleBlur = useCallback(() => {\r\n    setTouched(true);\r\n  }, []);\r\n\r\n  const valid = useMemo(() => {\r\n    const matchPattern = shouldMatch.test(input);\r\n    const notEmpty = input !== '';\r\n\r\n    return (!required || notEmpty) && matchPattern;\r\n  }, [input, shouldMatch, required]);\r\n\r\n  return [input, handleInputChange, handleBlur, valid, touched];\r\n}\r\n\r\nexport { useInputState };\r\n","export function selectReservationStatus(state) {\r\n  return state.tickets.reservationStatus;\r\n}\r\n\r\nexport function selectPaymentStatus(state) {\r\n  return state.tickets.paymentStatus;\r\n}\r\n","export const RESERVE_TICKETS = {\r\n  REQUEST: '@@tickets/RESERVE_TICKETS_REQUEST',\r\n  SUCCESS: '@@tickets/RESERVE_TICKETS_SUCCESS',\r\n  ERROR: '@@tickets/RESERVE_TICKETS_ERROR',\r\n};\r\n\r\nexport const PAY_TICKETS = {\r\n  REQUEST: '@@tickets/PAY_TICKETS_REQUEST',\r\n  SUCCESS: '@@tickets/PAY_TICKETS_SUCCESS',\r\n  ERROR: '@@tickets/PAY_TICKETS_ERROR',\r\n};\r\n\r\nexport const RESET_RESERVATION_STATUS = '@@tickets/RESET_RESERVATION_STATUS';\r\n\r\nexport const RESET_PAYMENT_STATUS = '@@tickets/RESET_PAYMENT_STATUS';\r\n","import {\r\n  PAY_TICKETS,\r\n  RESERVE_TICKETS,\r\n  RESET_PAYMENT_STATUS,\r\n  RESET_RESERVATION_STATUS,\r\n} from './action-types';\r\n\r\nexport const reserveTicketsRequest = (seanceId, seatsId) => {\r\n  return {\r\n    type: RESERVE_TICKETS.REQUEST,\r\n    seanceId,\r\n    seatsId,\r\n  };\r\n};\r\n\r\nexport const reserveTicketsSuccess = (seanceId, reservedSeatsId) => {\r\n  return {\r\n    type: RESERVE_TICKETS.SUCCESS,\r\n    reservedSeatsId,\r\n  };\r\n};\r\n\r\nexport const reserveTicketsError = error => {\r\n  return {\r\n    type: RESERVE_TICKETS.ERROR,\r\n    error,\r\n  };\r\n};\r\n\r\nexport const resetReservationStatus = () => {\r\n  return {\r\n    type: RESET_RESERVATION_STATUS,\r\n  };\r\n};\r\n\r\nexport const payTicketsRequest = (seanceId, seatsId) => {\r\n  return {\r\n    type: PAY_TICKETS.REQUEST,\r\n    seanceId,\r\n    seatsId,\r\n  };\r\n};\r\n\r\nexport const payTicketsSuccess = (seanceId, seatsId) => {\r\n  return {\r\n    type: PAY_TICKETS.SUCCESS,\r\n    seanceId,\r\n    seatsId,\r\n  };\r\n};\r\n\r\nexport const payTicketsError = error => {\r\n  return {\r\n    type: PAY_TICKETS.ERROR,\r\n    error,\r\n  };\r\n};\r\n\r\nexport const resetPaymentStatus = () => {\r\n  return {\r\n    type: RESET_PAYMENT_STATUS,\r\n  };\r\n};\r\n","import React, { useEffect, useMemo, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport classNames from 'classnames';\r\nimport Card from 'react-credit-cards';\r\nimport declint from 'declint-ru';\r\n\r\nimport { Spinner } from '../../common/Spinner';\r\nimport { Button } from '../../../base-components/Button';\r\nimport { useInputState } from '../../../../hooks/useInputState';\r\nimport { useFocusState } from '../../../../hooks/useFocusState';\r\nimport { closeModal, showModal } from '../../../../ducks/ui/modals/actions';\r\nimport { selectPaymentStatus } from '../../../../ducks/data/tickets/selectors';\r\nimport { MODAL, RUSSIAN_CURRENCY_SYMBOL, STATUS } from '../../../../constants';\r\n\r\nimport {\r\n  payTicketsRequest,\r\n  resetPaymentStatus,\r\n  resetReservationStatus,\r\n} from '../../../../ducks/data/tickets/actions';\r\n\r\nimport 'react-credit-cards/lib/styles.scss';\r\nimport './TicketsPaymentPage.scss';\r\n\r\nfunction TicketsPaymentPage({\r\n  orderDetails,\r\n  payTickets,\r\n  paymentStatus,\r\n  showModal,\r\n  closeModal,\r\n  resetReservationStatus,\r\n  resetPaymentStatus,\r\n}) {\r\n  useEffect(() => {\r\n    resetReservationStatus();\r\n  }, []);\r\n\r\n  const [\r\n    number,\r\n    handleNumberChange,\r\n    handleNumberBlur,\r\n    numberValid,\r\n    numberTouched,\r\n  ] = useInputState({\r\n    initialValue: '',\r\n    shouldMatch: useMemo(() => /^[\\d| ]{16,19}$/, []),\r\n    required: true,\r\n  });\r\n  const [\r\n    name,\r\n    handleNameChange,\r\n    handleNameBlur,\r\n    nameValid,\r\n    nameTouched,\r\n  ] = useInputState({\r\n    initialValue: '',\r\n    shouldMatch: useMemo(() => /^[[a-zA-Z]| ]+$/, []),\r\n    required: true,\r\n  });\r\n  const [\r\n    expiry,\r\n    handleExpiryChange,\r\n    handleExpiryBlur,\r\n    expiryValid,\r\n    expiryTouched,\r\n  ] = useInputState({\r\n    initialValue: '',\r\n    shouldMatch: useMemo(() => /^\\d\\d\\/\\d\\d$/, []),\r\n    required: true,\r\n  });\r\n  const [\r\n    cvc,\r\n    handleCvcChange,\r\n    handleCvcBlur,\r\n    cvcValid,\r\n    cvcTouched,\r\n  ] = useInputState({\r\n    initialValue: '',\r\n    shouldMatch: useMemo(() => /^\\d{3,4}$/, []),\r\n    required: true,\r\n  });\r\n\r\n  const allValid = useMemo(() => {\r\n    return numberValid && nameValid && expiryValid && cvcValid;\r\n  }, [numberValid, nameValid, expiryValid, cvcValid]);\r\n\r\n  const [focused, handleFocusChange] = useFocusState('');\r\n\r\n  const ticketsCount = declint(orderDetails.seatsId.length, [\r\n    '%s ',\r\n    '%s ',\r\n    '%s ',\r\n  ]);\r\n\r\n  const handleSubmit = useCallback(() => {\r\n    payTickets(orderDetails.seanceId, orderDetails.seatsId);\r\n  }, []);\r\n\r\n  const showPaymentSuccessModal = useCallback(() => {\r\n    resetPaymentStatus();\r\n    closeModal();\r\n    showModal(MODAL.PAYMENT_SUCCESS);\r\n  }, []);\r\n\r\n  const showPaymentFailureModal = useCallback(() => {\r\n    showModal(MODAL.PAYMENT_FAILURE);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    switch (paymentStatus) {\r\n      case STATUS.SUCCESS: {\r\n        showPaymentSuccessModal();\r\n        break;\r\n      }\r\n      case STATUS.ERROR: {\r\n        showPaymentFailureModal();\r\n        break;\r\n      }\r\n      case STATUS.REQUEST: {\r\n        break;\r\n      }\r\n      case STATUS.IDLE: {\r\n        break;\r\n      }\r\n      default: {\r\n        console.error('Unknown status ', paymentStatus);\r\n      }\r\n    }\r\n  }, [paymentStatus]);\r\n\r\n  return paymentStatus === STATUS.REQUEST ? (\r\n    <Spinner message='  ' />\r\n  ) : (\r\n    <div className='tickets-payment-box'>\r\n      <header className='tickets-payment-header'>\r\n        <h1 className='tickets-payment-title'> </h1>\r\n      </header>\r\n      <div className='tickets-info-box'>\r\n        <p className='tickets-info'>\r\n          {`= ${ticketsCount} ${\r\n            orderDetails.totalPrice\r\n          }${RUSSIAN_CURRENCY_SYMBOL}`}\r\n        </p>\r\n      </div>\r\n      <div className='payment-info-box'>\r\n        <Card\r\n          number={number}\r\n          name={name}\r\n          expiry={expiry}\r\n          cvc={cvc}\r\n          focused={focused}\r\n          className='card'\r\n          placeholders={{\r\n            name: 'IVAN IVANOV',\r\n          }}\r\n        />\r\n        <div className='form'>\r\n          <input\r\n            type='tel'\r\n            name='number'\r\n            maxLength={19}\r\n            className={classNames(\r\n              'form-input',\r\n              numberTouched && !numberValid && 'invalid',\r\n            )}\r\n            placeholder=' '\r\n            onChange={handleNumberChange}\r\n            onFocus={handleFocusChange}\r\n            onBlur={handleNumberBlur}\r\n          />\r\n          <input\r\n            type='text'\r\n            name='name'\r\n            className={classNames(\r\n              'form-input',\r\n              nameTouched && !nameValid && 'invalid',\r\n            )}\r\n            placeholder='IVAN IVANOV'\r\n            onChange={handleNameChange}\r\n            onFocus={handleFocusChange}\r\n            onBlur={handleNameBlur}\r\n          />\r\n          <input\r\n            type='tel'\r\n            name='expiry'\r\n            maxLength={5}\r\n            className={classNames(\r\n              'form-input',\r\n              expiryTouched && !expiryValid && 'invalid',\r\n            )}\r\n            placeholder=' '\r\n            onChange={handleExpiryChange}\r\n            onFocus={handleFocusChange}\r\n            onBlur={handleExpiryBlur}\r\n          />\r\n          <input\r\n            type='tel'\r\n            name='cvc'\r\n            maxLength={3}\r\n            className={classNames(\r\n              'form-input',\r\n              cvcTouched && !cvcValid && 'invalid',\r\n            )}\r\n            placeholder='CVC'\r\n            onChange={handleCvcChange}\r\n            onFocus={handleFocusChange}\r\n            onBlur={handleCvcBlur}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className='payment-actions'>\r\n        <Button\r\n          className={classNames('pay-btn', !allValid && 'disabled')}\r\n          onClick={handleSubmit}\r\n          disabled={!allValid}\r\n        >\r\n          \r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  paymentStatus: selectPaymentStatus(state),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  showModal,\r\n  closeModal,\r\n  resetReservationStatus,\r\n  resetPaymentStatus,\r\n  payTickets: payTicketsRequest,\r\n};\r\n\r\nTicketsPaymentPage.propTypes = {\r\n  orderDetails: PropTypes.shape({\r\n    seanceId: PropTypes.string.isRequired,\r\n    seatsId: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n    totalPrice: PropTypes.number.isRequired,\r\n  }),\r\n  showModal: PropTypes.func.isRequired,\r\n  closeModal: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(TicketsPaymentPage);\r\n","import { useState } from 'react';\r\n\r\nfunction useFocusState(initialValue) {\r\n  const [focused, setFocus] = useState(initialValue);\r\n\r\n  function handleFocusChange(event) {\r\n    setFocus(event.target.name);\r\n  }\r\n\r\n  return [focused, handleFocusChange];\r\n}\r\n\r\nexport { useFocusState };\r\n","import React, { useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Modal } from '../../../base-components/Modal';\r\nimport { TicketsPaymentPage } from '../TicketsPaymentPage';\r\nimport { resetPaymentStatus } from '../../../../ducks/data/tickets/actions';\r\nimport { closeModal } from '../../../../ducks/ui/modals/actions';\r\n\r\nfunction TicketsPaymentModal({\r\n  closeModal,\r\n  resetPaymentStatus,\r\n  ...ticketsPaymentPageProps\r\n}) {\r\n  const handleModalClose = useCallback(() => {\r\n    resetPaymentStatus();\r\n    closeModal();\r\n  }, []);\r\n\r\n  return (\r\n    <Modal onClose={handleModalClose}>\r\n      <TicketsPaymentPage {...ticketsPaymentPageProps} />\r\n    </Modal>\r\n  );\r\n}\r\n\r\nTicketsPaymentModal.propTypes = {\r\n  resetPaymentStatus: PropTypes.func.isRequired,\r\n  closeModal: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  resetPaymentStatus,\r\n  closeModal,\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps,\r\n)(TicketsPaymentModal);\r\n","import React, { useState, useCallback, useEffect, useMemo } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment/moment';\r\nimport { uniqueId } from 'lodash';\r\nimport classNames from 'classnames';\r\n\r\nimport {\r\n  getTodayDate,\r\n  getTomorrowDate,\r\n  toAppDateFormat,\r\n} from '../../../../utils/date';\r\n\r\nimport { Spinner } from '../../common/Spinner';\r\nimport { Button } from '../../../base-components/Button';\r\nimport { Tooltip } from '../../../base-components/Tooltip';\r\nimport { MODAL, RUSSIAN_CURRENCY_SYMBOL, STATUS } from '../../../../constants';\r\nimport { selectReservationStatus } from '../../../../ducks/data/tickets/selectors';\r\nimport { reserveTicketsRequest } from '../../../../ducks/data/tickets/actions';\r\nimport { closeModal, showModal } from '../../../../ducks/ui/modals/actions';\r\n\r\nimport hallScreen from '../../../../assets/images/cropped-screen.svg';\r\n\r\nimport './SeanceTicketsPage.scss';\r\n\r\nfunction SeanceTicketsPage({\r\n  id: seanceId,\r\n  movieName,\r\n  startTime,\r\n  hallScheme,\r\n  takenSeats,\r\n  reservedSeats,\r\n  reserveTickets,\r\n  reservationStatus,\r\n  closeModal,\r\n  showModal,\r\n}) {\r\n  const [selectedSeats, setSelectedSeats] = useState([]);\r\n  const selectSeat = useCallback((seatId, price) => {\r\n    const seatToSelect = {\r\n      id: seatId,\r\n      price,\r\n    };\r\n    setSelectedSeats(selectedSeats => selectedSeats.concat(seatToSelect));\r\n  }, []);\r\n\r\n  const unselectSeat = useCallback(seatId => {\r\n    setSelectedSeats(selectedSeats => {\r\n      const idxToRemoveAt = selectedSeats.findIndex(seat => seat.id === seatId);\r\n\r\n      if (idxToRemoveAt === -1) {\r\n        console.error(`Try to unselect not selected seat with id ${seatId} `);\r\n        return selectedSeats;\r\n      }\r\n\r\n      const newSelectedSeats = [...selectedSeats];\r\n      newSelectedSeats.splice(idxToRemoveAt, 1);\r\n\r\n      return newSelectedSeats;\r\n    });\r\n  }, []);\r\n\r\n  const seatsAreNotSelected = !selectedSeats.length;\r\n\r\n  const totalPrice = useMemo(() => {\r\n    return selectedSeats.reduce(\r\n      (totalPrice, seat) => (totalPrice += seat.price),\r\n      0,\r\n    );\r\n  }, [selectedSeats]);\r\n\r\n  const buyTickets = useCallback(() => {\r\n    const seatsId = selectedSeats.map(seat => seat.id);\r\n    reserveTickets(seanceId, seatsId);\r\n  }, [selectedSeats]);\r\n\r\n  const goToTicketsPayment = useCallback(() => {\r\n    closeModal();\r\n\r\n    const seatsId = selectedSeats.map(seat => seat.id);\r\n    const modalProps = { orderDetails: { seanceId, seatsId, totalPrice } };\r\n\r\n    showModal(MODAL.TICKETS_PAYMENT, modalProps);\r\n  }, [selectedSeats, totalPrice]);\r\n\r\n  const showReservationFailureModal = useCallback(() => {\r\n    setSelectedSeats([]);\r\n    showModal(MODAL.RESERVATION_FAILURE);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    switch (reservationStatus) {\r\n      case STATUS.SUCCESS: {\r\n        goToTicketsPayment();\r\n        break;\r\n      }\r\n      case STATUS.ERROR: {\r\n        showReservationFailureModal();\r\n        break;\r\n      }\r\n      case STATUS.REQUEST: {\r\n        break;\r\n      }\r\n      case STATUS.IDLE: {\r\n        break;\r\n      }\r\n      default: {\r\n        console.error('Unknown status ', reservationStatus);\r\n      }\r\n    }\r\n  }, [reservationStatus]);\r\n\r\n  const today = getTodayDate();\r\n  const tomorrow = getTomorrowDate();\r\n  const seanceMoment = moment.unix(startTime);\r\n  const seanceDate = toAppDateFormat(seanceMoment);\r\n\r\n  let seanceDateAppearance = '';\r\n  switch (seanceDate) {\r\n    case today:\r\n      seanceDateAppearance = '';\r\n      break;\r\n    case tomorrow:\r\n      seanceDateAppearance = '';\r\n      break;\r\n    default:\r\n      seanceDateAppearance = seanceMoment.format('DD MMMM');\r\n      break;\r\n  }\r\n  const seanceStartTimeAppearance = moment.unix(startTime).format('HH:mm');\r\n\r\n  return reservationStatus === STATUS.REQUEST ||\r\n    reservationStatus === STATUS.SUCCESS ? (\r\n      <Spinner message=' ' />\r\n  ) : (\r\n    <div className='seance-tickets-page-container'>\r\n      <div className='movie-title-box'>\r\n        <h1 className='movie-title'>{movieName}</h1>\r\n      </div>\r\n      <div className='seance-start-time-box'>\r\n        <p className='seance-start-time'>\r\n          {`${seanceDateAppearance}  ${seanceStartTimeAppearance}`}\r\n        </p>\r\n      </div>\r\n      <div className='hall-scheme-box'>\r\n        <object tabIndex={-1} data={hallScreen} style={{ width: '450px', height: '150px' }}>\r\n          <p>Screen</p>\r\n        </object>\r\n        {hallScheme.map(row => {\r\n          if (!row)\r\n            return <div key={uniqueId('empty-row')} className='empty-row' />;\r\n\r\n          return (\r\n            <div key={row.number} className='row'>\r\n              {row.seats.map((seat, idx) => {\r\n                if (!seat) return <div key={idx} className='empty-space' />;\r\n\r\n                const isAvailable =\r\n                  !takenSeats.includes(seat.id) &&\r\n                  !reservedSeats.includes(seat.id);\r\n                const isSelected = selectedSeats.find(\r\n                  selectedSeat => selectedSeat.id === seat.id,\r\n                );\r\n\r\n                return isAvailable ? (\r\n                  <div key={idx} className='seat-box'>\r\n                    <div\r\n                      className={\r\n                        isSelected ? 'selected-seat' : 'available-seat'\r\n                      }\r\n                      onClick={\r\n                        !isSelected\r\n                          ? () => selectSeat(seat.id, seat.price)\r\n                          : () => unselectSeat(seat.id)\r\n                      }\r\n                    >\r\n                      {seat.number}\r\n                      <Tooltip className='seat-tooltip'>\r\n                        <p className='seat-price'>\r\n                          {`${seat.price} ${RUSSIAN_CURRENCY_SYMBOL}`}\r\n                        </p>\r\n                        <p className='seat-position'>\r\n                          {`${row.number} , ${seat.number} `}\r\n                        </p>\r\n                      </Tooltip>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div key={seat.id} className='seat-box'>\r\n                    <div className='not-available-seat' />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <div className='tickets-purchase-box'>\r\n        {!seatsAreNotSelected && (\r\n          <p className='total-price'>{`${totalPrice} ${RUSSIAN_CURRENCY_SYMBOL}`}</p>\r\n        )}\r\n        <Button\r\n          className={classNames('buy-btn', seatsAreNotSelected && 'disabled')}\r\n          onClick={buyTickets}\r\n          disabled={seatsAreNotSelected}\r\n        >\r\n          \r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nSeanceTicketsPage.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  movieName: PropTypes.string.isRequired,\r\n  startTime: PropTypes.number.isRequired,\r\n  hallScheme: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      number: PropTypes.number.isRequired,\r\n      seats: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n          number: PropTypes.number,\r\n          price: PropTypes.number,\r\n        }),\r\n      ),\r\n    }),\r\n  ).isRequired,\r\n  takenSeats: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n  reservedSeats: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  reservationStatus: selectReservationStatus(state),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  closeModal,\r\n  showModal,\r\n  reserveTickets: reserveTicketsRequest,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(SeanceTicketsPage);\r\n","import React, { useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Modal } from '../../../base-components/Modal';\r\nimport { SeanceTicketsPage } from '../SeanceTicketsPage';\r\nimport { closeModal } from '../../../../ducks/ui/modals/actions';\r\nimport { resetReservationStatus } from '../../../../ducks/data/tickets/actions';\r\n\r\nfunction SeanceTicketsModal({\r\n  resetReservationStatus,\r\n  closeModal,\r\n  ...seanceTicketsPageProps\r\n}) {\r\n  const handleModalClose = useCallback(() => {\r\n    resetReservationStatus();\r\n    closeModal();\r\n  }, []);\r\n\r\n  return (\r\n    <Modal onClose={handleModalClose}>\r\n      <SeanceTicketsPage {...seanceTicketsPageProps} />\r\n    </Modal>\r\n  );\r\n}\r\n\r\nSeanceTicketsModal.propTypes = {\r\n  closeModal: PropTypes.func.isRequired,\r\n  resetReservationStatus: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  closeModal,\r\n  resetReservationStatus,\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps,\r\n)(SeanceTicketsModal);\r\n","import React from 'react';\r\n\r\nimport { StatusModal } from '../../common/StatusModal';\r\n\r\nimport sadnessIcon from '../../../../assets/images/sad-icon.svg';\r\n\r\nfunction PaymentFailureModal() {\r\n  return (\r\n    <StatusModal\r\n      statusMsg='  \\n  '\r\n      icon={sadnessIcon}\r\n      closeButtonLabel=''\r\n    />\r\n  );\r\n}\r\n\r\nexport default PaymentFailureModal;\r\n","const selectModalsToShow = state => state.modals.modalsToShow;\r\n\r\nexport { selectModalsToShow };\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { ReservationFailureModal } from '../../app-components/seanceTickets/ReservationFailureModal';\r\nimport { NotAvailableAuthModal } from '../../app-components/auth/NotAvailableAuthModal';\r\nimport { PaymentSuccessModal } from '../../app-components/ticketsPayment/PaymentSuccessModal';\r\nimport { TicketsPaymentModal } from '../../app-components/ticketsPayment/TicketsPaymentModal';\r\nimport { SeanceTicketsModal } from '../../app-components/seanceTickets/SeanceTicketsModal';\r\nimport { PaymentFailureModal } from '../../app-components/ticketsPayment/PaymentFailureModal';\r\nimport { selectModalsToShow } from '../../../ducks/ui/modals/selectors';\r\nimport { MODAL } from '../../../constants';\r\n\r\nconst MODAL_COMPONENTS = {\r\n  [MODAL.SEANCE_TICKETS]: SeanceTicketsModal,\r\n  [MODAL.TICKETS_PAYMENT]: TicketsPaymentModal,\r\n  [MODAL.PAYMENT_SUCCESS]: PaymentSuccessModal,\r\n  [MODAL.NOT_AVAILABLE_AUTH]: NotAvailableAuthModal,\r\n  [MODAL.RESERVATION_FAILURE]: ReservationFailureModal,\r\n  [MODAL.PAYMENT_FAILURE]: PaymentFailureModal,\r\n};\r\n\r\nfunction ModalManager({ modalsToShow }) {\r\n  return (\r\n    <React.Fragment>\r\n      {modalsToShow.map(modal => {\r\n        const SpecificModalComponent = MODAL_COMPONENTS[modal.modalType];\r\n        return (\r\n          <SpecificModalComponent key={modal.modalType} {...modal.modalProps} />\r\n        );\r\n      })}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nModalManager.propTypes = {\r\n  modalsToShow: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      modalType: PropTypes.oneOf([\r\n        MODAL.SEANCE_TICKETS,\r\n        MODAL.TICKETS_PAYMENT,\r\n        MODAL.PAYMENT_SUCCESS,\r\n        MODAL.NOT_AVAILABLE_AUTH,\r\n        MODAL.RESERVATION_FAILURE,\r\n        MODAL.PAYMENT_FAILURE,\r\n      ]).isRequired,\r\n      modalProps: PropTypes.object,\r\n    }).isRequired,\r\n  ).isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  modalsToShow: selectModalsToShow(state),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  null,\r\n)(ModalManager);\r\n","import { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nconst ScrollToTop = ({ children, location: { pathname } }) => {\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [pathname]);\r\n\r\n  return children;\r\n};\r\n\r\nScrollToTop.PropTypes = {\r\n  children: PropTypes.any.isRequired,\r\n  location: PropTypes.shape({\r\n    pathname: PropTypes.string.isRequired,\r\n  }),\r\n};\r\n\r\nexport default withRouter(ScrollToTop);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { NavBar } from '../navbar';\r\nimport { Routes } from '../routes';\r\nimport { ModalManager } from '../../base-components/ModalManager';\r\nimport ScrollToTop from '../../base-components/ScrollToTop/ScrollToTop';\r\n\r\nfunction App({ currentUser }) {\r\n  return (\r\n    <ScrollToTop>\r\n      <div className='app'>\r\n        <ModalManager />\r\n        <NavBar\r\n          currentUser={currentUser}\r\n          onLogout={() => {}}\r\n          onSettings={() => {}}\r\n        />\r\n        <div className='page'>\r\n          <Routes className='' />\r\n        </div>\r\n      </div>\r\n    </ScrollToTop>\r\n  );\r\n}\r\n\r\nApp.propTypes = {\r\n  currentUser: PropTypes.shape({\r\n    name: PropTypes.string.isRequired,\r\n    surname: PropTypes.string.isRequired,\r\n  }),\r\n};\r\n\r\nApp.defaultProps = {\r\n  currentUser: null,\r\n};\r\n\r\nexport default App;\r\n","import { FETCH_MOVIE, FETCH_MOVIES, FETCH_SEANCES } from './action-types';\r\n\r\nconst initialState = {\r\n  movies: null,\r\n  selectedMovie: null,\r\n  selectedMovieSeances: null,\r\n};\r\n\r\nexport const movies = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case FETCH_MOVIES.REQUEST: {\r\n      return {\r\n        ...state,\r\n        movies: null,\r\n      };\r\n    }\r\n    case FETCH_MOVIE.REQUEST: {\r\n      return {\r\n        ...state,\r\n        selectedMovie: null,\r\n      };\r\n    }\r\n    case FETCH_SEANCES.REQUEST: {\r\n      return {\r\n        ...state,\r\n        selectedMovieSeances: null,\r\n      };\r\n    }\r\n    case FETCH_MOVIES.SUCCESS: {\r\n      return {\r\n        ...state,\r\n        movies: action.movies,\r\n      };\r\n    }\r\n    case FETCH_MOVIE.SUCCESS: {\r\n      return {\r\n        ...state,\r\n        selectedMovie: action.movie,\r\n      };\r\n    }\r\n    case FETCH_SEANCES.SUCCESS: {\r\n      return {\r\n        ...state,\r\n        selectedMovieSeances: action.seances,\r\n      };\r\n    }\r\n    case FETCH_MOVIES.ERROR:\r\n    case FETCH_MOVIE.ERROR: {\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};","import {\r\n  PAY_TICKETS,\r\n  RESERVE_TICKETS,\r\n  RESET_PAYMENT_STATUS,\r\n  RESET_RESERVATION_STATUS,\r\n} from './action-types';\r\n\r\nimport { STATUS } from '../../../constants';\r\n\r\nconst initialState = {\r\n  paymentStatus: STATUS.IDLE,\r\n  reservationStatus: STATUS.IDLE,\r\n};\r\n\r\nexport const tickets = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case RESERVE_TICKETS.REQUEST: {\r\n      return {\r\n        ...state,\r\n        reservationStatus: STATUS.REQUEST,\r\n      };\r\n    }\r\n    case RESERVE_TICKETS.SUCCESS: {\r\n      const reservationCancelled = state.reservationStatus === STATUS.IDLE;\r\n      return {\r\n        ...state,\r\n        reservationStatus: reservationCancelled ? STATUS.IDLE : STATUS.SUCCESS,\r\n      };\r\n    }\r\n    case RESERVE_TICKETS.ERROR: {\r\n      const reservationCancelled = state.reservationStatus === STATUS.IDLE;\r\n      return {\r\n        ...state,\r\n        reservationStatus: reservationCancelled ? STATUS.IDLE : STATUS.ERROR,\r\n      };\r\n    }\r\n    case RESET_RESERVATION_STATUS: {\r\n      return {\r\n        ...state,\r\n        reservationStatus: STATUS.IDLE,\r\n      };\r\n    }\r\n    case PAY_TICKETS.REQUEST: {\r\n      return {\r\n        ...state,\r\n        paymentStatus: STATUS.REQUEST,\r\n      };\r\n    }\r\n    case PAY_TICKETS.SUCCESS: {\r\n      const paymentCancelled = state.paymentStatus === STATUS.IDLE;\r\n      return {\r\n        ...state,\r\n        paymentStatus: paymentCancelled ? STATUS.IDLE : STATUS.SUCCESS,\r\n      };\r\n    }\r\n    case PAY_TICKETS.ERROR: {\r\n      return {\r\n        ...state,\r\n        paymentStatus: STATUS.ERROR,\r\n      };\r\n    }\r\n    case RESET_PAYMENT_STATUS: {\r\n      return {\r\n        ...state,\r\n        paymentStatus: STATUS.IDLE,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { CLOSE_MODAL, SHOW_MODAL } from './action-types';\r\n\r\nconst initialState = {\r\n  modalsToShow: [],\r\n};\r\n\r\nexport const modals = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SHOW_MODAL: {\r\n      const modal = {\r\n        modalType: action.modalType,\r\n        modalProps: action.modalProps,\r\n      };\r\n      return {\r\n        ...state,\r\n        modalsToShow: [...state.modalsToShow, modal],\r\n      };\r\n    }\r\n    case CLOSE_MODAL: {\r\n      return {\r\n        ...state,\r\n        modalsToShow: state.modalsToShow.slice(\r\n          0,\r\n          state.modalsToShow.length - 1,\r\n        ),\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport { createBrowserHistory } from 'history';\r\nimport { connectRouter } from 'connected-react-router';\r\n\r\nimport { movies } from '../ducks/data/movies/reducer';\r\nimport { tickets } from '../ducks/data/tickets/reducer';\r\nimport { modals } from '../ducks/ui/modals/reducer';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nconst rootReducer = combineReducers({\r\n  router: connectRouter(history),\r\n  movies,\r\n  modals,\r\n  tickets,\r\n});\r\n\r\nexport { history, rootReducer };\r\n","/* eslint-disable no-use-before-define */\r\nimport { uniqueId } from 'lodash';\r\nimport {\r\n  bindTimeToDayMoment,\r\n  getTodayDate,\r\n  getTomorrowDate,\r\n  momentToUnixTime,\r\n  toMoment,\r\n} from '../utils/date';\r\n\r\nconst daysWithSchedule = [getTodayDate(), getTomorrowDate()];\r\nexport function getMovies(date) {\r\n  return daysWithSchedule.includes(date) ? generateMoviesFor(date) : [];\r\n}\r\n\r\nexport function getMovie(id) {\r\n  if (!movies[id]) throw new NotFoundError('Movie with given id is not found');\r\n  return movies[id];\r\n}\r\n\r\nexport function getSeances(movieId, date) {\r\n  return daysWithSchedule.includes(date)\r\n    ? generateSeancesFor(toMoment(date), movieId)\r\n    : {};\r\n}\r\n\r\nfunction generateMoviesFor(day) {\r\n  const dayStartMoment = toMoment(day).startOf('day');\r\n\r\n  const generatedMovies = [];\r\n  Object.keys(movies).forEach(movieId => {\r\n    const movie = movies[movieId];\r\n    generatedMovies.push({\r\n      id: parseInt(movieId, 10),\r\n      ...movie,\r\n      seances: generateSeancesFor(dayStartMoment, movieId),\r\n    });\r\n  });\r\n\r\n  return generatedMovies;\r\n}\r\n\r\nfunction generateSeancesFor(dayStartMoment, movieId) {\r\n  const seanceStartTimes2D =\r\n    possibleSeanceStartTimes[movieId % possibleSeanceStartTimes.length];\r\n  const seanceStartTimes3D =\r\n    possibleSeanceStartTimes[(movieId + 1) % possibleSeanceStartTimes.length];\r\n\r\n  return {\r\n    '3D': generateSeancesAt(\r\n      seanceStartTimes3D\r\n        .map(time => bindTimeToDayMoment(time, dayStartMoment))\r\n        .map(momentToUnixTime),\r\n    ),\r\n    '2D': generateSeancesAt(\r\n      seanceStartTimes2D\r\n        .map(time => bindTimeToDayMoment(time, dayStartMoment))\r\n        .map(momentToUnixTime),\r\n    ),\r\n  };\r\n}\r\n\r\nfunction generateSeancesAt(seanceStartTimes) {\r\n  return seanceStartTimes.map((startTime, idx) => ({\r\n    id: uniqueId(),\r\n    startTime,\r\n    hallScheme,\r\n    price: getMinPrice(hallScheme),\r\n    takenSeats: possibleTakenSeats[idx % possibleTakenSeats.length],\r\n    reservedSeats: possibleReservedSeats[idx % possibleReservedSeats.length],\r\n  }));\r\n}\r\n\r\nclass NotFoundError extends Error {\r\n  constructor(message) {\r\n    super();\r\n    this.name = 'NotFoundError';\r\n    this.message = message;\r\n  }\r\n}\r\n\r\nfunction getMinPrice(hallScheme) {\r\n  return hallScheme.reduce((min, row) => {\r\n    return row\r\n      ? row.seats.reduce((min, seat) => {\r\n          return seat ? Math.min(min, seat.price) : min;\r\n        }, min)\r\n      : min;\r\n  }, Infinity);\r\n}\r\n\r\nconst hallScheme = [\r\n  {\r\n    number: 1,\r\n    seats: [\r\n      null,\r\n      { id: 1, number: 1, price: 200 },\r\n      { id: 2, number: 2, price: 200 },\r\n      { id: 3, number: 3, price: 200 },\r\n      null,\r\n      { id: 4, number: 4, price: 200 },\r\n      { id: 5, number: 5, price: 200 },\r\n      { id: 6, number: 6, price: 200 },\r\n      null,\r\n      { id: 7, number: 7, price: 200 },\r\n      { id: 8, number: 8, price: 200 },\r\n      { id: 9, number: 9, price: 200 },\r\n    ],\r\n  },\r\n  {\r\n    number: 2,\r\n    seats: [\r\n      null,\r\n      { id: 10, number: 1, price: 200 },\r\n      { id: 11, number: 2, price: 200 },\r\n      { id: 12, number: 3, price: 200 },\r\n      null,\r\n      { id: 13, number: 4, price: 200 },\r\n      { id: 14, number: 5, price: 200 },\r\n      { id: 15, number: 6, price: 200 },\r\n      null,\r\n      { id: 16, number: 7, price: 200 },\r\n      { id: 17, number: 8, price: 200 },\r\n      { id: 18, number: 9, price: 200 },\r\n    ],\r\n  },\r\n  {\r\n    number: 3,\r\n    seats: [\r\n      null,\r\n      { id: 19, number: 1, price: 200 },\r\n      { id: 20, number: 2, price: 200 },\r\n      { id: 21, number: 3, price: 200 },\r\n      null,\r\n      { id: 22, number: 4, price: 200 },\r\n      { id: 23, number: 5, price: 200 },\r\n      { id: 24, number: 6, price: 200 },\r\n      null,\r\n      { id: 25, number: 7, price: 200 },\r\n      { id: 26, number: 8, price: 200 },\r\n      { id: 27, number: 9, price: 200 },\r\n    ],\r\n  },\r\n  {\r\n    number: 4,\r\n    seats: [\r\n      null,\r\n      { id: 28, number: 1, price: 200 },\r\n      { id: 29, number: 2, price: 200 },\r\n      { id: 30, number: 3, price: 200 },\r\n      null,\r\n      { id: 31, number: 4, price: 200 },\r\n      { id: 32, number: 5, price: 200 },\r\n      { id: 33, number: 6, price: 200 },\r\n      null,\r\n      { id: 34, number: 7, price: 200 },\r\n      { id: 35, number: 8, price: 200 },\r\n      { id: 36, number: 9, price: 200 },\r\n    ],\r\n  },\r\n  null,\r\n  {\r\n    number: 5,\r\n    seats: [\r\n      { id: 37, number: 1, price: 250 },\r\n      { id: 38, number: 2, price: 250 },\r\n      { id: 39, number: 3, price: 250 },\r\n      { id: 40, number: 4, price: 250 },\r\n      { id: 41, number: 5, price: 250 },\r\n      { id: 42, number: 6, price: 250 },\r\n      { id: 43, number: 7, price: 250 },\r\n      { id: 44, number: 8, price: 250 },\r\n      { id: 45, number: 9, price: 250 },\r\n      { id: 46, number: 10, price: 250 },\r\n      { id: 47, number: 11, price: 250 },\r\n      { id: 48, number: 12, price: 200 },\r\n    ],\r\n  },\r\n];\r\n\r\nconst possibleTakenSeats = [\r\n  [3, 13, 17, 24, 26, 28, 30],\r\n  [39, 40, 43, 44, 46],\r\n  [16, 17, 18, 19],\r\n  [2, 3, 4, 5, 6],\r\n];\r\n\r\nconst possibleReservedSeats = [\r\n  [16, 17, 18, 19],\r\n  [2, 3, 4, 5, 6],\r\n  [3, 13, 24, 26, 28, 30],\r\n  [39, 40, 43, 44, 46],\r\n];\r\n\r\nconst possibleSeanceStartTimes = [\r\n  ['12:30', '14:30', '16:50', '17:50', '19:20'],\r\n  ['12:30', '14:30', '16:50', '17:50', '19:20'],\r\n  ['12:30', '14:30', '16:50', '17:50', '26:20'],\r\n];\r\n\r\nconst movies = {\r\n  1: {\r\n    id: 1,\r\n    name: ' ',\r\n    description:\r\n      '         , ,     . ,   ,      ,     . \\n' +\r\n      '\\n' +\r\n      ' ,   .  ,   111-        ,     ,      .    -    ,       .        .       ,        ,    ',\r\n    duration: 178,\r\n    genres: ['', ''],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/328.jpg',\r\n    frames: [\r\n      {\r\n        description: ' ',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/328.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/5/3/kinopoisk.ru-The-Lord-of-the-Rings_3A-The-Fellowship-of-the-Ring-1530919.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/5/3/kinopoisk.ru-The-Lord-of-the-Rings_3A-The-Fellowship-of-the-Ring-1530934.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/5/3/kinopoisk.ru-The-Lord-of-the-Rings_3A-The-Fellowship-of-the-Ring-1530933.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/5/3/kinopoisk.ru-The-Lord-of-the-Rings_3A-The-Fellowship-of-the-Ring-1530932.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/5/3/kinopoisk.ru-The-Lord-of-the-Rings_3A-The-Fellowship-of-the-Ring-1530925.jpg',\r\n      },\r\n    ],\r\n  },\r\n  2: {\r\n    id: 2,\r\n    name: ':   ',\r\n    description: `             , ,     ,  ,    ,        ,      .   ,     ,    ,         ,       .\r\n\r\n      ,      ,    ,                      ,          .        ,         .`,\r\n    duration: 205,\r\n    genres: ['', ''],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/694633.jpg',\r\n    frames: [\r\n      {\r\n        description: ':   ',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/694633.jpg',\r\n      },\r\n      {\r\n        description: ':   ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/5/4/kinopoisk.ru-The-Hobbit_3A-The-Battle-of-the-Five-Armies-2545681.jpg',\r\n      },\r\n      {\r\n        description: ':   ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/5/4/kinopoisk.ru-The-Hobbit_3A-The-Battle-of-the-Five-Armies-2545680.jpg',\r\n      },\r\n      {\r\n        description: ':   ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/5/4/kinopoisk.ru-The-Hobbit_3A-The-Battle-of-the-Five-Armies-2545678.jpg',\r\n      },\r\n      {\r\n        description: ':   ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/5/4/kinopoisk.ru-The-Hobbit_3A-The-Battle-of-the-Five-Armies-2545677.jpg',\r\n      },\r\n      {\r\n        description: ':   ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/5/4/kinopoisk.ru-The-Hobbit_3A-The-Battle-of-the-Five-Armies-2545676.jpg',\r\n      },\r\n    ],\r\n  },\r\n  3: {\r\n    id: 3,\r\n    name: ' ',\r\n    description:\r\n      '\\n' +\r\n      '70       . ,       ,      .       ,              ;              .      ,    . ,    :          .',\r\n    duration: 229,\r\n    genres: ['', '', ''],\r\n    poster:\r\n      'https://st.kp.yandex.net/im/poster/2/2/2/kinopoisk.ru-Iron-Sky-2227391.jpg',\r\n    frames: [\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/poster/2/2/2/kinopoisk.ru-Iron-Sky-2227391.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/8/4/kinopoisk.ru-Iron-Sky-1844974.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/8/4/kinopoisk.ru-Iron-Sky-1844973.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/8/4/kinopoisk.ru-Iron-Sky-1844970.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/8/6/kinopoisk.ru-Iron-Sky-1864548.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/8/9/kinopoisk.ru-Iron-Sky-1894592.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/1/8/6/kinopoisk.ru-Iron-Sky-1864546.jpg',\r\n      },\r\n    ],\r\n  },\r\n  4: {\r\n    id: 4,\r\n    name: ' ',\r\n    description:\r\n      ', XXVII . ,              .     ,   ,   ,             ,           .    ,        ,            .',\r\n    duration: 229,\r\n    genres: ['', ''],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/669089.jpg',\r\n    frames: [\r\n      {\r\n        description: ' ',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/669089.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/0/8/kinopoisk.ru-Altered-Carbon-3089561.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/2/1/kinopoisk.ru-Altered-Carbon-3216791.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/2/1/kinopoisk.ru-Altered-Carbon-3216789.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/2/1/kinopoisk.ru-Altered-Carbon-3216790.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/1/2/kinopoisk.ru-Altered-Carbon-3121337.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/1/2/kinopoisk.ru-Altered-Carbon-3121340.jpg',\r\n      },\r\n    ],\r\n  },\r\n  5: {\r\n    id: 5,\r\n    name: '',\r\n    description:\r\n      '  XV        :      ,   .            .  1492 ,     VIII,      VI (   ),           ',\r\n    duration: 236,\r\n    genres: [''],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/521722.jpg',\r\n    frames: [\r\n      {\r\n        description: '',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/521722.jpg',\r\n      },\r\n      {\r\n        description: '',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/1/9/kinopoisk.ru-The-Borgias-2192982.jpg',\r\n      },\r\n      {\r\n        description: '',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/1/9/kinopoisk.ru-The-Borgias-2192979.jpg',\r\n      },\r\n      {\r\n        description: '',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/1/9/kinopoisk.ru-The-Borgias-2192978.jpg',\r\n      },\r\n      {\r\n        description: '',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/1/9/kinopoisk.ru-The-Borgias-2192981.jpg',\r\n      },\r\n      {\r\n        description: '',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/1/9/kinopoisk.ru-The-Borgias-2192977.jpg',\r\n      },\r\n    ],\r\n  },\r\n  6: {\r\n    id: 6,\r\n    name: ' ',\r\n    description:\r\n      '    ,  ,   , .     ,  ,  ,              .  ,           ,        ,    ,   .  ,                    .',\r\n    duration: 218,\r\n    genres: ['', '', ''],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/464963.jpg',\r\n    frames: [\r\n      {\r\n        description: ' ',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/464963.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/7/7/kinopoisk.ru-Game-of-Thrones-2777019.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/2/7/8/kinopoisk.ru-Game-of-Thrones-2786695.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/0/3/kinopoisk.ru-Game-of-Thrones-3030604.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/0/1/kinopoisk.ru-Game-of-Thrones-3019199.jpg',\r\n      },\r\n      {\r\n        description: ' ',\r\n        url:\r\n          'https://st.kp.yandex.net/im/kadr/3/0/1/kinopoisk.ru-Game-of-Thrones-3011410.jpg',\r\n      },\r\n    ],\r\n  },\r\n  7: {\r\n    id: 7,\r\n    name: ': ',\r\n    description:\r\n      '            ,        .             .',\r\n    duration: 183,\r\n    genres: ['', ''],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/843650.jpg',\r\n    frames: [\r\n      {\r\n        description: ': ',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/843650.jpg',\r\n      },\r\n    ],\r\n  },\r\n  8: {\r\n    id: 8,\r\n    name: '',\r\n    description: `,   , ,       .    ,        .\r\n\r\n ,    . . .,      ,   .      , ,  ,          .`,\r\n    duration: 93,\r\n    genres: ['', ''],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/263531.jpg',\r\n    frames: [\r\n      {\r\n        description: '',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/263531.jpg',\r\n      },\r\n    ],\r\n  },\r\n  9: {\r\n    id: 9,\r\n    name: '',\r\n    description:\r\n      '      -,   1984-   - ,    -,      .  :      ,      2029      .  :       .',\r\n    duration: 85,\r\n    genres: ['', '', ''],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/507.jpg',\r\n    frames: [\r\n      {\r\n        description: '',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/507.jpg',\r\n      },\r\n    ],\r\n  },\r\n  10: {\r\n    id: 10,\r\n    name: ' 2:  ',\r\n    description: `      ,  -  2029       ,        .\r\n\r\n       ,           ,  .                  .      ,     .\r\n\r\n      ,         .      ,      .`,\r\n    duration: 157,\r\n    genres: ['', '', ''],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/444.jpg',\r\n    frames: [\r\n      {\r\n        description: ' 2:  ',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/444.jpg',\r\n      },\r\n    ],\r\n  },\r\n  11: {\r\n    id: 11,\r\n    name: ' 3:  ',\r\n    description: `     ,             .   25,          ,   ,      .\r\n\r\n    .       Skynet    ,  -        .       T-X  ,   - Skynet.\r\n\r\n   ,   ,   , T-1000,     ,     .       ,    .         T-X     `,\r\n    duration: 60,\r\n    genres: ['', '', ''],\r\n    poster: 'https://www.kinopoisk.ru/images/film_big/319.jpg',\r\n    frames: [\r\n      {\r\n        description: ' 3:  ',\r\n        url: 'https://www.kinopoisk.ru/images/film_big/319.jpg',\r\n      },\r\n    ],\r\n  },\r\n};\r\n","import { getMovie, getMovies, getSeances } from '../../../mocks/movies';\r\n\r\nfunction fetchMovies(date) {\r\n  return new Promise(resolve => {\r\n    setTimeout(() => resolve(getMovies(date)), 1000);\r\n  });\r\n}\r\n\r\nfunction fetchMovie(id) {\r\n  return new Promise(resolve => {\r\n    setTimeout(() => resolve(getMovie(id)), 1000);\r\n  });\r\n}\r\n\r\nfunction fetchSeances(movieId, date) {\r\n  return new Promise(resolve => {\r\n    setTimeout(() => resolve(getSeances(movieId, date)), 1000);\r\n  });\r\n}\r\n\r\nexport { fetchMovies, fetchMovie, fetchSeances };","import {\r\n  all,\r\n  call,\r\n  takeLatest,\r\n  put,\r\n} from 'redux-saga/dist/redux-saga-effects-npm-proxy.esm';\r\n\r\nimport {\r\n  fetchMovieError,\r\n  fetchMoviesError,\r\n  fetchMoviesSuccess,\r\n  fetchMovieSuccess,\r\n  fetchSeancesError,\r\n  fetchSeancesSuccess,\r\n} from './actions';\r\n\r\nimport { FETCH_MOVIE, FETCH_MOVIES, FETCH_SEANCES } from './action-types';\r\nimport * as services from './services';\r\n\r\nfunction* fetchMovies({ date }) {\r\n  try {\r\n    const movies = yield call(services.fetchMovies, date);\r\n    yield put(fetchMoviesSuccess(movies));\r\n  } catch (e) {\r\n    yield put(fetchMoviesError(e));\r\n  }\r\n}\r\n\r\nfunction* fetchMovie({ id }) {\r\n  try {\r\n    const movie = yield call(services.fetchMovie, id);\r\n    yield put(fetchMovieSuccess(movie));\r\n  } catch (e) {\r\n    yield put(fetchMovieError(e));\r\n  }\r\n}\r\n\r\nfunction* fetchSeances({ movieId, date }) {\r\n  try {\r\n    const seances = yield call(services.fetchSeances, movieId, date);\r\n    yield put(fetchSeancesSuccess(seances));\r\n  } catch (e) {\r\n    yield put(fetchSeancesError(e));\r\n  }\r\n}\r\n\r\nexport function* watchMoviesRequests() {\r\n  yield all([\r\n    takeLatest(FETCH_MOVIES.REQUEST, fetchMovies),\r\n    takeLatest(FETCH_MOVIE.REQUEST, fetchMovie),\r\n    takeLatest(FETCH_SEANCES.REQUEST, fetchSeances),\r\n  ]);\r\n}\r\n","export function reserveTicketsRequest(seanceId, seatsId) {\r\n  return new Promise(resolve => {\r\n    setTimeout(() => {\r\n      resolve([seanceId, seatsId]);\r\n    }, 1000);\r\n  });\r\n}\r\n\r\nexport function payTicketsRequest(seanceId, seatsId) {\r\n  return new Promise(resolve => {\r\n    setTimeout(() => {\r\n      resolve([seanceId, seatsId]);\r\n    }, 1000);\r\n  });\r\n}\r\n","import { all, call, takeLatest, put } from 'redux-saga/effects';\r\n\r\nimport {\r\n  payTicketsError,\r\n  payTicketsSuccess,\r\n  reserveTicketsError,\r\n  reserveTicketsSuccess,\r\n} from './actions';\r\nimport { PAY_TICKETS, RESERVE_TICKETS } from './action-types';\r\nimport * as services from './services';\r\n\r\nfunction* reserveTickets({ seanceId, seatsId }) {\r\n  try {\r\n    const [reservedSeanceId, reservedSeatsId] = yield call(\r\n      services.reserveTicketsRequest,\r\n      seanceId,\r\n      seatsId,\r\n    );\r\n    yield put(reserveTicketsSuccess(reservedSeanceId, reservedSeatsId));\r\n  } catch (e) {\r\n    yield put(reserveTicketsError());\r\n  }\r\n}\r\n\r\nfunction* payTickets({ seanceId, seatsId }) {\r\n  try {\r\n    const [payedSeanceId, payedSeatsId] = yield call(\r\n      services.payTicketsRequest,\r\n      seanceId,\r\n      seatsId,\r\n    );\r\n    yield put(payTicketsSuccess(payedSeanceId, payedSeatsId));\r\n  } catch (e) {\r\n    yield put(payTicketsError(e));\r\n  }\r\n}\r\n\r\nexport function* watchTicketsRequests() {\r\n  yield all([\r\n    takeLatest(RESERVE_TICKETS.REQUEST, reserveTickets),\r\n    takeLatest(PAY_TICKETS.REQUEST, payTickets),\r\n  ]);\r\n}\r\n","import { all, call } from 'redux-saga/effects';\r\nimport { watchMoviesRequests } from '../ducks/data/movies/sagas';\r\nimport { watchTicketsRequests } from '../ducks/data/tickets/sagas';\r\n\r\nexport default function* rootSaga() {\r\n  yield all([call(watchMoviesRequests), call(watchTicketsRequests)]);\r\n}\r\n","import createSagaMiddleware from 'redux-saga';\r\n\r\nimport { applyMiddleware, createStore } from 'redux';\r\nimport { routerMiddleware } from 'connected-react-router';\r\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly';\r\n\r\nimport { rootReducer, history } from './rootReducer';\r\nimport rootSaga from './rootSaga';\r\n\r\nconst navigationMiddleware = routerMiddleware(history);\r\nconst sagaMiddleware = createSagaMiddleware();\r\nconst initialState = {};\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  initialState,\r\n  composeWithDevTools(applyMiddleware(navigationMiddleware, sagaMiddleware)),\r\n);\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport { store };\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { ConnectedRouter } from 'connected-react-router';\r\nimport { Provider } from 'react-redux';\r\nimport moment from 'moment';\r\n\r\nimport { App } from './components/app-components/app';\r\nimport { history } from './store/rootReducer';\r\nimport { store } from './store/store';\r\n\r\nimport './assets/scss/reset.scss';\r\nimport './assets/scss/main.scss';\r\nimport './index.scss';\r\n\r\nmoment.locale('ru');\r\n\r\nconst nominative_months = [\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n];\r\n\r\nconst subjective_months = [\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n];\r\n\r\nmoment.updateLocale('ru', {\r\n  months(momentToFormat, format) {\r\n    if (/^MMMM/.test(format)) {\r\n      return nominative_months[momentToFormat.month()];\r\n    }\r\n    return subjective_months[momentToFormat.month()];\r\n  },\r\n  weekdaysShort: ['', '', '', '', '', '', ''],\r\n  weekdaysMin: ['', '', '', '', '', '', ''],\r\n});\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ConnectedRouter history={history}>\r\n      <App />\r\n    </ConnectedRouter>\r\n  </Provider>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n"],"sourceRoot":""}